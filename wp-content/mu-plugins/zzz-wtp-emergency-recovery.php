<?php /**  * Plugin Name: WTP Emergency Recovery  * Description: Awaryjnie wymusza motyw Twenty Twenty-Five, miękko wyłącza wtyczki i włącza logowanie błędów. ZERO outputu.  * Version: 1.0.0  */ if (!defined('ABSPATH')) { exit; }  /** 0) Włącz logowanie błędów do wp-content/debug.log (bez dotykania wp-config.php) */ @ini_set('log_errors', '1'); @ini_set('display_errors', '0'); $debugLog = WP_CONTENT_DIR . '/debug.log'; @ini_set('error_log', $debugLog);  /** 1) Miękkie wyłączenie wszystkich zwykłych wtyczek (MU zostają) – tylko na czas ładowania */ add_filter('option_active_plugins', function ($plugins) {     // Zostaw puste: brak zwykłych wtyczek podczas requestu     return []; }, 0);  /** 2) Jeśli aktywny jest wtp-core-theme albo WP ma problem z motywem → wymuś TT25 */ add_action('muplugins_loaded', function () {     if (!function_exists('wp_get_theme') || !function_exists('switch_theme')) return;      $force = false;     $t = wp_get_theme();     if (!$t || !$t->exists()) {         $force = true;     } else {         $isWtp = ($t->get_stylesheet() === 'wtp-core-theme' || $t->get_template() === 'wtp-core-theme');         if ($isWtp) $force = true;     }      if ($force) {         // ustawienia opcji + realny switch (brak outputu)         @update_option('stylesheet', 'twentytwentyfive');         @update_option('template',   'twentytwentyfive');         @switch_theme('twentytwentyfive', 'twentytwentyfive');         if (function_exists('wp_cache_flush')) { @wp_cache_flush(); }     } }, 0);  /** 3) Nic nie wypisuj nigdzie – absolutna cisza */