<?php /**  * Plugin Name: WTP Global Safe-Mode  * Description: Awaryjnie wymusza motyw Twenty Twenty-Five i wyłącza wszystkie zwykłe wtyczki zanim WP wczyta motyw. ZERO outputu.  * Version: 1.0.0  */ if (!defined('ABSPATH')) { exit; }  /** 0) Hard log to wp-content/debug.log (bez dotykania wp-config.php) */ @ini_set('log_errors', '1'); @ini_set('display_errors', '0'); @ini_set('error_log', WP_CONTENT_DIR . '/debug.log');  /**  * 1) Wyłącz WSZYSTKIE zwykłe wtyczki na czas requestu (MU zostają)  *    pre_option_* działa zanim WP pobierze opcję z DB → skuteczniejsze niż filtrowanie option_*  */ add_filter('pre_option_active_plugins', static function () {     return []; // brak aktywnych zwykłych wtyczek w tym requestcie }, 0);  /**  * 2) Wymuś motyw TT25 niezależnie od opcji w DB  *    Te filtry działają zanim WP spróbuje wczytać pliki motywu.  */ add_filter('template', static function ($t) { return 'twentytwentyfive'; }, 0); add_filter('stylesheet', static function ($s) { return 'twentytwentyfive'; }, 0);  /**  * 3) Po starcie motywu przepłucz cache (jeśli istnieje)  */ add_action('after_setup_theme', static function () {     if (function_exists('wp_cache_flush')) { @wp_cache_flush(); }     if (function_exists('do_action')) { @do_action('wtp_safemode_active'); } }, 1);  /** 4) ABSOLUTNIE nic nie wypisuj do outputu w tym pliku */