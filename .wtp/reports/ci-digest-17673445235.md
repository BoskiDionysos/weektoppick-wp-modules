# CI logs digest ‚Äì run 17673445235

## Files
```
.wtp/state/ci_logs/2025-09-12T08:30:38Z_Deploy_Site_(MU,_plugins,_themes,_wp-config)_run-17669116150.txt
.wtp/state/ci_logs/2025-09-12T08:48:21Z_AI_Upsert_File_run-17669522469.txt
.wtp/state/ci_logs/2025-09-12T09:08:35Z_AI_Upsert_File_run-17669992570.txt
.wtp/state/ci_logs/2025-09-12T09:29:43Z_Deploy_Site_(MU,_plugins,_themes,_wp-config)_run-17670491954.txt
.wtp/state/ci_logs/2025-09-12T09:33:51Z_Deploy_Site_(MU,_plugins,_themes,_wp-config)_run-17670594980.txt
.wtp/state/ci_logs/2025-09-12T09:51:28Z_AI_Upsert_File_run-17671001581.txt
.wtp/state/ci_logs/2025-09-12T11:02:50Z_WP-CLI_install_or_update_allowed_plugins_run-17672561599.txt
.wtp/state/ci_logs/2025-09-12T11:08:07Z_AI_Upsert_File_run-17672691381.txt
.wtp/state/ci_logs/2025-09-12T11:21:23Z_WP-CLI_install_or_update_allowed_plugins_run-17672989857.txt
.wtp/state/ci_logs/2025-09-12T11:27:29Z_WP-CLI_install_or_update_allowed_plugins_run-17673125163.txt
```

## Heuristics (errors & warnings)

_No known error patterns found._

## Tail (last 80 lines per file)

### .wtp/state/ci_logs/2025-09-12T08:30:38Z_Deploy_Site_(MU,_plugins,_themes,_wp-config)_run-17669116150.txt
```
2025-09-12T08:30:29.8675284Z Get:25 http://azure.archive.ubuntu.com/ubuntu noble-updates/multiverse amd64 c-n-f Metadata [644 B]
2025-09-12T08:30:29.8685523Z Get:26 http://azure.archive.ubuntu.com/ubuntu noble-backports/main amd64 Components [7076 B]
2025-09-12T08:30:29.8700650Z Get:27 http://azure.archive.ubuntu.com/ubuntu noble-backports/universe amd64 Components [19.1 kB]
2025-09-12T08:30:29.8716982Z Get:28 http://azure.archive.ubuntu.com/ubuntu noble-backports/restricted amd64 Components [216 B]
2025-09-12T08:30:29.8760500Z Get:29 http://azure.archive.ubuntu.com/ubuntu noble-backports/multiverse amd64 Components [212 B]
2025-09-12T08:30:29.8778586Z Get:30 http://azure.archive.ubuntu.com/ubuntu noble-security/main amd64 Packages [1118 kB]
2025-09-12T08:30:29.8857608Z Get:31 http://azure.archive.ubuntu.com/ubuntu noble-security/main amd64 Components [21.5 kB]
2025-09-12T08:30:29.8869920Z Get:32 http://azure.archive.ubuntu.com/ubuntu noble-security/main amd64 c-n-f Metadata [8712 B]
2025-09-12T08:30:29.8884024Z Get:33 http://azure.archive.ubuntu.com/ubuntu noble-security/universe amd64 Packages [879 kB]
2025-09-12T08:30:29.9396019Z Get:34 http://azure.archive.ubuntu.com/ubuntu noble-security/universe Translation-en [195 kB]
2025-09-12T08:30:29.9420847Z Get:35 http://azure.archive.ubuntu.com/ubuntu noble-security/universe amd64 Components [52.2 kB]
2025-09-12T08:30:29.9437366Z Get:36 http://azure.archive.ubuntu.com/ubuntu noble-security/universe amd64 c-n-f Metadata [18.0 kB]
2025-09-12T08:30:29.9450914Z Get:37 http://azure.archive.ubuntu.com/ubuntu noble-security/restricted amd64 Components [212 B]
2025-09-12T08:30:29.9463203Z Get:38 http://azure.archive.ubuntu.com/ubuntu noble-security/multiverse amd64 Components [208 B]
2025-09-12T08:30:34.9353518Z Fetched 9133 kB in 1s (7784 kB/s)
2025-09-12T08:30:35.6268236Z Reading package lists...
2025-09-12T08:30:35.6590102Z Reading package lists...
2025-09-12T08:30:35.8190608Z Building dependency tree...
2025-09-12T08:30:35.8198449Z Reading state information...
2025-09-12T08:30:35.9878563Z rsync is already the newest version (3.2.7-1ubuntu1.2).
2025-09-12T08:30:35.9879249Z sshpass is already the newest version (1.09-1).
2025-09-12T08:30:35.9879817Z jq is already the newest version (1.7.1-3ubuntu0.24.04.1).
2025-09-12T08:30:35.9900681Z 0 upgraded, 0 newly installed, 0 to remove and 18 not upgraded.
2025-09-12T08:30:35.9934662Z ##[group]Run set -euo pipefail
2025-09-12T08:30:35.9934997Z [36;1mset -euo pipefail[0m
2025-09-12T08:30:35.9935448Z [36;1mtest -n "${HOST:-}" && test -n "${PORT:-}" && test -n "${USER:-}" && test -n "${PASS:-}" && test -n "${TARGET:-}" \[0m
2025-09-12T08:30:35.9935922Z [36;1m  || { echo "::error::Missing deploy secrets"; exit 1; }[0m
2025-09-12T08:30:35.9967314Z shell: /usr/bin/bash -e {0}
2025-09-12T08:30:35.9967572Z env:
2025-09-12T08:30:35.9967887Z   HOST: ***
2025-09-12T08:30:35.9968084Z   PORT: ***
2025-09-12T08:30:35.9968276Z   USER: ***
2025-09-12T08:30:35.9968480Z   PASS: ***
2025-09-12T08:30:35.9968769Z   TARGET: ***
2025-09-12T08:30:35.9968962Z ##[endgroup]
2025-09-12T08:30:36.0045728Z ##[group]Run set -euo pipefail
2025-09-12T08:30:36.0046070Z [36;1mset -euo pipefail[0m
2025-09-12T08:30:36.0046321Z [36;1mLIST=""[0m
2025-09-12T08:30:36.0046684Z [36;1mif   [ -f ".wtp/protected-plugins.txt" ]; then LIST=".wtp/protected-plugins.txt"[0m
2025-09-12T08:30:36.0047240Z [36;1melif [ -f "wtp/protected-plugins.txt"  ]; then LIST="wtp/protected-plugins.txt"[0m
2025-09-12T08:30:36.0047638Z [36;1mfi[0m
2025-09-12T08:30:36.0047838Z [36;1mFILTERS="$(mktemp)"[0m
2025-09-12T08:30:36.0048078Z [36;1mif [ -n "$LIST" ]; then[0m
2025-09-12T08:30:36.0048381Z [36;1m  echo "Using protect list: $LIST"[0m
2025-09-12T08:30:36.0048767Z [36;1m  # normalizacja linii (bez BOM/CR), wytnij komentarze i puste[0m
2025-09-12T08:30:36.0049202Z [36;1m  sed -e 's/\r$//' "$LIST" | sed 's/^\xEF\xBB\xBF//' | while IFS= read -r name; do[0m
2025-09-12T08:30:36.0049592Z [36;1m    name="${name%%#*}"; name="$(echo "$name" | xargs)"[0m
2025-09-12T08:30:36.0049922Z [36;1m    [ -z "$name" ] && continue[0m
2025-09-12T08:30:36.0050192Z [36;1m    echo "P ${name}/**" >> "$FILTERS"[0m
2025-09-12T08:30:36.0050448Z [36;1m  done[0m
2025-09-12T08:30:36.0050635Z [36;1mfi[0m
2025-09-12T08:30:36.0050862Z [36;1mecho "filters=$FILTERS" >> "$GITHUB_OUTPUT"[0m
2025-09-12T08:30:36.0051429Z [36;1mecho "list=${LIST}"     >> "$GITHUB_OUTPUT"[0m
2025-09-12T08:30:36.0051749Z [36;1mecho "---- PROTECT FILTERS ----"[0m
2025-09-12T08:30:36.0052104Z [36;1mif [ -s "$FILTERS" ]; then cat "$FILTERS"; else echo "(empty)"; fi[0m
2025-09-12T08:30:36.0052450Z [36;1mecho "-------------------------"[0m
2025-09-12T08:30:36.0081979Z shell: /usr/bin/bash --noprofile --norc -e -o pipefail {0}
2025-09-12T08:30:36.0082314Z env:
2025-09-12T08:30:36.0082552Z   HOST: ***
2025-09-12T08:30:36.0082747Z   PORT: ***
2025-09-12T08:30:36.0082937Z   USER: ***
2025-09-12T08:30:36.0083161Z   PASS: ***
2025-09-12T08:30:36.0083446Z   TARGET: ***
2025-09-12T08:30:36.0083637Z ##[endgroup]
2025-09-12T08:30:36.0140273Z Using protect list: .wtp/protected-plugins.txt
2025-09-12T08:30:36.0348392Z xargs: unmatched single quote; by default quotes are special to xargs unless you use the -0 option
2025-09-12T08:30:36.0363479Z ##[error]Process completed with exit code 1.
2025-09-12T08:30:36.0566830Z Post job cleanup.
2025-09-12T08:30:36.1488023Z [command]/usr/bin/git version
2025-09-12T08:30:36.1523395Z git version 2.51.0
2025-09-12T08:30:36.1568139Z Temporarily overriding HOME='/home/runner/work/_temp/2c5172c9-3a29-4eec-8afb-f979ff57f560' before making global git config changes
2025-09-12T08:30:36.1569757Z Adding repository directory to the temporary git global config as a safe directory
2025-09-12T08:30:36.1575012Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/weektoppick-wp-modules/weektoppick-wp-modules
2025-09-12T08:30:36.1609984Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
2025-09-12T08:30:36.1643643Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2025-09-12T08:30:36.1875607Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2025-09-12T08:30:36.1898394Z http.https://github.com/.extraheader
2025-09-12T08:30:36.1911790Z [command]/usr/bin/git config --local --unset-all http.https://github.com/.extraheader
2025-09-12T08:30:36.1942462Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2025-09-12T08:30:36.2257453Z Cleaning up orphan processes
```

### .wtp/state/ci_logs/2025-09-12T08:48:21Z_AI_Upsert_File_run-17669522469.txt
```

if (!path)    return core.setFailed('Input "path" is required.');
if (!message) return core.setFailed('Input "message" is required.');
if (path.startsWith('/')) return core.setFailed('Path musi byƒá repo-relative (bez wiodƒÖcego "/").');

const both = (content_plain !== '' && content_b64 !== '');
const none = (content_plain === '' && content_b64 === '');
if (both || none) return core.setFailed('Podaj dok≈Çadnie jedno: content_plain ALBO content_b64.');

let buf;
if (content_b64) {
  try { buf = Buffer.from(content_b64, 'base64'); if (buf.toString('base64') !== content_b64) throw 0; }
  catch { return core.setFailed('content_b64 nie jest prawid≈Çowym Base64.'); }
} else {
  buf = Buffer.from(content_plain, 'utf8');
  content_b64 = buf.toString('base64');
}

if (sha256) {
  const calc = crypto.createHash('sha256').update(buf).digest('hex');
  core.info(`sha256(user)=${sha256}`);
  core.info(`sha256(calc)=${calc}`);
  if (calc !== sha256) return core.setFailed('SHA-256 mismatch tre≈õci.');
}

const { owner, repo } = context.repo;

// read existing sha if any
let sha;
try {
  const { data } = await github.request('GET /repos/{owner}/{repo}/contents/{path}', {
    owner, repo, path, ref: branch,
  });
  sha = data?.sha || undefined;
  core.info(`Existing sha=${sha || '(new file)'}`);
} catch (e) {
  if (e.status !== 404) return core.setFailed(`getContent failed: ${e.message}`);
  core.info('File does not exist (creating).');
}

try {
  const res = await github.request('PUT /repos/{owner}/{repo}/contents/{path}', {
    owner, repo, path, message, branch, content: content_b64, sha
  });
  const commitSha = res.data.commit?.sha || '';
  await core.summary
    .addHeading('AI Upsert File')
    .addTable([
      [{data:'Field',header:true},{data:'Value',header:true}],
      ['path', path],
      ['branch', branch],
      ['commit', commitSha],
      ['verified_sha256', sha256 ? 'yes' : 'no']
    ])
    .write();
  core.info(`OK: commit ${commitSha}`);
} catch (e) {
  core.setFailed(`PUT failed: ${e.message}`);
}

2025-09-12T08:48:19.3698938Z   debug: false
2025-09-12T08:48:19.3699380Z   user-agent: actions/github-script
2025-09-12T08:48:19.3699904Z   result-encoding: json
2025-09-12T08:48:19.3700323Z   retries: 0
2025-09-12T08:48:19.3700769Z   retry-exempt-status-codes: 400,401,403,404,422
2025-09-12T08:48:19.3701890Z ##[endgroup]
2025-09-12T08:48:19.4823998Z event=workflow_dispatch
2025-09-12T08:48:19.4825219Z path=".wtp/vendor-plugins/.gitkeep", branch="main"
2025-09-12T08:48:19.4826285Z has_plain=false, has_b64=false
2025-09-12T08:48:19.4868833Z ##[error]Podaj dok≈Çadnie jedno: content_plain ALBO content_b64.

==== .wtp/state/ci_logs/2025-09-12T08:48:21Z_AI_Upsert_File_run-17669522469/upsert/3_Complete job.txt ====
Ôªø2025-09-12T08:48:19.5035033Z Cleaning up orphan processes

==== .wtp/state/ci_logs/2025-09-12T08:48:21Z_AI_Upsert_File_run-17669522469/upsert/system.txt ====
2025-09-12T08:48:15.6980000Z Requested labels: ubuntu-latest
2025-09-12T08:48:15.6980000Z Job defined at: BoskiDionysos/weektoppick-wp-modules/.github/workflows/ai-upsert-file.yml@refs/heads/main
2025-09-12T08:48:15.6980000Z Waiting for a runner to pick up this job...
2025-09-12T08:48:16.2040000Z Job is waiting for a hosted runner to come online.
2025-09-12T08:48:16.2040000Z Job is about to start running on the hosted runner: GitHub Actions 1000002023```

### .wtp/state/ci_logs/2025-09-12T09:08:35Z_AI_Upsert_File_run-17669992570.txt
```

if (!path)    return core.setFailed('Input "path" is required.');
if (!message) return core.setFailed('Input "message" is required.');
if (path.startsWith('/')) return core.setFailed('Path musi byƒá repo-relative (bez wiodƒÖcego "/").');

const both = (content_plain !== '' && content_b64 !== '');
const none = (content_plain === '' && content_b64 === '');
if (both || none) return core.setFailed('Podaj dok≈Çadnie jedno: content_plain ALBO content_b64.');

let buf;
if (content_b64) {
  try { buf = Buffer.from(content_b64, 'base64'); if (buf.toString('base64') !== content_b64) throw 0; }
  catch { return core.setFailed('content_b64 nie jest prawid≈Çowym Base64.'); }
} else {
  buf = Buffer.from(content_plain, 'utf8');
  content_b64 = buf.toString('base64');
}

if (sha256) {
  const calc = crypto.createHash('sha256').update(buf).digest('hex');
  core.info(`sha256(user)=${sha256}`);
  core.info(`sha256(calc)=${calc}`);
  if (calc !== sha256) return core.setFailed('SHA-256 mismatch tre≈õci.');
}

const { owner, repo } = context.repo;

// read existing sha if any
let sha;
try {
  const { data } = await github.request('GET /repos/{owner}/{repo}/contents/{path}', {
    owner, repo, path, ref: branch,
  });
  sha = data?.sha || undefined;
  core.info(`Existing sha=${sha || '(new file)'}`);
} catch (e) {
  if (e.status !== 404) return core.setFailed(`getContent failed: ${e.message}`);
  core.info('File does not exist (creating).');
}

try {
  const res = await github.request('PUT /repos/{owner}/{repo}/contents/{path}', {
    owner, repo, path, message, branch, content: content_b64, sha
  });
  const commitSha = res.data.commit?.sha || '';
  await core.summary
    .addHeading('AI Upsert File')
    .addTable([
      [{data:'Field',header:true},{data:'Value',header:true}],
      ['path', path],
      ['branch', branch],
      ['commit', commitSha],
      ['verified_sha256', sha256 ? 'yes' : 'no']
    ])
    .write();
  core.info(`OK: commit ${commitSha}`);
} catch (e) {
  core.setFailed(`PUT failed: ${e.message}`);
}

2025-09-12T09:08:32.5829762Z   debug: false
2025-09-12T09:08:32.5830179Z   user-agent: actions/github-script
2025-09-12T09:08:32.5830668Z   result-encoding: json
2025-09-12T09:08:32.5831065Z   retries: 0
2025-09-12T09:08:32.5831489Z   retry-exempt-status-codes: 400,401,403,404,422
2025-09-12T09:08:32.5832358Z ##[endgroup]
2025-09-12T09:08:32.6756202Z event=workflow_dispatch
2025-09-12T09:08:32.6757316Z path=".github/workflows/deploy-site.yml", branch="main"
2025-09-12T09:08:32.6758030Z has_plain=false, has_b64=true
2025-09-12T09:08:32.6788724Z ##[error]content_b64 nie jest prawid≈Çowym Base64.

==== .wtp/state/ci_logs/2025-09-12T09:08:35Z_AI_Upsert_File_run-17669992570/upsert/3_Complete job.txt ====
Ôªø2025-09-12T09:08:32.6909317Z Cleaning up orphan processes

==== .wtp/state/ci_logs/2025-09-12T09:08:35Z_AI_Upsert_File_run-17669992570/upsert/system.txt ====
2025-09-12T09:08:27.1550000Z Requested labels: ubuntu-latest
2025-09-12T09:08:27.1550000Z Job defined at: BoskiDionysos/weektoppick-wp-modules/.github/workflows/ai-upsert-file.yml@refs/heads/main
2025-09-12T09:08:27.1550000Z Waiting for a runner to pick up this job...
2025-09-12T09:08:27.6560000Z Job is waiting for a hosted runner to come online.
2025-09-12T09:08:27.6560000Z Job is about to start running on the hosted runner: GitHub Actions 1000002026```

### .wtp/state/ci_logs/2025-09-12T09:29:43Z_Deploy_Site_(MU,_plugins,_themes,_wp-config)_run-17670491954.txt
```
2025-09-12T09:28:56.5756194Z Get:16 http://azure.archive.ubuntu.com/ubuntu noble-updates/restricted amd64 Packages [1840 kB]
2025-09-12T09:28:56.5880472Z Get:17 http://azure.archive.ubuntu.com/ubuntu noble-updates/restricted Translation-en [410 kB]
2025-09-12T09:28:56.6420471Z Get:18 http://azure.archive.ubuntu.com/ubuntu noble-updates/restricted amd64 Components [212 B]
2025-09-12T09:28:56.6462949Z Get:19 http://azure.archive.ubuntu.com/ubuntu noble-updates/restricted amd64 c-n-f Metadata [500 B]
2025-09-12T09:28:56.6476820Z Get:20 http://azure.archive.ubuntu.com/ubuntu noble-updates/multiverse amd64 Packages [41.9 kB]
2025-09-12T09:28:56.6484671Z Get:21 http://azure.archive.ubuntu.com/ubuntu noble-updates/multiverse Translation-en [7064 B]
2025-09-12T09:28:56.6503909Z Get:22 http://azure.archive.ubuntu.com/ubuntu noble-updates/multiverse amd64 Components [940 B]
2025-09-12T09:28:56.6527924Z Get:23 http://azure.archive.ubuntu.com/ubuntu noble-updates/multiverse amd64 c-n-f Metadata [644 B]
2025-09-12T09:28:56.6557826Z Get:24 http://azure.archive.ubuntu.com/ubuntu noble-backports/main amd64 Components [7076 B]
2025-09-12T09:28:56.6567018Z Get:25 http://azure.archive.ubuntu.com/ubuntu noble-backports/universe amd64 Components [19.1 kB]
2025-09-12T09:28:56.6588876Z Get:26 http://azure.archive.ubuntu.com/ubuntu noble-backports/restricted amd64 Components [216 B]
2025-09-12T09:28:56.6605195Z Get:27 http://azure.archive.ubuntu.com/ubuntu noble-backports/multiverse amd64 Components [212 B]
2025-09-12T09:28:56.6643946Z Get:28 http://azure.archive.ubuntu.com/ubuntu noble-security/main amd64 Packages [1118 kB]
2025-09-12T09:28:56.6764503Z Get:29 http://azure.archive.ubuntu.com/ubuntu noble-security/main amd64 Components [21.5 kB]
2025-09-12T09:28:56.6776621Z Get:30 http://azure.archive.ubuntu.com/ubuntu noble-security/main amd64 c-n-f Metadata [8712 B]
2025-09-12T09:28:56.6794053Z Get:31 http://azure.archive.ubuntu.com/ubuntu noble-security/universe amd64 Packages [879 kB]
2025-09-12T09:28:56.7328654Z Get:32 http://azure.archive.ubuntu.com/ubuntu noble-security/universe Translation-en [195 kB]
2025-09-12T09:28:56.7350019Z Get:33 http://azure.archive.ubuntu.com/ubuntu noble-security/universe amd64 Components [52.2 kB]
2025-09-12T09:28:56.7365013Z Get:34 http://azure.archive.ubuntu.com/ubuntu noble-security/universe amd64 c-n-f Metadata [18.0 kB]
2025-09-12T09:28:56.7376772Z Get:35 http://azure.archive.ubuntu.com/ubuntu noble-security/restricted amd64 Components [212 B]
2025-09-12T09:28:56.7395802Z Get:37 https://packages.microsoft.com/ubuntu/24.04/prod noble/main amd64 Packages [51.6 kB]
2025-09-12T09:28:56.7477107Z Get:36 http://azure.archive.ubuntu.com/ubuntu noble-security/multiverse amd64 Components [208 B]
2025-09-12T09:28:56.8017114Z Get:38 https://packages.microsoft.com/ubuntu/24.04/prod noble/main arm64 Packages [35.3 kB]
2025-09-12T09:29:02.3862433Z Fetched 9133 kB in 1s (7448 kB/s)
2025-09-12T09:29:03.0819989Z Reading package lists...
2025-09-12T09:29:03.1145784Z Reading package lists...
2025-09-12T09:29:03.2776127Z Building dependency tree...
2025-09-12T09:29:03.2786911Z Reading state information...
2025-09-12T09:29:03.4517311Z rsync is already the newest version (3.2.7-1ubuntu1.2).
2025-09-12T09:29:03.4518095Z sshpass is already the newest version (1.09-1).
2025-09-12T09:29:03.4518724Z jq is already the newest version (1.7.1-3ubuntu0.24.04.1).
2025-09-12T09:29:03.4520101Z The following NEW packages will be installed:
2025-09-12T09:29:03.4524289Z   dos2unix
2025-09-12T09:29:03.4695754Z 0 upgraded, 1 newly installed, 0 to remove and 18 not upgraded.
2025-09-12T09:29:03.4696344Z Need to get 501 kB of archives.
2025-09-12T09:29:03.4696688Z After this operation, 1868 kB of additional disk space will be used.
2025-09-12T09:29:03.4697108Z Get:1 file:/etc/apt/apt-mirrors.txt Mirrorlist [144 B]
2025-09-12T09:29:03.5670510Z Get:2 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 dos2unix amd64 7.5.1-1 [501 kB]
2025-09-12T09:29:03.9067434Z Fetched 501 kB in 0s (2653 kB/s)
2025-09-12T09:29:03.9442383Z Selecting previously unselected package dos2unix.
2025-09-12T09:29:03.9815946Z (Reading database ... 
2025-09-12T09:29:03.9816651Z (Reading database ... 5%
2025-09-12T09:29:03.9817233Z (Reading database ... 10%
2025-09-12T09:29:03.9817867Z (Reading database ... 15%
2025-09-12T09:29:03.9818355Z (Reading database ... 20%
2025-09-12T09:29:03.9818770Z (Reading database ... 25%
2025-09-12T09:29:03.9819206Z (Reading database ... 30%
2025-09-12T09:29:03.9819637Z (Reading database ... 35%
2025-09-12T09:29:03.9820073Z (Reading database ... 40%
2025-09-12T09:29:03.9820467Z (Reading database ... 45%
2025-09-12T09:29:03.9820894Z (Reading database ... 50%
2025-09-12T09:29:04.1112145Z (Reading database ... 55%
2025-09-12T09:29:04.6510778Z (Reading database ... 60%
2025-09-12T09:29:05.1870167Z (Reading database ... 65%
2025-09-12T09:29:05.7101829Z (Reading database ... 70%
2025-09-12T09:29:06.2726129Z (Reading database ... 75%
2025-09-12T09:29:06.8295839Z (Reading database ... 80%
2025-09-12T09:29:07.4739091Z (Reading database ... 85%
2025-09-12T09:29:08.1194788Z (Reading database ... 90%
2025-09-12T09:29:08.7105813Z (Reading database ... 95%
2025-09-12T09:29:08.7106362Z (Reading database ... 100%
2025-09-12T09:29:08.7107300Z (Reading database ... 218657 files and directories currently installed.)
2025-09-12T09:29:08.7154151Z Preparing to unpack .../dos2unix_7.5.1-1_amd64.deb ...
2025-09-12T09:29:08.7184285Z Unpacking dos2unix (7.5.1-1) ...
2025-09-12T09:29:09.0379771Z Setting up dos2unix (7.5.1-1) ...
2025-09-12T09:29:09.0413536Z Processing triggers for man-db (2.12.0-4build2) ...
2025-09-12T09:29:39.4240435Z ##[error]The operation was canceled.
2025-09-12T09:29:39.4446541Z Post job cleanup.
2025-09-12T09:29:39.5385779Z [command]/usr/bin/git version
2025-09-12T09:29:39.5421184Z git version 2.51.0
2025-09-12T09:29:39.5463267Z Temporarily overriding HOME='/home/runner/work/_temp/870acb62-3d00-4538-a0ae-f574e9d95591' before making global git config changes
2025-09-12T09:29:39.5464575Z Adding repository directory to the temporary git global config as a safe directory
2025-09-12T09:29:39.5470795Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/weektoppick-wp-modules/weektoppick-wp-modules
2025-09-12T09:29:39.5506944Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
2025-09-12T09:29:39.5539953Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2025-09-12T09:29:39.5762564Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2025-09-12T09:29:39.5783268Z http.https://github.com/.extraheader
2025-09-12T09:29:39.5795721Z [command]/usr/bin/git config --local --unset-all http.https://github.com/.extraheader
2025-09-12T09:29:39.5825700Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2025-09-12T09:29:39.6156011Z Cleaning up orphan processes
```

### .wtp/state/ci_logs/2025-09-12T09:33:51Z_Deploy_Site_(MU,_plugins,_themes,_wp-config)_run-17670594980.txt
```
2025-09-12T09:33:11.7891038Z Get:16 http://azure.archive.ubuntu.com/ubuntu noble-updates/restricted amd64 Packages [1840 kB]
2025-09-12T09:33:11.7992379Z Get:17 http://azure.archive.ubuntu.com/ubuntu noble-updates/restricted Translation-en [410 kB]
2025-09-12T09:33:11.8126216Z Get:24 https://packages.microsoft.com/ubuntu/24.04/prod noble/main amd64 Packages [51.6 kB]
2025-09-12T09:33:11.8166382Z Get:25 https://packages.microsoft.com/ubuntu/24.04/prod noble/main arm64 Packages [35.3 kB]
2025-09-12T09:33:11.8478070Z Get:18 http://azure.archive.ubuntu.com/ubuntu noble-updates/restricted amd64 Components [212 B]
2025-09-12T09:33:11.8485938Z Get:19 http://azure.archive.ubuntu.com/ubuntu noble-updates/restricted amd64 c-n-f Metadata [500 B]
2025-09-12T09:33:11.8497178Z Get:20 http://azure.archive.ubuntu.com/ubuntu noble-updates/multiverse amd64 Packages [41.9 kB]
2025-09-12T09:33:11.8502319Z Get:21 http://azure.archive.ubuntu.com/ubuntu noble-updates/multiverse Translation-en [7064 B]
2025-09-12T09:33:11.8540672Z Get:22 http://azure.archive.ubuntu.com/ubuntu noble-updates/multiverse amd64 Components [940 B]
2025-09-12T09:33:11.8546837Z Get:23 http://azure.archive.ubuntu.com/ubuntu noble-updates/multiverse amd64 c-n-f Metadata [644 B]
2025-09-12T09:33:11.8807999Z Get:26 http://azure.archive.ubuntu.com/ubuntu noble-backports/main amd64 Components [7076 B]
2025-09-12T09:33:11.8848564Z Get:27 http://azure.archive.ubuntu.com/ubuntu noble-backports/universe amd64 Components [19.1 kB]
2025-09-12T09:33:11.8858589Z Get:28 http://azure.archive.ubuntu.com/ubuntu noble-backports/restricted amd64 Components [216 B]
2025-09-12T09:33:11.8864918Z Get:29 http://azure.archive.ubuntu.com/ubuntu noble-backports/multiverse amd64 Components [212 B]
2025-09-12T09:33:11.9570460Z Get:30 http://azure.archive.ubuntu.com/ubuntu noble-security/main amd64 Packages [1118 kB]
2025-09-12T09:33:11.9647262Z Get:31 http://azure.archive.ubuntu.com/ubuntu noble-security/main amd64 Components [21.5 kB]
2025-09-12T09:33:11.9667159Z Get:32 http://azure.archive.ubuntu.com/ubuntu noble-security/main amd64 c-n-f Metadata [8712 B]
2025-09-12T09:33:11.9681987Z Get:33 http://azure.archive.ubuntu.com/ubuntu noble-security/universe amd64 Packages [879 kB]
2025-09-12T09:33:12.0164256Z Get:34 http://azure.archive.ubuntu.com/ubuntu noble-security/universe Translation-en [195 kB]
2025-09-12T09:33:12.0188558Z Get:35 http://azure.archive.ubuntu.com/ubuntu noble-security/universe amd64 Components [52.2 kB]
2025-09-12T09:33:12.0198588Z Get:36 http://azure.archive.ubuntu.com/ubuntu noble-security/universe amd64 c-n-f Metadata [18.0 kB]
2025-09-12T09:33:12.0206046Z Get:37 http://azure.archive.ubuntu.com/ubuntu noble-security/restricted amd64 Components [212 B]
2025-09-12T09:33:12.0211320Z Get:38 http://azure.archive.ubuntu.com/ubuntu noble-security/multiverse amd64 Components [208 B]
2025-09-12T09:33:17.1767439Z Fetched 9133 kB in 1s (7803 kB/s)
2025-09-12T09:33:17.8861539Z Reading package lists...
2025-09-12T09:33:17.9178850Z Reading package lists...
2025-09-12T09:33:18.0690079Z Building dependency tree...
2025-09-12T09:33:18.0697285Z Reading state information...
2025-09-12T09:33:18.2328896Z rsync is already the newest version (3.2.7-1ubuntu1.2).
2025-09-12T09:33:18.2329511Z sshpass is already the newest version (1.09-1).
2025-09-12T09:33:18.2330064Z jq is already the newest version (1.7.1-3ubuntu0.24.04.1).
2025-09-12T09:33:18.2330613Z The following NEW packages will be installed:
2025-09-12T09:33:18.2334457Z   dos2unix
2025-09-12T09:33:18.2497427Z 0 upgraded, 1 newly installed, 0 to remove and 18 not upgraded.
2025-09-12T09:33:18.2498027Z Need to get 501 kB of archives.
2025-09-12T09:33:18.2498473Z After this operation, 1868 kB of additional disk space will be used.
2025-09-12T09:33:18.2499050Z Get:1 file:/etc/apt/apt-mirrors.txt Mirrorlist [144 B]
2025-09-12T09:33:18.2997569Z Get:2 http://azure.archive.ubuntu.com/ubuntu noble/universe amd64 dos2unix amd64 7.5.1-1 [501 kB]
2025-09-12T09:33:18.6434750Z Fetched 501 kB in 0s (3325 kB/s)
2025-09-12T09:33:18.6696531Z Selecting previously unselected package dos2unix.
2025-09-12T09:33:18.6902683Z (Reading database ... 
2025-09-12T09:33:18.6903121Z (Reading database ... 5%
2025-09-12T09:33:18.6903501Z (Reading database ... 10%
2025-09-12T09:33:18.6903728Z (Reading database ... 15%
2025-09-12T09:33:18.6903940Z (Reading database ... 20%
2025-09-12T09:33:18.6904163Z (Reading database ... 25%
2025-09-12T09:33:18.6904375Z (Reading database ... 30%
2025-09-12T09:33:18.6904582Z (Reading database ... 35%
2025-09-12T09:33:18.6904786Z (Reading database ... 40%
2025-09-12T09:33:18.6904993Z (Reading database ... 45%
2025-09-12T09:33:18.6905198Z (Reading database ... 50%
2025-09-12T09:33:18.7827270Z (Reading database ... 55%
2025-09-12T09:33:19.0924175Z (Reading database ... 60%
2025-09-12T09:33:19.3557082Z (Reading database ... 65%
2025-09-12T09:33:19.7050084Z (Reading database ... 70%
2025-09-12T09:33:20.0188706Z (Reading database ... 75%
2025-09-12T09:33:20.5197429Z (Reading database ... 80%
2025-09-12T09:33:21.0620458Z (Reading database ... 85%
2025-09-12T09:33:21.6265067Z (Reading database ... 90%
2025-09-12T09:33:22.0229968Z (Reading database ... 95%
2025-09-12T09:33:22.0230361Z (Reading database ... 100%
2025-09-12T09:33:22.0230708Z (Reading database ... 218657 files and directories currently installed.)
2025-09-12T09:33:22.0274210Z Preparing to unpack .../dos2unix_7.5.1-1_amd64.deb ...
2025-09-12T09:33:22.0302620Z Unpacking dos2unix (7.5.1-1) ...
2025-09-12T09:33:22.2306263Z Setting up dos2unix (7.5.1-1) ...
2025-09-12T09:33:22.2332841Z Processing triggers for man-db (2.12.0-4build2) ...
2025-09-12T09:33:49.4497253Z ##[error]The operation was canceled.
2025-09-12T09:33:49.4702004Z Post job cleanup.
2025-09-12T09:33:49.5616230Z [command]/usr/bin/git version
2025-09-12T09:33:49.5651390Z git version 2.51.0
2025-09-12T09:33:49.5693570Z Temporarily overriding HOME='/home/runner/work/_temp/e9a660dd-322f-4700-b3b4-e8dadec75677' before making global git config changes
2025-09-12T09:33:49.5694748Z Adding repository directory to the temporary git global config as a safe directory
2025-09-12T09:33:49.5705874Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/weektoppick-wp-modules/weektoppick-wp-modules
2025-09-12T09:33:49.5740502Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
2025-09-12T09:33:49.5776074Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2025-09-12T09:33:49.6017069Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2025-09-12T09:33:49.6040185Z http.https://github.com/.extraheader
2025-09-12T09:33:49.6053899Z [command]/usr/bin/git config --local --unset-all http.https://github.com/.extraheader
2025-09-12T09:33:49.6094011Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2025-09-12T09:33:49.6417347Z Cleaning up orphan processes
```

### .wtp/state/ci_logs/2025-09-12T09:51:28Z_AI_Upsert_File_run-17671001581.txt
```
if (!path)    return core.setFailed('Input "path" is required.');
if (!message) return core.setFailed('Input "message" is required.');
if (path.startsWith('/')) return core.setFailed('Path musi byƒá repo-relative (bez wiodƒÖcego "/").');

const both = (content_plain !== '' && content_b64 !== '');
const none = (content_plain === '' && content_b64 === '');
if (both || none) return core.setFailed('Podaj dok≈Çadnie jedno: content_plain ALBO content_b64.');

let buf;
if (content_b64) {
  try { buf = Buffer.from(content_b64, 'base64'); if (buf.toString('base64') !== content_b64) throw 0; }
  catch { return core.setFailed('content_b64 nie jest prawid≈Çowym Base64.'); }
} else {
  buf = Buffer.from(content_plain, 'utf8');
  content_b64 = buf.toString('base64');
}

if (sha256) {
  const calc = crypto.createHash('sha256').update(buf).digest('hex');
  core.info(`sha256(user)=${sha256}`);
  core.info(`sha256(calc)=${calc}`);
  if (calc !== sha256) return core.setFailed('SHA-256 mismatch tre≈õci.');
}

const { owner, repo } = context.repo;

// read existing sha if any
let sha;
try {
  const { data } = await github.request('GET /repos/{owner}/{repo}/contents/{path}', {
    owner, repo, path, ref: branch,
  });
  sha = data?.sha || undefined;
  core.info(`Existing sha=${sha || '(new file)'}`);
} catch (e) {
  if (e.status !== 404) return core.setFailed(`getContent failed: ${e.message}`);
  core.info('File does not exist (creating).');
}

try {
  const res = await github.request('PUT /repos/{owner}/{repo}/contents/{path}', {
    owner, repo, path, message, branch, content: content_b64, sha
  });
  const commitSha = res.data.commit?.sha || '';
  await core.summary
    .addHeading('AI Upsert File')
    .addTable([
      [{data:'Field',header:true},{data:'Value',header:true}],
      ['path', path],
      ['branch', branch],
      ['commit', commitSha],
      ['verified_sha256', sha256 ? 'yes' : 'no']
    ])
    .write();
  core.info(`OK: commit ${commitSha}`);
} catch (e) {
  core.setFailed(`PUT failed: ${e.message}`);
}

2025-09-12T09:51:24.1043953Z   debug: false
2025-09-12T09:51:24.1044414Z   user-agent: actions/github-script
2025-09-12T09:51:24.1044960Z   result-encoding: json
2025-09-12T09:51:24.1045411Z   retries: 0
2025-09-12T09:51:24.1046002Z   retry-exempt-status-codes: 400,401,403,404,422
2025-09-12T09:51:24.1046963Z ##[endgroup]
2025-09-12T09:51:24.1976442Z event=workflow_dispatch
2025-09-12T09:51:24.1977367Z path=".github/workflows/wpcli-allowed-plugins.yml", branch="main"
2025-09-12T09:51:24.1978111Z has_plain=true, has_b64=false
2025-09-12T09:51:24.4839520Z Existing sha=46553719e89eb08d8d17dd1add016831a1df2618
2025-09-12T09:51:24.9172962Z ##[error]PUT failed: refusing to allow a Personal Access Token to create or update workflow `.github/workflows/wpcli-allowed-plugins.yml` without `workflow` scope

==== .wtp/state/ci_logs/2025-09-12T09:51:28Z_AI_Upsert_File_run-17671001581/upsert/3_Complete job.txt ====
Ôªø2025-09-12T09:51:24.9340238Z Cleaning up orphan processes

==== .wtp/state/ci_logs/2025-09-12T09:51:28Z_AI_Upsert_File_run-17671001581/upsert/system.txt ====
2025-09-12T09:51:16.8790000Z Job is about to start running on the hosted runner: GitHub Actions 1000002068
2025-09-12T09:51:16.8630000Z Requested labels: ubuntu-latest
2025-09-12T09:51:16.8630000Z Job defined at: BoskiDionysos/weektoppick-wp-modules/.github/workflows/ai-upsert-file.yml@refs/heads/main
2025-09-12T09:51:16.8630000Z Waiting for a runner to pick up this job...
2025-09-12T09:51:16.8780000Z Job is waiting for a hosted runner to come online.```

### .wtp/state/ci_logs/2025-09-12T11:02:50Z_WP-CLI_install_or_update_allowed_plugins_run-17672561599.txt
```
2025-09-12T11:02:42.1667981Z shell: /usr/bin/bash --noprofile --norc -e -o pipefail {0}
2025-09-12T11:02:42.1668309Z env:
2025-09-12T11:02:42.1668573Z   HOST: ***
2025-09-12T11:02:42.1668771Z   PORT: ***
2025-09-12T11:02:42.1668994Z   USER: ***
2025-09-12T11:02:42.1669195Z   PASS: ***
2025-09-12T11:02:42.1669477Z   TARGET: ***
2025-09-12T11:02:42.1669665Z ##[endgroup]
2025-09-12T11:02:44.4939781Z Uploading vendor zips...
2025-09-12T11:02:46.0887708Z sending incremental file list
2025-09-12T11:02:46.2027738Z ./
2025-09-12T11:02:46.2028216Z .gitkeep
2025-09-12T11:02:46.5763864Z 
2025-09-12T11:02:46.5764488Z sent 138 bytes  received 38 bytes  70.40 bytes/sec
2025-09-12T11:02:46.5765153Z total size is 6  speedup is 0.03
2025-09-12T11:02:46.5802299Z ##[group]Run set -euo pipefail
2025-09-12T11:02:46.5802898Z [36;1mset -euo pipefail[0m
2025-09-12T11:02:46.5803272Z [36;1msshpass -p "$PASS" ssh -p "$PORT" -o StrictHostKeyChecking=no "$USER@$HOST" "set -e[0m
2025-09-12T11:02:46.5803665Z [36;1m  cd \"$TARGET\"[0m
2025-09-12T11:02:46.5803880Z [36;1m  WP='./wp'[0m
2025-09-12T11:02:46.5804338Z [36;1m  if [ ! -x \"\$WP\" ]; then[0m
2025-09-12T11:02:46.5804632Z [36;1m    echo '::error::wp-cli not executable'; exit 1[0m
2025-09-12T11:02:46.5804911Z [36;1m  fi[0m
2025-09-12T11:02:46.5805109Z [36;1m  while IFS= read -r line; do[0m
2025-09-12T11:02:46.5805359Z [36;1m    line=\"\${line%%#*}\"[0m
2025-09-12T11:02:46.5805608Z [36;1m    line=\"\$(echo \"\$line\" | xargs)\"[0m
2025-09-12T11:02:46.5805901Z [36;1m    [ -z \"\$line\" ] && continue[0m
2025-09-12T11:02:46.5806181Z [36;1m    if echo \"\$line\" | grep -q '^zip:'; then[0m
2025-09-12T11:02:46.5806463Z [36;1m      zip_path=\"\${line#zip:}\"[0m
2025-09-12T11:02:46.5806768Z [36;1m      if [ -f \"\$zip_path\" ]; then[0m
2025-09-12T11:02:46.5807026Z [36;1m        SRC=\"\$zip_path\"[0m
2025-09-12T11:02:46.5807332Z [36;1m      elif [ -f \".wtp-vendor/\$(basename \"\$zip_path\")\" ]; then[0m
2025-09-12T11:02:46.5807695Z [36;1m        SRC=\".wtp-vendor/\$(basename \"\$zip_path\")\"[0m
2025-09-12T11:02:46.5807987Z [36;1m      else[0m
2025-09-12T11:02:46.5808251Z [36;1m        echo \"::warning::ZIP not found: \$zip_path (skipping)\"[0m
2025-09-12T11:02:46.5808564Z [36;1m        continue[0m
2025-09-12T11:02:46.5808770Z [36;1m      fi[0m
2025-09-12T11:02:46.5809019Z [36;1m      echo \">> wp plugin install \$SRC --force --activate\"[0m
2025-09-12T11:02:46.5809381Z [36;1m      php \"\$WP\" plugin install \"\$SRC\" --force --activate[0m
2025-09-12T11:02:46.5809681Z [36;1m      continue[0m
2025-09-12T11:02:46.5809879Z [36;1m    fi[0m
2025-09-12T11:02:46.5810072Z [36;1m    slug=\"\${line%@*}\"[0m
2025-09-12T11:02:46.5810300Z [36;1m    ver=\"\"[0m
2025-09-12T11:02:46.5810566Z [36;1m    if echo \"\$line\" | grep -q '@'; then ver=\"\${line#*@}\"; fi[0m
2025-09-12T11:02:46.5810871Z [36;1m    if [ -n \"\$ver\" ]; then[0m
2025-09-12T11:02:46.5811211Z [36;1m      echo \">> wp plugin install \$slug --version=\$ver --force --activate\"[0m
2025-09-12T11:02:46.5811666Z [36;1m      php \"\$WP\" plugin install \"\$slug\" --version=\"\$ver\" --force --activate[0m
2025-09-12T11:02:46.5812016Z [36;1m    else[0m
2025-09-12T11:02:46.5812284Z [36;1m      echo \">> wp plugin install/update \$slug (latest) --activate\"[0m
2025-09-12T11:02:46.5812875Z [36;1m      if php \"\$WP\" plugin is-installed \"\$slug\"; then[0m
2025-09-12T11:02:46.5813210Z [36;1m        php \"\$WP\" plugin update \"\$slug\" --activate[0m
2025-09-12T11:02:46.5813493Z [36;1m      else[0m
2025-09-12T11:02:46.5813730Z [36;1m        php \"\$WP\" plugin install \"\$slug\" --activate[0m
2025-09-12T11:02:46.5814006Z [36;1m      fi[0m
2025-09-12T11:02:46.5814187Z [36;1m    fi[0m
2025-09-12T11:02:46.5814405Z [36;1m  done < \".wtp-allowed-plugins.txt\"[0m
2025-09-12T11:02:46.5814664Z [36;1m"[0m
2025-09-12T11:02:46.5844633Z shell: /usr/bin/bash --noprofile --norc -e -o pipefail {0}
2025-09-12T11:02:46.5844950Z env:
2025-09-12T11:02:46.5845250Z   HOST: ***
2025-09-12T11:02:46.5845451Z   PORT: ***
2025-09-12T11:02:46.5845648Z   USER: ***
2025-09-12T11:02:46.5845848Z   PASS: ***
2025-09-12T11:02:46.5846141Z   TARGET: ***
2025-09-12T11:02:46.5846325Z ##[endgroup]
2025-09-12T11:02:47.9619045Z ##[error]wp-cli not executable
2025-09-12T11:02:47.9628312Z ##[error]Process completed with exit code 1.
2025-09-12T11:02:47.9713153Z Post job cleanup.
2025-09-12T11:02:48.0658896Z [command]/usr/bin/git version
2025-09-12T11:02:48.0695320Z git version 2.51.0
2025-09-12T11:02:48.0740635Z Temporarily overriding HOME='/home/runner/work/_temp/e5053d5b-1020-45af-9e2e-48bf0ffd05ed' before making global git config changes
2025-09-12T11:02:48.0741961Z Adding repository directory to the temporary git global config as a safe directory
2025-09-12T11:02:48.0747944Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/weektoppick-wp-modules/weektoppick-wp-modules
2025-09-12T11:02:48.0786178Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
2025-09-12T11:02:48.0822026Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2025-09-12T11:02:48.1053939Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2025-09-12T11:02:48.1075346Z http.https://github.com/.extraheader
2025-09-12T11:02:48.1088013Z [command]/usr/bin/git config --local --unset-all http.https://github.com/.extraheader
2025-09-12T11:02:48.1118297Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2025-09-12T11:02:48.1451329Z Cleaning up orphan processes
```

### .wtp/state/ci_logs/2025-09-12T11:08:07Z_AI_Upsert_File_run-17672691381.txt
```

if (!path)    return core.setFailed('Input "path" is required.');
if (!message) return core.setFailed('Input "message" is required.');
if (path.startsWith('/')) return core.setFailed('Path musi byƒá repo-relative (bez wiodƒÖcego "/").');

const both = (content_plain !== '' && content_b64 !== '');
const none = (content_plain === '' && content_b64 === '');
if (both || none) return core.setFailed('Podaj dok≈Çadnie jedno: content_plain ALBO content_b64.');

let buf;
if (content_b64) {
  try { buf = Buffer.from(content_b64, 'base64'); if (buf.toString('base64') !== content_b64) throw 0; }
  catch { return core.setFailed('content_b64 nie jest prawid≈Çowym Base64.'); }
} else {
  buf = Buffer.from(content_plain, 'utf8');
  content_b64 = buf.toString('base64');
}

if (sha256) {
  const calc = crypto.createHash('sha256').update(buf).digest('hex');
  core.info(`sha256(user)=${sha256}`);
  core.info(`sha256(calc)=${calc}`);
  if (calc !== sha256) return core.setFailed('SHA-256 mismatch tre≈õci.');
}

const { owner, repo } = context.repo;

// read existing sha if any
let sha;
try {
  const { data } = await github.request('GET /repos/{owner}/{repo}/contents/{path}', {
    owner, repo, path, ref: branch,
  });
  sha = data?.sha || undefined;
  core.info(`Existing sha=${sha || '(new file)'}`);
} catch (e) {
  if (e.status !== 404) return core.setFailed(`getContent failed: ${e.message}`);
  core.info('File does not exist (creating).');
}

try {
  const res = await github.request('PUT /repos/{owner}/{repo}/contents/{path}', {
    owner, repo, path, message, branch, content: content_b64, sha
  });
  const commitSha = res.data.commit?.sha || '';
  await core.summary
    .addHeading('AI Upsert File')
    .addTable([
      [{data:'Field',header:true},{data:'Value',header:true}],
      ['path', path],
      ['branch', branch],
      ['commit', commitSha],
      ['verified_sha256', sha256 ? 'yes' : 'no']
    ])
    .write();
  core.info(`OK: commit ${commitSha}`);
} catch (e) {
  core.setFailed(`PUT failed: ${e.message}`);
}

2025-09-12T11:08:05.2602729Z   debug: false
2025-09-12T11:08:05.2603390Z   user-agent: actions/github-script
2025-09-12T11:08:05.2604214Z   result-encoding: json
2025-09-12T11:08:05.2604751Z   retries: 0
2025-09-12T11:08:05.2605183Z   retry-exempt-status-codes: 400,401,403,404,422
2025-09-12T11:08:05.2606083Z ##[endgroup]
2025-09-12T11:08:05.3728667Z event=workflow_dispatch
2025-09-12T11:08:05.3729856Z path=".github/workflows/wpcli-allowed-plugins.yml", branch="main"
2025-09-12T11:08:05.3731032Z has_plain=false, has_b64=true
2025-09-12T11:08:05.3768390Z ##[error]content_b64 nie jest prawid≈Çowym Base64.

==== .wtp/state/ci_logs/2025-09-12T11:08:07Z_AI_Upsert_File_run-17672691381/upsert/3_Complete job.txt ====
Ôªø2025-09-12T11:08:05.3884492Z Cleaning up orphan processes

==== .wtp/state/ci_logs/2025-09-12T11:08:07Z_AI_Upsert_File_run-17672691381/upsert/system.txt ====
2025-09-12T11:08:01.8250000Z Job is about to start running on the hosted runner: GitHub Actions 1000002096
2025-09-12T11:08:01.8240000Z Job is waiting for a hosted runner to come online.
2025-09-12T11:08:01.8130000Z Requested labels: ubuntu-latest
2025-09-12T11:08:01.8130000Z Job defined at: BoskiDionysos/weektoppick-wp-modules/.github/workflows/ai-upsert-file.yml@refs/heads/main
2025-09-12T11:08:01.8130000Z Waiting for a runner to pick up this job...```

### .wtp/state/ci_logs/2025-09-12T11:21:23Z_WP-CLI_install_or_update_allowed_plugins_run-17672989857.txt
```
2025-09-12T11:21:13.4205984Z shell: /usr/bin/bash --noprofile --norc -e -o pipefail {0}
2025-09-12T11:21:13.4206314Z env:
2025-09-12T11:21:13.4206578Z   HOST: ***
2025-09-12T11:21:13.4206776Z   PORT: ***
2025-09-12T11:21:13.4206992Z   USER: ***
2025-09-12T11:21:13.4207195Z   PASS: ***
2025-09-12T11:21:13.4207482Z   TARGET: ***
2025-09-12T11:21:13.4207696Z ##[endgroup]
2025-09-12T11:21:16.2353232Z Uploading vendor zips...
2025-09-12T11:21:18.2037798Z sending incremental file list
2025-09-12T11:21:18.3452278Z ./
2025-09-12T11:21:18.3452792Z .gitkeep
2025-09-12T11:21:18.7985602Z 
2025-09-12T11:21:18.7986896Z sent 122 bytes  received 44 bytes  66.40 bytes/sec
2025-09-12T11:21:18.7987593Z total size is 6  speedup is 0.04
2025-09-12T11:21:18.8037636Z ##[group]Run set -euo pipefail
2025-09-12T11:21:18.8038211Z [36;1mset -euo pipefail[0m
2025-09-12T11:21:18.8038879Z [36;1msshpass -p "$PASS" ssh -p "$PORT" -o StrictHostKeyChecking=no "$USER@$HOST" "set -e[0m
2025-09-12T11:21:18.8039518Z [36;1m  cd \"$TARGET\"[0m
2025-09-12T11:21:18.8039874Z [36;1m  WP='./wp'[0m
2025-09-12T11:21:18.8040712Z [36;1m  if [ ! -x \"\$WP\" ]; then[0m
2025-09-12T11:21:18.8041210Z [36;1m    echo '::error::wp-cli not executable'; exit 1[0m
2025-09-12T11:21:18.8041687Z [36;1m  fi[0m
2025-09-12T11:21:18.8042029Z [36;1m  while IFS= read -r line; do[0m
2025-09-12T11:21:18.8042460Z [36;1m    line=\"\${line%%#*}\"[0m
2025-09-12T11:21:18.8042891Z [36;1m    line=\"\$(echo \"\$line\" | xargs)\"[0m
2025-09-12T11:21:18.8043374Z [36;1m    [ -z \"\$line\" ] && continue[0m
2025-09-12T11:21:18.8043860Z [36;1m    if echo \"\$line\" | grep -q '^zip:'; then[0m
2025-09-12T11:21:18.8044356Z [36;1m      zip_path=\"\${line#zip:}\"[0m
2025-09-12T11:21:18.8044853Z [36;1m      if [ -f \"\$zip_path\" ]; then[0m
2025-09-12T11:21:18.8045298Z [36;1m        SRC=\"\$zip_path\"[0m
2025-09-12T11:21:18.8045829Z [36;1m      elif [ -f \".wtp-vendor/\$(basename \"\$zip_path\")\" ]; then[0m
2025-09-12T11:21:18.8046446Z [36;1m        SRC=\".wtp-vendor/\$(basename \"\$zip_path\")\"[0m
2025-09-12T11:21:18.8046940Z [36;1m      else[0m
2025-09-12T11:21:18.8047381Z [36;1m        echo \"::warning::ZIP not found: \$zip_path (skipping)\"[0m
2025-09-12T11:21:18.8047911Z [36;1m        continue[0m
2025-09-12T11:21:18.8048256Z [36;1m      fi[0m
2025-09-12T11:21:18.8048684Z [36;1m      echo \">> wp plugin install \$SRC --force --activate\"[0m
2025-09-12T11:21:18.8049340Z [36;1m      php \"\$WP\" plugin install \"\$SRC\" --force --activate[0m
2025-09-12T11:21:18.8049887Z [36;1m      continue[0m
2025-09-12T11:21:18.8050242Z [36;1m    fi[0m
2025-09-12T11:21:18.8050728Z [36;1m    slug=\"\${line%@*}\"[0m
2025-09-12T11:21:18.8051122Z [36;1m    ver=\"\"[0m
2025-09-12T11:21:18.8051591Z [36;1m    if echo \"\$line\" | grep -q '@'; then ver=\"\${line#*@}\"; fi[0m
2025-09-12T11:21:18.8052138Z [36;1m    if [ -n \"\$ver\" ]; then[0m
2025-09-12T11:21:18.8052746Z [36;1m      echo \">> wp plugin install \$slug --version=\$ver --force --activate\"[0m
2025-09-12T11:21:18.8053541Z [36;1m      php \"\$WP\" plugin install \"\$slug\" --version=\"\$ver\" --force --activate[0m
2025-09-12T11:21:18.8054139Z [36;1m    else[0m
2025-09-12T11:21:18.8054591Z [36;1m      echo \">> wp plugin install/update \$slug (latest) --activate\"[0m
2025-09-12T11:21:18.8055217Z [36;1m      if php \"\$WP\" plugin is-installed \"\$slug\"; then[0m
2025-09-12T11:21:18.8055778Z [36;1m        php \"\$WP\" plugin update \"\$slug\" --activate[0m
2025-09-12T11:21:18.8056228Z [36;1m      else[0m
2025-09-12T11:21:18.8056631Z [36;1m        php \"\$WP\" plugin install \"\$slug\" --activate[0m
2025-09-12T11:21:18.8057102Z [36;1m      fi[0m
2025-09-12T11:21:18.8057386Z [36;1m    fi[0m
2025-09-12T11:21:18.8057751Z [36;1m  done < \".wtp-allowed-plugins.txt\"[0m
2025-09-12T11:21:18.8058180Z [36;1m"[0m
2025-09-12T11:21:18.8099175Z shell: /usr/bin/bash --noprofile --norc -e -o pipefail {0}
2025-09-12T11:21:18.8099696Z env:
2025-09-12T11:21:18.8100122Z   HOST: ***
2025-09-12T11:21:18.8100701Z   PORT: ***
2025-09-12T11:21:18.8101017Z   USER: ***
2025-09-12T11:21:18.8101361Z   PASS: ***
2025-09-12T11:21:18.8101838Z   TARGET: ***
2025-09-12T11:21:18.8102158Z ##[endgroup]
2025-09-12T11:21:20.4362584Z ##[error]wp-cli not executable
2025-09-12T11:21:20.4371559Z ##[error]Process completed with exit code 1.
2025-09-12T11:21:20.4454942Z Post job cleanup.
2025-09-12T11:21:20.5383368Z [command]/usr/bin/git version
2025-09-12T11:21:20.5418714Z git version 2.51.0
2025-09-12T11:21:20.5462689Z Temporarily overriding HOME='/home/runner/work/_temp/06740701-ed55-4092-abb8-48acebe0258c' before making global git config changes
2025-09-12T11:21:20.5463973Z Adding repository directory to the temporary git global config as a safe directory
2025-09-12T11:21:20.5469420Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/weektoppick-wp-modules/weektoppick-wp-modules
2025-09-12T11:21:20.5504806Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
2025-09-12T11:21:20.5536824Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2025-09-12T11:21:20.5759410Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2025-09-12T11:21:20.5779841Z http.https://github.com/.extraheader
2025-09-12T11:21:20.5792172Z [command]/usr/bin/git config --local --unset-all http.https://github.com/.extraheader
2025-09-12T11:21:20.5821437Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2025-09-12T11:21:20.6137086Z Cleaning up orphan processes
```

### .wtp/state/ci_logs/2025-09-12T11:27:29Z_WP-CLI_install_or_update_allowed_plugins_run-17673125163.txt
```
2025-09-12T11:27:23.5909823Z   USER: ***
2025-09-12T11:27:23.5910018Z   PASS: ***
2025-09-12T11:27:23.5910298Z   TARGET: ***
2025-09-12T11:27:23.5910486Z ##[endgroup]
2025-09-12T11:27:25.4332553Z Uploading vendor zips...
2025-09-12T11:27:26.8500667Z sending incremental file list
2025-09-12T11:27:26.9437689Z ./
2025-09-12T11:27:26.9438323Z .gitkeep
2025-09-12T11:27:27.2574964Z 
2025-09-12T11:27:27.2575540Z sent 124 bytes  received 44 bytes  67.20 bytes/sec
2025-09-12T11:27:27.2576007Z total size is 6  speedup is 0.04
2025-09-12T11:27:27.2612478Z ##[group]Run set -euo pipefail
2025-09-12T11:27:27.2612830Z [36;1mset -euo pipefail[0m
2025-09-12T11:27:27.2613208Z [36;1msshpass -p "$PASS" ssh -p "$PORT" -o StrictHostKeyChecking=no "$USER@$HOST" "set -e[0m
2025-09-12T11:27:27.2613785Z [36;1m  cd \"$TARGET\"[0m
2025-09-12T11:27:27.2614095Z [36;1m  # zawsze u≈ºywamy php ./wp ‚Äì nie polegamy na exec bit[0m
2025-09-12T11:27:27.2614417Z [36;1m  WP='php ./wp'[0m
2025-09-12T11:27:27.2614621Z [36;1m  # sanity[0m
2025-09-12T11:27:27.2614941Z [36;1m  $WP --info >/dev/null 2>&1 || { echo '::error::wp-cli not working (php ./wp)'; exit 1; }[0m
2025-09-12T11:27:27.2615306Z [36;1m[0m
2025-09-12T11:27:27.2615496Z [36;1m  while IFS= read -r line; do[0m
2025-09-12T11:27:27.2615739Z [36;1m    line='\${line%%#*}'[0m
2025-09-12T11:27:27.2615979Z [36;1m    line=\$(echo \"\$line\" | xargs)[0m
2025-09-12T11:27:27.2616246Z [36;1m    [ -z \"\$line\" ] && continue[0m
2025-09-12T11:27:27.2616486Z [36;1m[0m
2025-09-12T11:27:27.2616722Z [36;1m    if echo \"\$line\" | grep -q '^zip:'; then[0m
2025-09-12T11:27:27.2617000Z [36;1m      zip_path=\"\${line#zip:}\"[0m
2025-09-12T11:27:27.2617266Z [36;1m      if [ -f \"\$zip_path\" ]; then[0m
2025-09-12T11:27:27.2617512Z [36;1m        SRC=\"\$zip_path\"[0m
2025-09-12T11:27:27.2617810Z [36;1m      elif [ -f \".wtp-vendor/\$(basename \"\$zip_path\")\" ]; then[0m
2025-09-12T11:27:27.2618163Z [36;1m        SRC=\".wtp-vendor/\$(basename \"\$zip_path\")\"[0m
2025-09-12T11:27:27.2618438Z [36;1m      else[0m
2025-09-12T11:27:27.2618695Z [36;1m        echo \"::warning::ZIP not found: \$zip_path (skipping)\"[0m
2025-09-12T11:27:27.2618999Z [36;1m        continue[0m
2025-09-12T11:27:27.2619198Z [36;1m      fi[0m
2025-09-12T11:27:27.2619443Z [36;1m      echo \">> wp plugin install \$SRC --force --activate\"[0m
2025-09-12T11:27:27.2619783Z [36;1m      \$WP plugin install \"\$SRC\" --force --activate[0m
2025-09-12T11:27:27.2620069Z [36;1m      continue[0m
2025-09-12T11:27:27.2620267Z [36;1m    fi[0m
2025-09-12T11:27:27.2620434Z [36;1m[0m
2025-09-12T11:27:27.2620607Z [36;1m    slug=\"\${line%@*}\"[0m
2025-09-12T11:27:27.2620826Z [36;1m    ver=\"\"[0m
2025-09-12T11:27:27.2621086Z [36;1m    if echo \"\$line\" | grep -q '@'; then ver=\"\${line#*@}\"; fi[0m
2025-09-12T11:27:27.2621370Z [36;1m[0m
2025-09-12T11:27:27.2621547Z [36;1m    if [ -n \"\$ver\" ]; then[0m
2025-09-12T11:27:27.2621878Z [36;1m      echo \">> wp plugin install \$slug --version=\$ver --force --activate\"[0m
2025-09-12T11:27:27.2622443Z [36;1m      \$WP plugin install \"\$slug\" --version=\"\$ver\" --force --activate[0m
2025-09-12T11:27:27.2622768Z [36;1m    else[0m
2025-09-12T11:27:27.2623038Z [36;1m      echo \">> wp plugin install/update \$slug (latest) --activate\"[0m
2025-09-12T11:27:27.2623390Z [36;1m      if \$WP plugin is-installed \"\$slug\"; then[0m
2025-09-12T11:27:27.2623696Z [36;1m        \$WP plugin update \"\$slug\" --activate[0m
2025-09-12T11:27:27.2623951Z [36;1m      else[0m
2025-09-12T11:27:27.2624177Z [36;1m        \$WP plugin install \"\$slug\" --activate[0m
2025-09-12T11:27:27.2624437Z [36;1m      fi[0m
2025-09-12T11:27:27.2624616Z [36;1m    fi[0m
2025-09-12T11:27:27.2624829Z [36;1m  done < \".wtp-allowed-plugins.txt\"[0m
2025-09-12T11:27:27.2625085Z [36;1m"[0m
2025-09-12T11:27:27.2654711Z shell: /usr/bin/bash --noprofile --norc -e -o pipefail {0}
2025-09-12T11:27:27.2655016Z env:
2025-09-12T11:27:27.2655298Z   HOST: ***
2025-09-12T11:27:27.2655491Z   PORT: ***
2025-09-12T11:27:27.2655668Z   USER: ***
2025-09-12T11:27:27.2655883Z   PASS: ***
2025-09-12T11:27:27.2656174Z   TARGET: ***
2025-09-12T11:27:27.2656364Z ##[endgroup]
2025-09-12T11:27:27.2763717Z /home/runner/work/_temp/273eb90d-26de-47b5-8a8d-74a9a38f89be.sh: line 2: WP: unbound variable
2025-09-12T11:27:27.2774244Z ##[error]Process completed with exit code 1.
2025-09-12T11:27:27.2861586Z Post job cleanup.
2025-09-12T11:27:27.3771261Z [command]/usr/bin/git version
2025-09-12T11:27:27.3806426Z git version 2.51.0
2025-09-12T11:27:27.3847832Z Temporarily overriding HOME='/home/runner/work/_temp/4d68b205-1aa4-43e2-a67e-14ba56fb9c57' before making global git config changes
2025-09-12T11:27:27.3848965Z Adding repository directory to the temporary git global config as a safe directory
2025-09-12T11:27:27.3853782Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/weektoppick-wp-modules/weektoppick-wp-modules
2025-09-12T11:27:27.3887563Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
2025-09-12T11:27:27.3918483Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2025-09-12T11:27:27.4134537Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2025-09-12T11:27:27.4153717Z http.https://github.com/.extraheader
2025-09-12T11:27:27.4165699Z [command]/usr/bin/git config --local --unset-all http.https://github.com/.extraheader
2025-09-12T11:27:27.4195189Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2025-09-12T11:27:27.4508422Z Cleaning up orphan processes
```

