{
    "plugins/litespeed-cache/tpl/inc/check_cache_disabled.php": "<?php\n/**\n * LiteSpeed Cache Warning Notice\n *\n * Displays warnings if LiteSpeed Cache functionality is unavailable due to server or plugin configuration issues.\n *\n * @package LiteSpeed\n * @since 1.0.0\n */\n\nnamespace LiteSpeed;\n\ndefined( 'WPINC' ) || exit;\n\n$reasons = array();\n\nif ( ! defined( 'LITESPEED_ALLOWED' ) ) {\n    if ( defined( 'LITESPEED_SERVER_TYPE' ) && LITESPEED_SERVER_TYPE === 'NONE' ) {\n        $reasons[] = array(\n            'title' => esc_html__( 'To use the caching functions you must have a LiteSpeed web server or be using QUIC.cloud CDN.', 'litespeed-cache' ),\n            'link'  => 'https://docs.litespeedtech.com/lscache/lscwp/faq/#why-do-the-cache-features-require-a-litespeed-server',\n        );\n    } else {\n        $reasons[] = array(\n            'title' => esc_html__( 'Please enable the LSCache Module at the server level, or ask your hosting provider.', 'litespeed-cache' ),\n            'link'  => 'https://docs.litespeedtech.com/lscache/lscwp/#server-level-prerequisites',\n        );\n    }\n} elseif ( ! defined( 'LITESPEED_ON' ) ) {\n    $reasons[] = array(\n        'title' => esc_html__( 'Please enable LiteSpeed Cache in the plugin settings.', 'litespeed-cache' ),\n        'link'  => 'https://docs.litespeedtech.com/lscache/lscwp/cache/#enable-cache',\n    );\n}\n\nif ( $reasons ) : ?>\n    <div class=\"litespeed-callout notice notice-error inline\">\n        <h4><?php esc_html_e( 'WARNING', 'litespeed-cache' ); ?></h4>\n        <p>\n            <?php esc_html_e( 'LSCache caching functions on this page are currently unavailable!', 'litespeed-cache' ); ?>\n        </p>\n        <ul class=\"litespeed-list\">\n            <?php foreach ( $reasons as $reason ) : ?>\n                <li>\n                    <?php echo esc_html( $reason['title'] ); ?>\n                    <a href=\"<?php echo esc_url( $reason['link'] ); ?>\" target=\"_blank\" class=\"litespeed-learn-more\"><?php esc_html_e( 'Learn More', 'litespeed-cache' ); ?></a>\n                </li>\n            <?php endforeach; ?>\n        </ul>\n    </div>\n<?php endif; ?>\n",
    "plugins/litespeed-cache/tpl/inc/show_display_installed.php": "<?php\n/**\n * LiteSpeed Cache Installation Notice\n *\n * Displays a notice informing users that the LiteSpeed Cache plugin was installed by the server admin.\n *\n * @package LiteSpeed\n * @since 1.0.0\n */\n\nnamespace LiteSpeed;\n\ndefined( 'WPINC' ) || exit;\n\n$buf  = sprintf(\n\t'<h3>%s</h3>\n\t<p>%s</p>\n\t<p>%s</p>\n\t<p>%s</p>\n\t<p>%s</p>\n\t<p>%s</p>\n\t<ul>\n\t\t<li>%s</li>\n\t\t<li>%s</li>\n\t</ul>',\n\tesc_html__( 'LiteSpeed Cache plugin is installed!', 'litespeed-cache' ),\n\tesc_html__( 'This message indicates that the plugin was installed by the server admin.', 'litespeed-cache' ),\n\tesc_html__( 'The LiteSpeed Cache plugin is used to cache pages - a simple way to improve the performance of the site.', 'litespeed-cache' ),\n\tesc_html__( 'However, there is no way of knowing all the possible customizations that were implemented.', 'litespeed-cache' ),\n\tesc_html__( 'For that reason, please test the site to make sure everything still functions properly.', 'litespeed-cache' ),\n\tesc_html__( 'Examples of test cases include:', 'litespeed-cache' ),\n\tesc_html__( 'Visit the site while logged out.', 'litespeed-cache' ),\n\tesc_html__( 'Create a post, make sure the front page is accurate.', 'litespeed-cache' )\n);\n$buf .= sprintf(\n\t/* translators: %s: Link tags */\n\tesc_html__( 'If there are any questions, the team is always happy to answer any questions on the %ssupport forum%s.', 'litespeed-cache' ),\n\t'<a href=\"https://wordpress.org/support/plugin/litespeed-cache\" rel=\"noopener noreferrer\" target=\"_blank\">',\n\t'</a>'\n);\n$buf .= '<p>' . esc_html__( 'If you would rather not move at litespeed, you can deactivate this plugin.', 'litespeed-cache' ) . '</p>';\n\nself::add_notice( self::NOTICE_BLUE . ' lscwp-whm-notice', $buf );\n",
    "plugins/litespeed-cache/tpl/inc/show_rule_conflict.php": "<?php\n/**\n * LiteSpeed Cache Unexpected Cache Rule Notice\n *\n * Displays a warning notice about conflicting cache rules in .htaccess that may cause stale content.\n *\n * @package LiteSpeed\n * @since 1.0.0\n */\n\nnamespace LiteSpeed;\n\ndefined('WPINC') || exit();\n\n$err = sprintf(\n\tesc_html__(\n\t\t'Unexpected cache rule %2$s found in %1$s file. This rule may cause visitors to see old versions of pages due to the browser caching HTML pages. If you are sure that HTML pages are not being browser cached, this message can be dismissed. (%3$sLearn More%4$s)',\n\t\t'litespeed-cache'\n\t),\n\t'.htaccess',\n\t'<code>ExpiresDefault</code>',\n\t'<a href=\"https://docs.litespeedtech.com/lscache/lscwp/troubleshoot/#browser-displays-stale-content\" target=\"_blank\">',\n\t'</a>'\n);\n\n// Other plugin left cache expired rules in .htaccess which will cause conflicts\necho wp_kses_post( self::build_notice(self::NOTICE_YELLOW . ' lscwp-notice-ruleconflict', $err) );\n",
    "plugins/litespeed-cache/tpl/inc/in_upgrading.php": "<?php\n/**\n * LiteSpeed Cache Upgrade Notice\n *\n * Displays a notice informing the user that the LiteSpeed Cache plugin has been upgraded and a page refresh is needed to complete the configuration data upgrade.\n *\n * @package LiteSpeed\n * @since 1.0.0\n */\n\nnamespace LiteSpeed;\n\ndefined( 'WPINC' ) || exit;\n\n$message = esc_html__( 'LiteSpeed cache plugin upgraded. Please refresh the page to complete the configuration data upgrade.', 'litespeed-cache' );\n\necho wp_kses_post( self::build_notice( self::NOTICE_BLUE, $message ) );\n",
    "plugins/litespeed-cache/tpl/inc/modal.deactivation.php": "<?php\n/**\n * LiteSpeed Cache Deactivation Modal\n *\n * Renders the deactivation modal interface for LiteSpeed Cache, allowing users to send reason of deactivation.\n *\n * @package LiteSpeed\n * @since 7.3\n */\n\nnamespace LiteSpeed;\n\ndefined( 'WPINC' ) || exit;\n\n// Modal data\n$_title = esc_html__('Deactivate LiteSpeed Cache', 'litespeed');\n$_id    = 'litespeed-modal-deactivate';\n\n$reasons = array(\n\tarray(\n\t\t'value' => 'Temporary',\n\t\t'text' => esc_html__('The deactivation is temporary', 'litespeed-cache'),\n\t\t'id' => 'temp',\n\t\t'selected' => true,\n\t),\n\tarray(\n\t\t'value' => 'Performance worse',\n\t\t'text' => esc_html__('Site performance is worse', 'litespeed-cache'),\n\t\t'id' => 'performance',\n\t),\n\tarray(\n\t\t'value' => 'Plugin complicated',\n\t\t'text' => esc_html__('Plugin is too complicated', 'litespeed-cache'),\n\t\t'id' => 'complicated',\n\t),\n\tarray(\n\t\t'value' => 'Other',\n\t\t'text' => esc_html__('Other', 'litespeed-cache'),\n\t\t'id' => 'other',\n\t),\n);\n?>\n<div style=\"display: none\">\n    <div id=\"litespeed-deactivation\" class=\"iziModal\">\n        <div id=\"litespeed-modal-deactivate\">\n            <form id=\"litespeed-deactivation-form\" method=\"post\">\n                <p><?php esc_attr_e('Why are you deactivating the plugin?', 'litespeed-cache'); ?></p>\n                <div class=\"deactivate-reason-wrapper\">\n                    <?php foreach ($reasons as $reason) : ?>\n                    <label for=\"litespeed-deactivate-reason-<?php esc_attr_e( $reason['id'] ); ?>\">\n                        <input type=\"radio\" id=\"litespeed-deactivate-reason-<?php esc_attr_e( $reason['id'] ); ?>\" value=\"<?php esc_attr_e( $reason['value'] ); ?>\"\n                            <?php isset($reason['selected']) && $reason['selected'] ? ' checked=\"checked\"' : ''; ?> name=\"litespeed-reason\" />\n                        <?php esc_html_e( $reason['text'] ); ?>\n                    </label>\n                    <?php endforeach; ?>\n                </div>\n                <div class=\"deactivate-clear-settings-wrapper\">\n                    <i style=\"font-size: 0.9em;\">\n                        <?php\n                            esc_html_e('On uninstall, all plugin settings will be deleted.', 'litespeed-cache');\n                        ?>\n                    </i>\n                    <br />\n                    <i style=\"font-size: 0.9em;\">\n\n                        <?php\n                            printf(\n                                esc_html__('If you have used Image Optimization, please %sDestroy All Optimization Data%s first. NOTE: this does not remove your optimized images.', 'litespeed-cache'),\n                                '<a href=\"admin.php?page=litespeed-img_optm#litespeed-imageopt-destroy\" target=\"_blank\">',\n                                '</a>'\n                            );\n                        ?>\n                    </i>\n                </div>\n                <div class=\"deactivate-actions\">\n                    <input type=\"submit\" id=\"litespeed-deactivation-form-submit\" class=\"button button-primary\" value=\"<?php esc_attr_e('Deactivate', 'litespeed-cache'); ?>\" title=\"<?php esc_attr_e('Deactivate plugin', 'litespeed-cache'); ?>\" />\n                    <input type=\"button\" id=\"litespeed-deactivation-form-cancel\" class=\"button litespeed-btn-warning\" value=\"<?php esc_attr_e('Cancel', 'litespeed-cache'); ?>\" title=\"<?php esc_attr_e('Close popup', 'litespeed-cache'); ?>\" />\n                </div>\n            </form>\n        </div>\n    </div>\n</div>\n<script>\n    (function ($) {\n    'use strict';\n        jQuery(document).ready(function () {\n            var lscId = '<?php echo home_url(); // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?>';\n            var modalesc_attr_element = $('#litespeed-deactivation');\n            var deactivateesc_attr_element = $('#deactivate-litespeed-cache');\n\n            if (deactivateesc_attr_element.length > 0 && modalesc_attr_element.length > 0) {\n                // Variables\n                var modal_formElement = $('#litespeed-deactivation-form');\n\n                deactivateesc_attr_element.on('click', function (e) {\n                    e.preventDefault();\n                    e.stopImmediatePropagation();\n                    modal_formElement.attr('action', decodeURI($(this).attr('href')));\n                    modalesc_attr_element.iziModal({\n                        radius: '.5rem',\n                        width: 550,\n                        autoOpen: true,\n                    });\n                });\n\n                $(document).on('submit', '#litespeed-deactivation-form', function (e) {\n                    e.preventDefault();\n                    $('#litespeed-deactivation-form-submit').attr('disabled', true);\n                    var container = $('#litespeed-deactivation-form');\n\n                    // Save selected data\n                    var data = {\n                        id: lscId,\n                        siteLink: window.location.hostname,\n                        reason: $(container).find('[name=litespeed-reason]:checked').val()\n                    };\n\n                    $.ajax({\n                        url: 'https://wpapi.quic.cloud/survey',\n                        dataType: 'json',\n                        method: 'POST',\n                        cache: false,\n                        data: data,\n                        success: function (data) {\n                            console.log('QC data sent.');\n                        },\n                        error: function (xhr, error) {\n                            console.log('Error sending data to QC.');\n                        },\n                    });\n\n                    $('#litespeed-deactivation-form')[0].submit();\n                });\n                $(document).on('click', '#litespeed-deactivation-form-cancel', function (e) {\n                    modalesc_attr_element.iziModal('close');\n                });\n            }\n        });\n    })(jQuery);\n</script>\n",
    "plugins/litespeed-cache/tpl/inc/admin_footer.php": "<?php\n/**\n * LiteSpeed Cache Admin Footer\n *\n * Customizes the admin footer text for LiteSpeed Cache with links to rate, documentation, support forum, and community.\n *\n * @package LiteSpeed\n * @since 1.0.0\n */\n\nnamespace LiteSpeed;\n\ndefined( 'WPINC' ) || exit;\n\n$stars = '<span class=\"wporg-ratings rating-stars\"><span class=\"dashicons dashicons-star-filled\" style=\"color:#ffb900 !important;\"></span><span class=\"dashicons dashicons-star-filled\" style=\"color:#ffb900 !important;\"></span><span class=\"dashicons dashicons-star-filled\" style=\"color:#ffb900 !important;\"></span><span class=\"dashicons dashicons-star-filled\" style=\"color:#ffb900 !important;\"></span><span class=\"dashicons dashicons-star-filled\" style=\"color:#ffb900 !important;\"></span></span>';\n\n$rate_us = '<a href=\"https://wordpress.org/support/plugin/litespeed-cache/reviews/?filter=5#new-post\" rel=\"noopener noreferrer\" target=\"_blank\">' . sprintf( esc_html__( 'Rate %1$s on %2$s', 'litespeed-cache' ), '<strong>' . esc_html__( 'LiteSpeed Cache', 'litespeed-cache' ) . $stars . '</strong>', 'WordPress.org' ) . '</a>';\n\n$wiki = '<a href=\"https://docs.litespeedtech.com/lscache/lscwp/\" target=\"_blank\">' . esc_html__( 'Read LiteSpeed Documentation', 'litespeed-cache' ) . '</a>';\n\n$forum = '<a href=\"https://wordpress.org/support/plugin/litespeed-cache\" target=\"_blank\">' . esc_html__( 'Visit LSCWP support forum', 'litespeed-cache' ) . '</a>';\n\n$community = '<a href=\"https://litespeedtech.com/slack\" target=\"_blank\">' . esc_html__( 'Join LiteSpeed Slack community', 'litespeed-cache' ) . '</a>';\n\n// Change the footer text\nif ( ! is_multisite() || is_network_admin() ) {\n\t$footer_text = $rate_us . ' | ' . $wiki . ' | ' . $forum . ' | ' . $community;\n} else {\n\t$footer_text = $wiki . ' | ' . $forum . ' | ' . $community;\n}\n",
    "plugins/litespeed-cache/tpl/inc/show_error_cookie.php": "<?php\n/**\n * LiteSpeed Cache Database Login Cookie Notice\n *\n * Displays a notice about mismatched login cookies for LiteSpeed Cache.\n *\n * @package LiteSpeed\n * @since 1.0.0\n */\n\nnamespace LiteSpeed;\n\ndefined('WPINC') || exit();\n\n$err =\n\tesc_html__('NOTICE: Database login cookie did not match your login cookie.', 'litespeed-cache') .\n\t' ' .\n\tesc_html__('If the login cookie was recently changed in the settings, please log out and back in.', 'litespeed-cache') .\n\t' ' .\n\tsprintf(\n\t\tesc_html__('If not, please verify the setting in the %sAdvanced tab%s.', 'litespeed-cache'),\n\t\t\"<a href='\" . esc_url(admin_url('admin.php?page=litespeed-cache#advanced')) . '\">',\n\t\t'</a>'\n\t);\n\nif (LITESPEED_SERVER_TYPE === 'LITESPEED_SERVER_OLS') {\n\t$err .= ' ' . esc_html__('If using OpenLiteSpeed, the server must be restarted once for the changes to take effect.', 'litespeed-cache');\n}\n\nself::add_notice(self::NOTICE_YELLOW, $err);\n",
    "plugins/litespeed-cache/tpl/inc/check_if_network_disable_all.php": "<?php\n/**\n * LiteSpeed Cache Network Primary Site Configuration Warning\n *\n * Displays a warning notice on subsite admin pages when the network admin has enforced primary site configurations.\n *\n * @package LiteSpeed\n * @since 1.0.0\n */\n\nnamespace LiteSpeed;\n\ndefined( 'WPINC' ) || exit;\n\nif ( ! is_multisite() ) {\n    return;\n}\n\nif ( get_current_blog_id() === BLOG_ID_CURRENT_SITE ) {\n    return;\n}\n\nif ( ! $this->network_conf( Base::NETWORK_O_USE_PRIMARY ) ) {\n    return;\n}\n?>\n<div class=\"litespeed-callout notice notice-error inline\">\n    <h4><?php esc_html_e( 'WARNING', 'litespeed-cache' ); ?></h4>\n    <p>\n        <?php esc_html_e( 'The network admin selected use primary site configs for all subsites.', 'litespeed-cache' ); ?>\n        <?php esc_html_e( 'The following options are selected, but are not editable in this settings page.', 'litespeed-cache' ); ?>\n    </p>\n</div>",
    "plugins/litespeed-cache/tpl/esi.tpl.php": "<?php\n/**\n * LiteSpeed Cache ESI Block Loader\n *\n * Loads the ESI block for LiteSpeed Cache.\n *\n * @package LiteSpeed\n * @since 1.0.0\n */\n\ndefined( 'WPINC' ) || exit;\n\n\\LiteSpeed\\ESI::cls()->load_esi_block();\n",
    "plugins/litespeed-cache/tpl/page_optm/settings_media_exc.tpl.php": "<?php\n/**\n * LiteSpeed Cache Media Excludes Settings\n *\n * Renders the media excludes settings interface for LiteSpeed Cache, allowing configuration of exclusions for lazy loading and LQIP.\n *\n * @package LiteSpeed\n * @since 1.0.0\n */\n\nnamespace LiteSpeed;\n\ndefined( 'WPINC' ) || exit;\n?>\n\n<h3 class=\"litespeed-title-short\">\n\t<?php esc_html_e( 'Media Excludes', 'litespeed-cache' ); ?>\n\t<?php Doc::learn_more( 'https://docs.litespeedtech.com/lscache/lscwp/pageopt/#media-excludes-tab' ); ?>\n</h3>\n\n<table class=\"wp-list-table striped litespeed-table\"><tbody>\n\n\t<tr>\n\t\t<th>\n\t\t\t<?php $option_id = Base::O_MEDIA_LAZY_EXC; ?>\n\t\t\t<?php $this->title( $option_id ); ?>\n\t\t</th>\n\t\t<td>\n\t\t\t<?php $this->build_textarea( $option_id ); ?>\n\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t<?php esc_html_e( 'Listed images will not be lazy loaded.', 'litespeed-cache' ); ?>\n\t\t\t\t<?php Doc::full_or_partial_url(); ?>\n\t\t\t\t<?php Doc::one_per_line(); ?>\n\t\t\t\t<br /><?php esc_html_e( 'Useful for above-the-fold images causing CLS (a Core Web Vitals metric).', 'litespeed-cache' ); ?>\n\t\t\t\t<br /><font class=\"litespeed-success\">\n\t\t\t\t\t<?php esc_html_e( 'API', 'litespeed-cache' ); ?>:\n\t\t\t\t\t<?php printf( esc_html__( 'Filter %s is supported.', 'litespeed-cache' ), '<code>litespeed_media_lazy_img_excludes</code>' ); ?>\n\t\t\t\t\t<?php printf( esc_html__( 'Elements with attribute %s in html code will be excluded.', 'litespeed-cache' ), '<code>data-no-lazy=\"1\"</code>' ); ?>\n\t\t\t\t</font>\n\t\t\t</div>\n\t\t</td>\n\t</tr>\n\n\t<tr>\n\t\t<th>\n\t\t\t<?php $option_id = Base::O_MEDIA_LAZY_CLS_EXC; ?>\n\t\t\t<?php $this->title( $option_id ); ?>\n\t\t</th>\n\t\t<td>\n\t\t\t<div class=\"litespeed-textarea-recommended\">\n\t\t\t\t<div>\n\t\t\t\t\t<?php $this->build_textarea( $option_id ); ?>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<?php $this->recommended( $option_id ); ?>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t<?php esc_html_e( 'Images containing these class names will not be lazy loaded.', 'litespeed-cache' ); ?>\n\t\t\t\t<?php Doc::full_or_partial_url( true ); ?>\n\t\t\t\t<?php Doc::one_per_line(); ?>\n\t\t\t</div>\n\t\t</td>\n\t</tr>\n\n\t<tr>\n\t\t<th>\n\t\t\t<?php $option_id = Base::O_MEDIA_LAZY_PARENT_CLS_EXC; ?>\n\t\t\t<?php $this->title( $option_id ); ?>\n\t\t</th>\n\t\t<td>\n\t\t\t<?php $this->build_textarea( $option_id ); ?>\n\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t<?php esc_html_e( 'Images having these parent class names will not be lazy loaded.', 'litespeed-cache' ); ?>\n\t\t\t\t<?php Doc::one_per_line(); ?>\n\t\t\t</div>\n\t\t</td>\n\t</tr>\n\n\t<tr>\n\t\t<th>\n\t\t\t<?php $option_id = Base::O_MEDIA_IFRAME_LAZY_CLS_EXC; ?>\n\t\t\t<?php $this->title( $option_id ); ?>\n\t\t</th>\n\t\t<td>\n\t\t\t<?php $this->build_textarea( $option_id ); ?>\n\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t<?php esc_html_e( 'Iframes containing these class names will not be lazy loaded.', 'litespeed-cache' ); ?>\n\t\t\t\t<?php Doc::full_or_partial_url( true ); ?>\n\t\t\t\t<?php Doc::one_per_line(); ?>\n\t\t\t</div>\n\t\t</td>\n\t</tr>\n\n\t<tr>\n\t\t<th>\n\t\t\t<?php $option_id = Base::O_MEDIA_IFRAME_LAZY_PARENT_CLS_EXC; ?>\n\t\t\t<?php $this->title( $option_id ); ?>\n\t\t</th>\n\t\t<td>\n\t\t\t<?php $this->build_textarea( $option_id ); ?>\n\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t<?php esc_html_e( 'Iframes having these parent class names will not be lazy loaded.', 'litespeed-cache' ); ?>\n\t\t\t\t<?php Doc::one_per_line(); ?>\n\t\t\t</div>\n\t\t</td>\n\t</tr>\n\n\t<tr>\n\t\t<th>\n\t\t\t<?php $option_id = Base::O_MEDIA_LAZY_URI_EXC; ?>\n\t\t\t<?php $this->title( $option_id ); ?>\n\t\t</th>\n\t\t<td>\n\t\t\t<?php $this->build_textarea( $option_id ); ?>\n\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t<?php esc_html_e( 'Prevent any lazy load of listed pages.', 'litespeed-cache' ); ?>\n\t\t\t\t<?php $this->_uri_usage_example(); ?>\n\t\t\t</div>\n\t\t</td>\n\t</tr>\n\n\t<tr>\n\t\t<th>\n\t\t\t<?php $option_id = Base::O_MEDIA_LQIP_EXC; ?>\n\t\t\t<?php $this->title( $option_id ); ?>\n\t\t</th>\n\t\t<td>\n\t\t\t<?php $this->build_textarea( $option_id ); ?>\n\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t<?php esc_html_e( 'These images will not generate LQIP.', 'litespeed-cache' ); ?>\n\t\t\t\t<?php Doc::full_or_partial_url(); ?>\n\t\t\t</div>\n\t\t</td>\n\t</tr>\n\n</tbody></table>",
    "plugins/litespeed-cache/tpl/page_optm/settings_html.tpl.php": "<?php\n/**\n * LiteSpeed Cache HTML Settings\n *\n * Renders the HTML optimization settings interface for LiteSpeed Cache.\n *\n * @package LiteSpeed\n * @since 1.0.0\n */\n\nnamespace LiteSpeed;\n\ndefined( 'WPINC' ) || exit;\n?>\n\n<h3 class=\"litespeed-title-short\">\n\t<?php esc_html_e( 'HTML Settings', 'litespeed-cache' ); ?>\n\t<?php Doc::learn_more( 'https://docs.litespeedtech.com/lscache/lscwp/pageopt/#html-settings-tab' ); ?>\n</h3>\n\n<table class=\"wp-list-table striped litespeed-table\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_OPTM_HTML_MIN; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_switch( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'Minify HTML content.', 'litespeed-cache' ); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_OPTM_DNS_PREFETCH; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_textarea( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'Prefetching DNS can reduce latency for visitors.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<?php esc_html_e( 'For example', 'litespeed-cache' ); ?>: <code>//www.example.com</code>\n\t\t\t\t\t<?php Doc::one_per_line(); ?>\n\t\t\t\t\t<?php Doc::learn_more( 'https://docs.litespeedtech.com/lscache/lscwp/pageopt/#dns-prefetch' ); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_OPTM_DNS_PREFETCH_CTRL; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_switch( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'Automatically enable DNS prefetching for all URLs in the document, including images, CSS, JavaScript, and so forth.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<?php esc_html_e( 'This can improve the page loading speed.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<?php Doc::learn_more( 'https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-DNS-Prefetch-Control' ); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_OPTM_DNS_PRECONNECT; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_textarea( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'Preconnecting speeds up future loads from a given origin.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<?php esc_html_e( 'For example', 'litespeed-cache' ); ?>: <code>https://example.com</code>\n\t\t\t\t\t<?php Doc::one_per_line(); ?>\n\t\t\t\t\t<?php Doc::learn_more( 'https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/rel/preconnect' ); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_OPTM_HTML_LAZY; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_textarea( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'Delay rendering off-screen HTML elements by its selector.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<?php Doc::one_per_line(); ?>\n\t\t\t\t\t<?php Doc::learn_more( 'https://docs.litespeedtech.com/lscache/lscwp/pageopt/#html-lazyload-selectors' ); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_OPTM_HTML_SKIP_COMMENTS; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_textarea( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'When minifying HTML do not discard comments that match a specified pattern.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<br />\n\t\t\t\t\t<?php printf( esc_html__( 'If comment to be kept is like: %1$s write: %2$s', 'litespeed-cache' ), '<code>&lt;!-- A comment that needs to be here --&gt;</code>', '<code>A comment that needs to be here</code>' ); ?>\n\t\t\t\t\t<br />\n\t\t\t\t\t<?php Doc::one_per_line(); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_OPTM_QS_RM; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_switch( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'Remove query strings from internal static resources.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<br />\n\t\t\t\t\t<font class=\"litespeed-warning\">\n\t\t\t\t\t\t⚠️\n\t\t\t\t\t\t<?php esc_html_e( 'Google reCAPTCHA will be bypassed automatically.', 'litespeed-cache' ); ?>\n\t\t\t\t\t</font>\n\t\t\t\t\t<br />\n\t\t\t\t\t<font class=\"litespeed-success\">\n\t\t\t\t\t\t<?php esc_html_e( 'API', 'litespeed-cache' ); ?>:\n\t\t\t\t\t\t<?php printf( esc_html__( 'Append query string %s to the resources to bypass this action.', 'litespeed-cache' ), '<code>&amp;_litespeed_rm_qs=0</code>' ); ?>\n\t\t\t\t\t</font>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_OPTM_GGFONTS_ASYNC; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_switch( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'Use Web Font Loader library to load Google Fonts asynchronously while leaving other CSS intact.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<?php esc_html_e( 'This will also add a preconnect to Google Fonts to establish a connection earlier.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<?php Doc::learn_more( 'https://docs.litespeedtech.com/lscache/lscwp/pageopt/#load-google-fonts-asynchronously' ); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_OPTM_GGFONTS_RM; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_switch( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'Prevent Google Fonts from loading on all pages.', 'litespeed-cache' ); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_OPTM_EMOJI_RM; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_switch( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'Stop loading WordPress.org emoji. Browser default emoji will be displayed instead.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<?php esc_html_e( 'This can improve your speed score in services like Pingdom, GTmetrix and PageSpeed.', 'litespeed-cache' ); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_OPTM_NOSCRIPT_RM; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_switch( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php printf( esc_html__( 'This option will remove all %s tags from HTML.', 'litespeed-cache' ), '<code>&lt;noscript&gt;</code>' ); ?>\n\t\t\t\t\t<?php Doc::learn_more( 'https://docs.litespeedtech.com/lscache/lscwp/pageopt/#remove-noscript-tags' ); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t</tbody>\n</table>",
    "plugins/litespeed-cache/tpl/page_optm/settings_js.tpl.php": "<?php\n/**\n * LiteSpeed Cache JS Settings\n *\n * Renders the JS optimization settings interface for LiteSpeed Cache.\n *\n * @package LiteSpeed\n * @since 1.0.0\n */\n\nnamespace LiteSpeed;\n\ndefined( 'WPINC' ) || exit;\n?>\n\n<h3 class=\"litespeed-title-short\">\n\t<?php esc_html_e( 'JS Settings', 'litespeed-cache' ); ?>\n\t<?php Doc::learn_more( 'https://docs.litespeedtech.com/lscache/lscwp/pageopt/#js-settings-tab' ); ?>\n</h3>\n\n<table class=\"wp-list-table striped litespeed-table\">\n\t<tbody>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_OPTM_JS_MIN; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_switch( $option_id ); ?>\n\t\t\t\t<?php Doc::maybe_on_by_gm( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'Minify JS files and inline JS codes.', 'litespeed-cache' ); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_OPTM_JS_COMB; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_switch( $option_id ); ?>\n\t\t\t\t<?php Doc::maybe_on_by_gm( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'Combine all local JS files into a single file.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<a href=\"https://docs.litespeedtech.com/lscache/lscwp/ts-optimize/\" target=\"_blank\"><?php esc_html_e( 'How to Fix Problems Caused by CSS/JS Optimization.', 'litespeed-cache' ); ?></a>\n\t\t\t\t\t<br />\n\t\t\t\t\t<font class=\"litespeed-danger\">\n\t\t\t\t\t\t🚨 <?php esc_html_e( 'This option may result in a JS error or layout issue on frontend pages with certain themes/plugins.', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t<?php esc_html_e( 'JS error can be found from the developer console of browser by right clicking and choosing Inspect.', 'litespeed-cache' ); ?>\n\t\t\t\t\t</font>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_OPTM_JS_COMB_EXT_INL; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_switch( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php printf( esc_html__( 'Include external JS and inline JS in combined file when %1$s is also enabled. This option helps maintain the priorities of JS execution, which should minimize potential errors caused by JS Combine.', 'litespeed-cache' ), '<code>' . esc_html( Lang::title( Base::O_OPTM_JS_COMB ) ) . '</code>' ); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_OPTM_JS_DEFER; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_switch( $option_id, array( esc_html__( 'OFF', 'litespeed-cache' ), esc_html__( 'Deferred', 'litespeed-cache' ), esc_html__( 'Delayed', 'litespeed-cache' ) ) ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'Deferring until page is parsed or delaying till interaction can help reduce resource contention and improve performance causing a lower FID (Core Web Vitals metric).', 'litespeed-cache' ); ?>\n\t\t\t\t\t<?php Doc::learn_more( 'https://docs.litespeedtech.com/lscache/lscwp/pageopt/#load-js-deferred' ); ?><br />\n\t\t\t\t\t<?php esc_html_e( 'This can improve your speed score in services like Pingdom, GTmetrix and PageSpeed.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<?php Doc::learn_more( 'https://web.dev/fid/#what-is-fid' ); ?>\n\t\t\t\t\t<br />\n\t\t\t\t\t<font class=\"litespeed-danger\">\n\t\t\t\t\t\t🚨 <?php esc_html_e( 'This option may result in a JS error or layout issue on frontend pages with certain themes/plugins.', 'litespeed-cache' ); ?>\n\t\t\t\t\t</font>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t</tbody>\n</table>",
    "plugins/litespeed-cache/tpl/page_optm/settings_localization.tpl.php": "<?php\n/**\n * LiteSpeed Cache Localization Settings\n *\n * Renders the localization settings interface for LiteSpeed Cache, including Gravatar caching and resource localization.\n *\n * @package LiteSpeed\n * @since 1.0.0\n */\n\nnamespace LiteSpeed;\n\ndefined( 'WPINC' ) || exit;\n\n$last_generated = Avatar::get_summary();\n$avatar_queue   = Avatar::cls()->queue_count();\n?>\n\n<?php if ( $this->cls( 'Avatar' )->need_db() && ! $this->cls( 'Data' )->tb_exist( 'avatar' ) ) : ?>\n<div class=\"litespeed-callout notice notice-error inline\">\n\t<h4><?php esc_html_e( 'WARNING', 'litespeed-cache' ); ?></h4>\n\t<p><?php printf( esc_html__( 'Failed to create Avatar table. Please follow <a %s>Table Creation guidance from LiteSpeed Wiki</a> to finish setup.', 'litespeed-cache' ), 'href=\"https://www.litespeedtech.com/support/wiki/doku.php/litespeed_wiki:cache:lscwp:installation\" target=\"_blank\"' ); ?></p>\n</div>\n<?php endif; ?>\n\n<h3 class=\"litespeed-title-short\">\n\t<?php esc_html_e( 'Localization Settings', 'litespeed-cache' ); ?>\n\t<?php Doc::learn_more( 'https://docs.litespeedtech.com/lscache/lscwp/pageopt/#localization-settings-tab' ); ?>\n</h3>\n\n<table class=\"wp-list-table striped litespeed-table\"><tbody>\n\t<tr>\n\t\t<th>\n\t\t\t<?php $option_id = Base::O_DISCUSS_AVATAR_CACHE; ?>\n\t\t\t<?php $this->title( $option_id ); ?>\n\t\t</th>\n\t\t<td>\n\t\t\t<?php $this->build_switch( $option_id ); ?>\n\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t<?php esc_html_e( 'Store Gravatar locally.', 'litespeed-cache' ); ?>\n\t\t\t\t<?php esc_html_e( 'Accelerates the speed by caching Gravatar (Globally Recognized Avatars).', 'litespeed-cache' ); ?>\n\t\t\t</div>\n\t\t</td>\n\t</tr>\n\n\t<tr>\n\t\t<th class=\"litespeed-padding-left\">\n\t\t\t<?php $option_id = Base::O_DISCUSS_AVATAR_CRON; ?>\n\t\t\t<?php $this->title( $option_id ); ?>\n\t\t</th>\n\t\t<td>\n\t\t\t<?php $this->build_switch( $option_id ); ?>\n\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t<?php esc_html_e( 'Refresh Gravatar cache by cron.', 'litespeed-cache' ); ?>\n\t\t\t</div>\n\n\t\t\t<?php if ( $last_generated ) : ?>\n\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t<?php if ( ! empty( $last_generated['last_request'] ) ) : ?>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<?php echo esc_html__( 'Last ran', 'litespeed-cache' ) . ': <code>' . esc_html( Utility::readable_time( $last_generated['last_request'] ) ) . '</code>'; ?>\n\t\t\t\t\t</p>\n\t\t\t\t<?php endif; ?>\n\t\t\t\t<?php if ( $avatar_queue ) : ?>\n\t\t\t\t\t<div class=\"litespeed-callout notice notice-warning inline\">\n\t\t\t\t\t\t<h4>\n\t\t\t\t\t\t\t<?php echo esc_html__( 'Avatar list in queue waiting for update', 'litespeed-cache' ); ?>:\n\t\t\t\t\t\t\t<?php echo esc_html( $avatar_queue ); ?>\n\t\t\t\t\t\t</h4>\n\t\t\t\t\t</div>\n\t\t\t\t\t<a href=\"<?php echo esc_url( Utility::build_url( Router::ACTION_AVATAR, Avatar::TYPE_GENERATE ) ); ?>\" class=\"button litespeed-btn-success\">\n\t\t\t\t\t\t<?php esc_html_e( 'Run Queue Manually', 'litespeed-cache' ); ?>\n\t\t\t\t\t</a>\n\t\t\t\t<?php endif; ?>\n\t\t\t</div>\n\t\t\t<?php endif; ?>\n\n\t\t</td>\n\t</tr>\n\n\t<tr>\n\t\t<th class=\"litespeed-padding-left\">\n\t\t\t<?php $option_id = Base::O_DISCUSS_AVATAR_CACHE_TTL; ?>\n\t\t\t<?php $this->title( $option_id ); ?>\n\t\t</th>\n\t\t<td>\n\t\t\t<?php $this->build_input( $option_id ); ?> <?php $this->readable_seconds(); ?>\n\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t<?php esc_html_e( 'Specify how long, in seconds, Gravatar files are cached.', 'litespeed-cache' ); ?>\n\t\t\t\t<?php $this->recommended( $option_id ); ?>\n\t\t\t\t<?php $this->_validate_ttl( $option_id, 3600 ); ?>\n\t\t\t</div>\n\t\t</td>\n\t</tr>\n\n\t<tr>\n\t\t<th>\n\t\t\t<?php $option_id = Base::O_OPTM_LOCALIZE; ?>\n\t\t\t<?php $this->title( $option_id ); ?>\n\t\t</th>\n\t\t<td>\n\t\t\t<?php $this->build_switch( $option_id ); ?>\n\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t<?php esc_html_e( 'Localize external resources.', 'litespeed-cache' ); ?>\n\t\t\t\t<?php Doc::learn_more( 'https://docs.litespeedtech.com/lscache/lscwp/pageopt/#localize' ); ?>\n\n\t\t\t\t<br /><font class=\"litespeed-danger\">\n\t\t\t\t\t🚨 <?php printf( esc_html__( 'Please thoroughly test all items in %s to ensure they function as expected.', 'litespeed-cache' ), '<code>' . esc_html( Lang::title( Base::O_OPTM_LOCALIZE_DOMAINS ) ) . '</code>' ); ?>\n\t\t\t\t</font>\n\t\t\t</div>\n\t\t</td>\n\t</tr>\n\n\t<tr>\n\t\t<th class=\"litespeed-padding-left\">\n\t\t\t<?php $option_id = Base::O_OPTM_LOCALIZE_DOMAINS; ?>\n\t\t\t<?php $this->title( $option_id ); ?>\n\t\t</th>\n\t\t<td>\n\t\t\t<div class=\"litespeed-textarea-recommended\">\n\t\t\t\t<div>\n\t\t\t\t\t<?php $this->build_textarea( $option_id ); ?>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<?php $this->recommended( $option_id, true ); ?>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t<?php esc_html_e( 'Resources listed here will be copied and replaced with local URLs.', 'litespeed-cache' ); ?>\n\t\t\t\t<?php esc_html_e( 'HTTPS sources only.', 'litespeed-cache' ); ?>\n\n\t\t\t\t<?php Doc::one_per_line(); ?>\n\n\t\t\t\t<br /><?php printf( esc_html__( 'Comments are supported. Start a line with a %s to turn it into a comment line.', 'litespeed-cache' ), '<code>#</code>' ); ?>\n\n\t\t\t\t<br /><?php esc_html_e( 'Example', 'litespeed-cache' ); ?>: <code>https://www.example.com/one.js</code>\n\t\t\t\t<?php Doc::learn_more( 'https://docs.litespeedtech.com/lscache/lscwp/pageopt/#localization-files' ); ?>\n\n\t\t\t\t<br /><font class=\"litespeed-danger\">\n\t\t\t\t\t🚨 <?php esc_html_e( 'Please thoroughly test each JS file you add to ensure it functions as expected.', 'litespeed-cache' ); ?>\n\t\t\t\t</font>\n\t\t\t</div>\n\t\t</td>\n\t</tr>\n\n</tbody></table>",
    "plugins/litespeed-cache/tpl/page_optm/settings_css.tpl.php": "<?php\n/**\n * LiteSpeed Cache CSS Settings\n *\n * Renders the CSS optimization settings interface for LiteSpeed Cache.\n *\n * @package LiteSpeed\n * @since 1.0.0\n */\n\nnamespace LiteSpeed;\n\ndefined( 'WPINC' ) || exit;\n\n$__admin_display     = Admin_Display::cls();\n$css_summary         = CSS::get_summary();\n$ucss_summary        = UCSS::get_summary();\n$closest_server_ucss = Cloud::get_summary( 'server.' . Cloud::SVC_UCSS );\n$closest_server      = Cloud::get_summary( 'server.' . Cloud::SVC_CCSS );\n\n$ccss_queue = $this->load_queue( 'ccss' );\n$ucss_queue = $this->load_queue( 'ucss' );\n\n$next_gen = '<code class=\"litespeed-success\">' . $this->cls( 'Media' )->next_gen_image_title() . '</code>';\n\n$ucss_service_hot = $this->cls( 'Cloud' )->service_hot( Cloud::SVC_UCSS );\n$ccss_service_hot = $this->cls( 'Cloud' )->service_hot( Cloud::SVC_CCSS );\n?>\n\n<h3 class=\"litespeed-title-short\">\n\t<?php esc_html_e( 'CSS Settings', 'litespeed-cache' ); ?>\n\t<?php Doc::learn_more( 'https://docs.litespeedtech.com/lscache/lscwp/pageopt/' ); ?>\n</h3>\n\n<table class=\"wp-list-table striped litespeed-table\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_OPTM_CSS_MIN; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_switch( $option_id ); ?>\n\t\t\t\t<?php Doc::maybe_on_by_gm( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'Minify CSS files and inline CSS code.', 'litespeed-cache' ); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_OPTM_CSS_COMB; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_switch( $option_id ); ?>\n\t\t\t\t<?php Doc::maybe_on_by_gm( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'Combine CSS files and inline CSS code.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<a href=\"https://docs.litespeedtech.com/lscache/lscwp/ts-optimize/\" target=\"_blank\"><?php esc_html_e( 'How to Fix Problems Caused by CSS/JS Optimization.', 'litespeed-cache' ); ?></a>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th class=\"litespeed-padding-left\">\n\t\t\t\t<?php $option_id = Base::O_OPTM_UCSS; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_switch( $option_id ); ?>\n\t\t\t\t<?php Doc::maybe_on_by_gm( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php if ( ! $this->cls( 'Cloud' )->activated() ) : ?>\n\t\t\t\t\t\t<div class=\"litespeed-callout notice notice-error inline\">\n\t\t\t\t\t\t\t<h4><?php esc_html_e( 'WARNING', 'litespeed-cache' ); ?></h4>\n\t\t\t\t\t\t\t<?php echo wp_kses_post( Error::msg( 'qc_setup_required' ) ); ?>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t<?php endif; ?>\n\n\t\t\t\t\t<?php esc_html_e( 'Use QUIC.cloud online service to generate unique CSS.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<?php esc_html_e( 'This will drop the unused CSS on each page from the combined file.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<?php Doc::learn_more( 'https://docs.litespeedtech.com/lscache/lscwp/pageopt/#generate-ucss' ); ?>\n\t\t\t\t\t<br /><?php esc_html_e( 'Automatic generation of unique CSS is in the background via a cron-based queue.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<br />\n\t\t\t\t\t<font class=\"litespeed-success\"><?php esc_html_e( 'API', 'litespeed-cache' ); ?>: <?php printf( esc_html__( 'Filter %s available for UCSS per page type generation.', 'litespeed-cache' ), '<code>add_filter( \"litespeed_ucss_per_pagetype\", \"__return_true\" );</code>' ); ?></font>\n\t\t\t\t\t<?php $__admin_display->_check_overwritten( 'optm-ucss_per_pagetype' ); ?>\n\n\t\t\t\t\t<?php if ( $this->conf( Base::O_OPTM_UCSS ) && ! $this->conf( Base::O_OPTM_CSS_COMB ) ) : ?>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<font class=\"litespeed-warning\">\n\t\t\t\t\t\t\t<?php printf( esc_html__( 'This option is bypassed because %1$s option is %2$s.', 'litespeed-cache' ), '<code>' . esc_html( Lang::title( Base::O_OPTM_CSS_COMB ) ) . '</code>', '<code>' . esc_html__( 'OFF', 'litespeed-cache' ) . '</code>' ); ?>\n\t\t\t\t\t\t</font>\n\t\t\t\t\t<?php endif; ?>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"litespeed-desc litespeed-left20\">\n\t\t\t\t\t<?php if ( $ucss_summary ) : ?>\n\t\t\t\t\t\t<?php if ( ! empty( $ucss_summary['last_request'] ) ) : ?>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<?php echo esc_html__( 'Last generated', 'litespeed-cache' ) . ': <code>' . esc_html( Utility::readable_time( $ucss_summary['last_request'] ) ) . '</code>'; ?>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<?php echo esc_html__( 'Last requested cost', 'litespeed-cache' ) . ': <code>' . esc_html( $ucss_summary['last_spent'] ) . 's</code>'; ?>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t<?php endif; ?>\n\n\t\t\t\t\t<?php if ( $closest_server_ucss ) : ?>\n\t\t\t\t\t\t<a class=\"litespeed-redetect\" href=\"<?php echo esc_url( Utility::build_url( Router::ACTION_CLOUD, Cloud::TYPE_REDETECT_CLOUD, false, null, array( 'svc' => Cloud::SVC_UCSS ) ) ); ?>\" data-balloon-pos=\"up\" data-balloon-break aria-label=\"<?php printf( esc_html__( 'Current closest Cloud server is %s. Click to redetect.', 'litespeed-cache' ), esc_html( $closest_server_ucss ) ); ?>\" data-litespeed-cfm=\"<?php esc_html_e( 'Are you sure you want to redetect the closest cloud server for this service?', 'litespeed-cache' ); ?>\"><i class=\"litespeed-quic-icon\"></i> <?php esc_html_e( 'Redetect', 'litespeed-cache' ); ?></a>\n\t\t\t\t\t<?php endif; ?>\n\n\t\t\t\t\t<?php if ( ! empty( $ucss_queue ) ) : ?>\n\t\t\t\t\t\t<div class=\"litespeed-callout notice notice-warning inline\">\n\t\t\t\t\t\t\t<h4>\n\t\t\t\t\t\t\t\t<?php printf( esc_html__( 'URL list in %s queue waiting for cron', 'litespeed-cache' ), 'UCSS' ); ?> ( <?php echo esc_html( count( $ucss_queue ) ); ?> )\n\t\t\t\t\t\t\t\t<a href=\"<?php echo esc_url( Utility::build_url( Router::ACTION_UCSS, UCSS::TYPE_CLEAR_Q ) ); ?>\" class=\"button litespeed-btn-warning litespeed-right\"><?php esc_html_e( 'Clear', 'litespeed-cache' ); ?></a>\n\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\t\t$i = 0;\n\t\t\t\t\t\t\t\tforeach ( $ucss_queue as $queue_key => $queue_val ) :\n\t\t\t\t\t\t\t\t\tif ( $i++ > 20 ) :\n\t\t\t\t\t\t\t\t\t\techo '...';\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tendif;\n\t\t\t\t\t\t\t\t\tif ( ! is_array( $queue_val ) ) {\n\t\t\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif ( ! empty( $queue_val['_status'] ) ) {\n\t\t\t\t\t\t\t\t\t\techo '<span class=\"litespeed-success\">';\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\techo esc_html( $queue_val['url'] );\n\t\t\t\t\t\t\t\t\tif ( ! empty( $queue_val['_status'] ) ) {\n\t\t\t\t\t\t\t\t\t\techo '</span>';\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t$pos = strpos( $queue_key, ' ' );\n\t\t\t\t\t\t\t\t\tif ( $pos ) {\n\t\t\t\t\t\t\t\t\t\techo ' (' . esc_html__( 'Vary Group', 'litespeed-cache' ) . ':' . esc_html( substr( $queue_key, 0, $pos ) ) . ')';\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif ( $queue_val['is_mobile'] ) {\n\t\t\t\t\t\t\t\t\t\techo ' <span data-balloon-pos=\"up\" aria-label=\"mobile\">📱</span>';\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif ( ! empty( $queue_val['is_webp'] ) ) {\n\t\t\t\t\t\t\t\t\t\techo ' ' . wp_kses_post( $next_gen );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\techo '<br />';\n\t\t\t\t\t\t\t\tendforeach;\n\t\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<?php if ( $ucss_service_hot ) : ?>\n\t\t\t\t\t\t\t<button class=\"button button-secondary\" disabled>\n\t\t\t\t\t\t\t\t<?php printf( esc_html__( 'Run %s Queue Manually', 'litespeed-cache' ), 'UCSS' ); ?>\n\t\t\t\t\t\t\t\t- <?php printf( esc_html__( 'Available after %d second(s)', 'litespeed-cache' ), esc_html( $ucss_service_hot ) ); ?>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<?php else : ?>\n\t\t\t\t\t\t\t<a href=\"<?php echo esc_url( Utility::build_url( Router::ACTION_UCSS, UCSS::TYPE_GEN ) ); ?>\" class=\"button litespeed-btn-success\">\n\t\t\t\t\t\t\t\t<?php printf( esc_html__( 'Run %s Queue Manually', 'litespeed-cache' ), 'UCSS' ); ?>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t<?php Doc::queue_issues(); ?>\n\t\t\t\t\t<?php endif; ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th class=\"litespeed-padding-left\">\n\t\t\t\t<?php $option_id = Base::O_OPTM_UCSS_INLINE; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_switch( $option_id ); ?>\n\t\t\t\t<?php Doc::maybe_on_by_gm( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php printf( esc_html__( 'Inline UCSS to reduce the extra CSS file loading. This option will not be automatically turned on for %1$s pages. To use it on %1$s pages, please set it to ON.', 'litespeed-cache' ), '<code>' . esc_html( Lang::title( Base::O_GUEST ) ) . '</code>' ); ?>\n\t\t\t\t\t<br />\n\t\t\t\t\t<font class=\"litespeed-info\">\n\t\t\t\t\t\t<?php printf( esc_html__( 'This option will automatically bypass %s option.', 'litespeed-cache' ), '<code>' . esc_html( Lang::title( Base::O_OPTM_CSS_ASYNC ) ) . '</code>' ); ?>\n\t\t\t\t\t</font>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_OPTM_CSS_COMB_EXT_INL; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_switch( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php printf( esc_html__( 'Include external CSS and inline CSS in combined file when %1$s is also enabled. This option helps maintain the priorities of CSS, which should minimize potential errors caused by CSS Combine.', 'litespeed-cache' ), '<code>' . esc_html( Lang::title( Base::O_OPTM_CSS_COMB ) ) . '</code>' ); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_OPTM_CSS_ASYNC; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_switch( $option_id ); ?>\n\t\t\t\t<?php Doc::maybe_on_by_gm( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php if ( ! $this->cls( 'Cloud' )->activated() ) : ?>\n\t\t\t\t\t\t<div class=\"litespeed-callout notice notice-error inline\">\n\t\t\t\t\t\t\t<h4><?php esc_html_e( 'WARNING', 'litespeed-cache' ); ?></h4>\n\t\t\t\t\t\t\t<?php echo wp_kses_post( Error::msg( 'qc_setup_required' ) ); ?>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t<?php esc_html_e( 'Optimize CSS delivery.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<?php esc_html_e( 'This can improve your speed score in services like Pingdom, GTmetrix and PageSpeed.', 'litespeed-cache' ); ?><br />\n\t\t\t\t\t<?php esc_html_e( 'Use QUIC.cloud online service to generate critical CSS and load remaining CSS asynchronously.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<?php Doc::learn_more( 'https://docs.litespeedtech.com/lscache/lscwp/pageopt/#load-css-asynchronously' ); ?><br />\n\t\t\t\t\t<?php esc_html_e( 'Automatic generation of critical CSS is in the background via a cron-based queue.', 'litespeed-cache' ); ?><br />\n\t\t\t\t\t<?php printf( esc_html__( 'When this option is turned %s, it will also load Google Fonts asynchronously.', 'litespeed-cache' ), '<code>' . esc_html__( 'ON', 'litespeed-cache' ) . '</code>' ); ?>\n\t\t\t\t\t<br />\n\t\t\t\t\t<font class=\"litespeed-success\">\n\t\t\t\t\t\t<?php esc_html_e( 'API', 'litespeed-cache' ); ?>:\n\t\t\t\t\t\t<?php printf( esc_html__( 'Elements with attribute %s in HTML code will be excluded.', 'litespeed-cache' ), '<code>data-no-async=\"1\"</code>' ); ?>\n\t\t\t\t\t</font>\n\n\t\t\t\t\t<?php if ( $this->conf( Base::O_OPTM_CSS_ASYNC ) && $this->conf( Base::O_OPTM_CSS_COMB ) && $this->conf( Base::O_OPTM_UCSS ) && $this->conf( Base::O_OPTM_UCSS_INLINE ) ) : ?>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<font class=\"litespeed-warning\">\n\t\t\t\t\t\t\t<?php printf( esc_html__( 'This option is bypassed due to %s option.', 'litespeed-cache' ), '<code>' . esc_html( Lang::title( Base::O_OPTM_UCSS_INLINE ) ) . '</code>' ); ?>\n\t\t\t\t\t\t</font>\n\t\t\t\t\t<?php endif; ?>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"litespeed-desc litespeed-left20\">\n\t\t\t\t\t<?php if ( $css_summary ) : ?>\n\t\t\t\t\t\t<?php if ( ! empty( $css_summary['last_request_ccss'] ) ) : ?>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<?php echo esc_html__( 'Last generated', 'litespeed-cache' ) . ': <code>' . esc_html( Utility::readable_time( $css_summary['last_request_ccss'] ) ) . '</code>'; ?>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<?php echo esc_html__( 'Last requested cost', 'litespeed-cache' ) . ': <code>' . esc_html( $css_summary['last_spent_ccss'] ) . 's</code>'; ?>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t<?php endif; ?>\n\n\t\t\t\t\t<?php if ( $closest_server ) : ?>\n\t\t\t\t\t\t<a class=\"litespeed-redetect\" href=\"<?php echo esc_url( Utility::build_url( Router::ACTION_CLOUD, Cloud::TYPE_REDETECT_CLOUD, false, null, array( 'svc' => Cloud::SVC_CCSS ) ) ); ?>\" data-balloon-pos=\"up\" data-balloon-break aria-label=\"<?php printf( esc_html__( 'Current closest Cloud server is %s. Click to redetect.', 'litespeed-cache' ), esc_html( $closest_server ) ); ?>\" data-litespeed-cfm=\"<?php esc_html_e( 'Are you sure you want to redetect the closest cloud server for this service?', 'litespeed-cache' ); ?>\"><i class=\"litespeed-quic-icon\"></i> <?php esc_html_e( 'Redetect', 'litespeed-cache' ); ?></a>\n\t\t\t\t\t<?php endif; ?>\n\n\t\t\t\t\t<?php if ( ! empty( $ccss_queue ) ) : ?>\n\t\t\t\t\t\t<div class=\"litespeed-callout notice notice-warning inline\">\n\t\t\t\t\t\t\t<h4>\n\t\t\t\t\t\t\t\t<?php printf( esc_html__( 'URL list in %s queue waiting for cron', 'litespeed-cache' ), 'CCSS' ); ?> ( <?php echo esc_html( count( $ccss_queue ) ); ?> )\n\t\t\t\t\t\t\t\t<a href=\"<?php echo esc_url( Utility::build_url( Router::ACTION_CSS, CSS::TYPE_CLEAR_Q_CCSS ) ); ?>\" class=\"button litespeed-btn-warning litespeed-right\"><?php esc_html_e( 'Clear', 'litespeed-cache' ); ?></a>\n\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\t\t$i = 0;\n\t\t\t\t\t\t\t\tforeach ( $ccss_queue as $queue_key => $queue_val ) :\n\t\t\t\t\t\t\t\t\tif ( $i++ > 20 ) :\n\t\t\t\t\t\t\t\t\t\techo '...';\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tendif;\n\t\t\t\t\t\t\t\t\tif ( ! is_array( $queue_val ) ) {\n\t\t\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif ( ! empty( $queue_val['_status'] ) ) {\n\t\t\t\t\t\t\t\t\t\techo '<span class=\"litespeed-success\">';\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\techo esc_html( $queue_val['url'] );\n\t\t\t\t\t\t\t\t\tif ( ! empty( $queue_val['_status'] ) ) {\n\t\t\t\t\t\t\t\t\t\techo '</span>';\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t$pos = strpos( $queue_key, ' ' );\n\t\t\t\t\t\t\t\t\tif ( $pos ) {\n\t\t\t\t\t\t\t\t\t\techo ' (' . esc_html__( 'Vary Group', 'litespeed-cache' ) . ':' . esc_html( substr( $queue_key, 0, $pos ) ) . ')';\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif ( $queue_val['is_mobile'] ) {\n\t\t\t\t\t\t\t\t\t\techo ' <span data-balloon-pos=\"up\" aria-label=\"mobile\">📱</span>';\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif ( ! empty( $queue_val['is_webp'] ) ) {\n\t\t\t\t\t\t\t\t\t\techo ' ' . wp_kses_post( $next_gen );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\techo '<br />';\n\t\t\t\t\t\t\t\tendforeach;\n\t\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<?php if ( $ccss_service_hot ) : ?>\n\t\t\t\t\t\t\t<button class=\"button button-secondary\" disabled>\n\t\t\t\t\t\t\t\t<?php printf( esc_html__( 'Run %s Queue Manually', 'litespeed-cache' ), 'CCSS' ); ?>\n\t\t\t\t\t\t\t\t- <?php printf( esc_html__( 'Available after %d second(s)', 'litespeed-cache' ), esc_html( $ccss_service_hot ) ); ?>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<?php else : ?>\n\t\t\t\t\t\t\t<a href=\"<?php echo esc_url( Utility::build_url( Router::ACTION_CSS, CSS::TYPE_GEN_CCSS ) ); ?>\" class=\"button litespeed-btn-success\">\n\t\t\t\t\t\t\t\t<?php printf( esc_html__( 'Run %s Queue Manually', 'litespeed-cache' ), 'CCSS' ); ?>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t<?php Doc::queue_issues(); ?>\n\t\t\t\t\t<?php endif; ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th class=\"litespeed-padding-left\">\n\t\t\t\t<?php $option_id = Base::O_OPTM_CCSS_PER_URL; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_switch( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'Disable this option to generate CCSS per Post Type instead of per page. This can save significant CCSS quota, however it may result in incorrect CSS styling if your site uses a page builder.', 'litespeed-cache' ); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th class=\"litespeed-padding-left\">\n\t\t\t\t<?php $option_id = Base::O_OPTM_CSS_ASYNC_INLINE; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_switch( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'This will inline the asynchronous CSS library to avoid render blocking.', 'litespeed-cache' ); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_OPTM_CSS_FONT_DISPLAY; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_switch( $option_id, array( esc_html__( 'Default', 'litespeed-cache' ), 'Swap' ) ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php printf( esc_html__( 'Set this to append %1$s to all %2$s rules before caching CSS to specify how fonts should be displayed while being downloaded.', 'litespeed-cache' ), '<code>font-display</code>', '<code>@font-face</code>' ); ?>\n\t\t\t\t\t<br /><?php printf( esc_html__( '%s is recommended.', 'litespeed-cache' ), '<code>' . esc_html__( 'Swap', 'litespeed-cache' ) . '</code>' ); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>",
    "plugins/litespeed-cache/tpl/page_optm/settings_tuning.tpl.php": "<?php\n/**\n * LiteSpeed Cache Tuning Settings\n *\n * Renders the tuning settings interface for LiteSpeed Cache, allowing configuration of optimization exclusions and role-based settings.\n *\n * @package LiteSpeed\n * @since 1.0.0\n */\n\nnamespace LiteSpeed;\n\ndefined( 'WPINC' ) || exit;\n\nglobal $wp_roles;\n$wp_orig_roles = $wp_roles;\nif ( ! isset( $wp_roles ) ) {\n\t$wp_orig_roles = new \\WP_Roles();\n}\n\n$roles = array();\nforeach ( $wp_orig_roles->roles as $k => $v ) {\n\t$roles[ $k ] = $v['name'];\n}\nksort( $roles );\n\n?>\n<h3 class=\"litespeed-title-short\">\n\t<?php esc_html_e( 'Tuning Settings', 'litespeed-cache' ); ?>\n\t<?php Doc::learn_more( 'https://docs.litespeedtech.com/lscache/lscwp/pageopt/#tuning-settings-tab' ); ?>\n</h3>\n\n<table class=\"wp-list-table striped litespeed-table\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_OPTM_JS_DELAY_INC; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_textarea( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'Listed JS files or inline JS code will be delayed.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<?php Doc::full_or_partial_url(); ?>\n\t\t\t\t\t<?php Doc::one_per_line(); ?>\n\t\t\t\t\t<br />\n\t\t\t\t\t<font class=\"litespeed-success\">\n\t\t\t\t\t\t<?php esc_html_e( 'API', 'litespeed-cache' ); ?>:\n\t\t\t\t\t\t<?php printf( esc_html__( 'Filter %s is supported.', 'litespeed-cache' ), '<code>litespeed_optm_js_delay_inc</code>' ); ?>\n\t\t\t\t\t</font>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_OPTM_JS_EXC; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_textarea( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'Listed JS files or inline JS code will not be minified or combined.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<?php Doc::full_or_partial_url(); ?>\n\t\t\t\t\t<?php Doc::one_per_line(); ?>\n\t\t\t\t\t<br />\n\t\t\t\t\t<font class=\"litespeed-success\">\n\t\t\t\t\t\t<?php esc_html_e( 'API', 'litespeed-cache' ); ?>:\n\t\t\t\t\t\t<?php printf( esc_html__( 'Filter %s is supported.', 'litespeed-cache' ), '<code>litespeed_optimize_js_excludes</code>' ); ?>\n\t\t\t\t\t\t<?php printf( esc_html__( 'Elements with attribute %s in html code will be excluded.', 'litespeed-cache' ), '<code>data-no-optimize=\"1\"</code>' ); ?>\n\t\t\t\t\t\t<br /><?php esc_html_e( 'Predefined list will also be combined with the above settings.', 'litespeed-cache' ); ?>: <a href=\"https://github.com/litespeedtech/lscache_wp/blob/dev/data/js_excludes.txt\" target=\"_blank\">https://github.com/litespeedtech/lscache_wp/blob/dev/data/js_excludes.txt</a>\n\t\t\t\t\t</font>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_OPTM_JS_DEFER_EXC; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_textarea( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'Listed JS files or inline JS code will not be deferred or delayed.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<?php Doc::full_or_partial_url(); ?>\n\t\t\t\t\t<?php Doc::one_per_line(); ?>\n\t\t\t\t\t<br /><span class=\"litespeed-success\">\n\t\t\t\t\t\t<?php esc_html_e( 'API', 'litespeed-cache' ); ?>:\n\t\t\t\t\t\t<?php printf( esc_html__( 'Filter %s is supported.', 'litespeed-cache' ), '<code>litespeed_optm_js_defer_exc</code>' ); ?>\n\t\t\t\t\t\t<?php printf( esc_html__( 'Elements with attribute %s in html code will be excluded.', 'litespeed-cache' ), '<code>data-no-defer=\"1\"</code>' ); ?>\n\t\t\t\t\t\t<br /><?php esc_html_e( 'Predefined list will also be combined with the above settings.', 'litespeed-cache' ); ?>: <a href=\"https://github.com/litespeedtech/lscache_wp/blob/dev/data/js_defer_excludes.txt\" target=\"_blank\">https://github.com/litespeedtech/lscache_wp/blob/dev/data/js_defer_excludes.txt</a>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_OPTM_GM_JS_EXC; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_textarea( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php printf( esc_html__( 'Listed JS files or inline JS code will not be optimized by %s.', 'litespeed-cache' ), '<code>' . esc_html( Lang::title( Base::O_GUEST ) ) . '</code>' ); ?>\n\t\t\t\t\t<?php Doc::full_or_partial_url(); ?>\n\t\t\t\t\t<?php Doc::one_per_line(); ?>\n\t\t\t\t\t<br /><span class=\"litespeed-success\">\n\t\t\t\t\t\t<?php esc_html_e( 'API', 'litespeed-cache' ); ?>:\n\t\t\t\t\t\t<?php printf( esc_html__( 'Filter %s is supported.', 'litespeed-cache' ), '<code>litespeed_optm_gm_js_exc</code>' ); ?>\n\t\t\t\t\t\t<?php printf( esc_html__( 'Elements with attribute %s in html code will be excluded.', 'litespeed-cache' ), '<code>data-no-defer=\"1\"</code>' ); ?>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_OPTM_EXC; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_textarea( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'Prevent any optimization of listed pages.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<?php $this->_uri_usage_example(); ?>\n\t\t\t\t\t<br /><span class=\"litespeed-success\">\n\t\t\t\t\t\t<?php esc_html_e( 'API', 'litespeed-cache' ); ?>:\n\t\t\t\t\t\t<?php printf( esc_html__( 'Filter %s is supported.', 'litespeed-cache' ), '<code>litespeed_optm_uri_exc</code>' ); ?>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_OPTM_GUEST_ONLY; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_switch( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'Only optimize pages for guest (not logged in) visitors. If turned this OFF, CSS/JS/CCSS files will be doubled by each user group.', 'litespeed-cache' ); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_OPTM_EXC_ROLES; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'Selected roles will be excluded from all optimizations.', 'litespeed-cache' ); ?>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"litespeed-tick-list\">\n\t\t\t\t\t<?php\n\t\t\t\t\tforeach ( $roles as $role_id => $role_title ) {\n\t\t\t\t\t\t$this->build_checkbox( $option_id . '[]', $role_title, $this->cls( 'Conf' )->in_optm_exc_roles( $role_id ), $role_id );\n\t\t\t\t\t}\n\t\t\t\t\t?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t</tbody>\n</table>",
    "plugins/litespeed-cache/tpl/page_optm/entry.tpl.php": "<?php\n/**\n * LiteSpeed Cache Page Optimization Interface\n *\n * Renders the page optimization settings interface for LiteSpeed Cache with tabbed navigation.\n *\n * @package LiteSpeed\n * @since 1.0.0\n */\n\nnamespace LiteSpeed;\n\ndefined( 'WPINC' ) || exit;\n\n$menu_list = array(\n\t'settings_css'          => esc_html__( 'CSS Settings', 'litespeed-cache' ),\n\t'settings_js'           => esc_html__( 'JS Settings', 'litespeed-cache' ),\n\t'settings_html'         => esc_html__( 'HTML Settings', 'litespeed-cache' ),\n\t'settings_media'        => esc_html__( 'Media Settings', 'litespeed-cache' ),\n\t'settings_vpi'          => esc_html__( 'VPI', 'litespeed-cache' ),\n\t'settings_media_exc'    => esc_html__( 'Media Excludes', 'litespeed-cache' ),\n\t'settings_localization' => esc_html__( 'Localization', 'litespeed-cache' ),\n\t'settings_tuning'       => esc_html__( 'Tuning', 'litespeed-cache' ),\n\t'settings_tuning_css'   => esc_html__( 'Tuning', 'litespeed-cache' ) . ' - CSS',\n);\n\n?>\n\n<div class=\"wrap\">\n\t<h1 class=\"litespeed-h1\">\n\t\t<?php esc_html_e( 'LiteSpeed Cache Page Optimization', 'litespeed-cache' ); ?>\n\t</h1>\n\t<span class=\"litespeed-desc\">\n\t\tv<?php echo esc_html( Core::VER ); ?>\n\t</span>\n\t<hr class=\"wp-header-end\">\n</div>\n\n<div class=\"litespeed-wrap\">\n\n\t<div class=\"litespeed-callout notice notice-warning inline\">\n\t\t<h4><?php esc_html_e( 'NOTICE', 'litespeed-cache' ); ?></h4>\n\t\t<p><?php esc_html_e( 'Please test thoroughly when enabling any option in this list. After changing Minify/Combine settings, please do a Purge All action.', 'litespeed-cache' ); ?></p>\n\t</div>\n\n\t<h2 class=\"litespeed-header nav-tab-wrapper\">\n\t\t<?php GUI::display_tab_list( $menu_list ); ?>\n\t</h2>\n\n\t<div class=\"litespeed-body\">\n\t<?php\n\t\t$this->form_action();\n\n\t\t// Include all tpl for faster UE\n\t\tforeach ( $menu_list as $tab_key => $tab_val ) {\n\t\t\t?>\n\t\t\t<div data-litespeed-layout='<?php echo esc_attr( $tab_key ); ?>'>\n\t\t\t\t<?php require LSCWP_DIR . 'tpl/page_optm/' . $tab_key . '.tpl.php'; ?>\n\t\t\t</div>\n\t\t\t<?php\n\t\t}\n\n\t\t$this->form_end();\n\t?>\n\t</div>\n\n</div>",
    "plugins/litespeed-cache/tpl/page_optm/settings_media.tpl.php": "<?php\n/**\n * LiteSpeed Cache Media Settings\n *\n * Renders the media settings interface for LiteSpeed Cache, including lazy loading, placeholders, and image optimization options.\n *\n * @package LiteSpeed\n * @since 1.0.0\n */\n\nnamespace LiteSpeed;\n\ndefined( 'WPINC' ) || exit;\n\n$__admin_display     = Admin_Display::cls();\n$placeholder_summary = Placeholder::get_summary();\n$closest_server      = Cloud::get_summary( 'server.' . Cloud::SVC_LQIP );\n\n$lqip_queue = $this->load_queue( 'lqip' );\n\n$scaled_size = apply_filters( 'big_image_size_threshold', 2560 ) . 'px';\n\n?>\n\n<h3 class=\"litespeed-title-short\">\n\t<?php esc_html_e( 'Media Settings', 'litespeed-cache' ); ?>\n\t<?php Doc::learn_more( 'https://docs.litespeedtech.com/lscache/lscwp/pageopt/#media-settings-tab' ); ?>\n</h3>\n\n<table class=\"wp-list-table striped litespeed-table\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_MEDIA_LAZY; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_switch( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'Load images only when they enter the viewport.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<?php esc_html_e( 'This can improve page loading time by reducing initial HTTP requests.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<br />\n\t\t\t\t\t<font class=\"litespeed-success\">\n\t\t\t\t\t\t💡\n\t\t\t\t\t\t<a href=\"https://docs.litespeedtech.com/lscache/lscwp/pageopt/#lazy-load-images\" target=\"_blank\"><?php esc_html_e( 'Adding Style to Your Lazy-Loaded Images', 'litespeed-cache' ); ?></a>\n\t\t\t\t\t</font>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_MEDIA_LAZY_PLACEHOLDER; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_input( $option_id, 'litespeed-input-long' ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'Specify a base64 image to be used as a simple placeholder while images finish loading.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<br /><?php printf( esc_html__( 'This can be predefined in %2$s as well using constant %1$s, with this setting taking priority.', 'litespeed-cache' ), '<code>LITESPEED_PLACEHOLDER</code>', '<code>wp-config.php</code>' ); ?>\n\t\t\t\t\t<br /><?php printf( esc_html__( 'By default a gray image placeholder %s will be used.', 'litespeed-cache' ), '<code>data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=</code>' ); ?>\n\t\t\t\t\t<br /><?php printf( esc_html__( 'For example, %s can be used for a transparent placeholder.', 'litespeed-cache' ), '<code>data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7</code>' ); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_MEDIA_PLACEHOLDER_RESP; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_switch( $option_id ); ?>\n\t\t\t\t<?php Doc::maybe_on_by_gm( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'Responsive image placeholders can help to reduce layout reshuffle when images are loaded.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<?php esc_html_e( 'This will generate the placeholder with same dimensions as the image if it has the width and height attributes.', 'litespeed-cache' ); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_MEDIA_PLACEHOLDER_RESP_SVG; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_input( $option_id, 'litespeed-input-long' ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'Specify an SVG to be used as a placeholder when generating locally.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<?php esc_html_e( 'It will be converted to a base64 SVG placeholder on-the-fly.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<br /><?php printf( esc_html__( 'Variables %s will be replaced with the corresponding image properties.', 'litespeed-cache' ), '<code>{width} {height}</code>' ); ?>\n\t\t\t\t\t<br /><?php printf( esc_html__( 'Variables %s will be replaced with the configured background color.', 'litespeed-cache' ), '<code>{color}</code>' ); ?>\n\t\t\t\t\t<br /><?php $this->recommended( $option_id ); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_MEDIA_PLACEHOLDER_RESP_COLOR; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_input( $option_id, null, null, 'color' ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'Specify the responsive placeholder SVG color.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<?php $this->recommended( $option_id ); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_MEDIA_LQIP; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_switch( $option_id ); ?>\n\t\t\t\t<?php Doc::maybe_on_by_gm( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'Use QUIC.cloud LQIP (Low Quality Image Placeholder) generator service for responsive image previews while loading.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<br /><?php esc_html_e( 'Keep this off to use plain color placeholders.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<?php Doc::learn_more( 'https://docs.litespeedtech.com/lscache/lscwp/pageopt/#lqip-cloud-generator' ); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_MEDIA_LQIP_QUAL; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_input( $option_id, 'litespeed-input-short' ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'Specify the quality when generating LQIP.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<br /><?php esc_html_e( 'Larger number will generate higher resolution quality placeholder, but will result in larger files which will increase page size and consume more points.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<?php $this->recommended( $option_id ); ?>\n\t\t\t\t\t<?php $this->_validate_ttl( $option_id, 1, 20 ); ?>\n\t\t\t\t\t<br />💡 <?php printf( esc_html__( 'Changes to this setting do not apply to already-generated LQIPs. To regenerate existing LQIPs, please %s first from the admin bar menu.', 'litespeed-cache' ), '<code>' . esc_html__( 'Purge All', 'litespeed-cache' ) . ' - ' . esc_html__( 'LQIP Cache', 'litespeed-cache' ) . '</code>' ); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_MEDIA_LQIP_MIN_W; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_input( $option_id, 'litespeed-input-short' ); ?> x\n\t\t\t\t<?php $this->build_input( Base::O_MEDIA_LQIP_MIN_H, 'litespeed-input-short' ); ?>\n\t\t\t\t<?php esc_html_e( 'pixels', 'litespeed-cache' ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'LQIP requests will not be sent for images where both width and height are smaller than these dimensions.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<?php $this->recommended( $option_id ); ?>\n\t\t\t\t\t<?php $this->_validate_ttl( $option_id, 10, 800 ); ?>\n\t\t\t\t\t<?php $this->_validate_ttl( Base::O_MEDIA_LQIP_MIN_H, 10, 800 ); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_MEDIA_PLACEHOLDER_RESP_ASYNC; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_switch( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'Automatically generate LQIP in the background via a cron-based queue.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<?php\n\t\t\t\t\tprintf(\n\t\t\t\t\t\tesc_html__( 'If set to %1$s, before the placeholder is localized, the %2$s configuration will be used.', 'litespeed-cache' ),\n\t\t\t\t\t\t'<code>' . esc_html__( 'ON', 'litespeed-cache' ) . '</code>',\n\t\t\t\t\t\t'<code>' . esc_html( Lang::title( Base::O_MEDIA_PLACEHOLDER_RESP_SVG ) ) . '</code>'\n\t\t\t\t\t);\n\t\t\t\t\t?>\n\t\t\t\t\t<?php printf( esc_html__( 'If set to %s this is done in the foreground, which may slow down page load.', 'litespeed-cache' ), '<code>' . esc_html__( 'OFF', 'litespeed-cache' ) . '</code>' ); ?>\n\t\t\t\t\t<?php Doc::learn_more( 'https://docs.litespeedtech.com/lscache/lscwp/pageopt/#generate-lqip-in-background' ); ?>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php if ( $placeholder_summary ) : ?>\n\t\t\t\t\t\t<?php if ( ! empty( $placeholder_summary['last_request'] ) ) : ?>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<?php echo esc_html__( 'Last generated', 'litespeed-cache' ) . ': <code>' . esc_html( Utility::readable_time( $placeholder_summary['last_request'] ) ) . '</code>'; ?>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t<?php endif; ?>\n\n\t\t\t\t\t<?php if ( $closest_server ) : ?>\n\t\t\t\t\t\t<a class=\"litespeed-redetect\" href=\"<?php echo esc_url( Utility::build_url( Router::ACTION_CLOUD, Cloud::TYPE_REDETECT_CLOUD, false, null, array( 'svc' => Cloud::SVC_LQIP ) ) ); ?>\" data-balloon-pos=\"up\" data-balloon-break aria-label='<?php printf( esc_html__( 'Current closest Cloud server is %s. Click to redetect.', 'litespeed-cache' ), esc_html( $closest_server ) ); ?>' data-litespeed-cfm=\"<?php esc_html_e( 'Are you sure you want to redetect the closest cloud server for this service?', 'litespeed-cache' ); ?>\"><i class='litespeed-quic-icon'></i> <?php esc_html_e( 'Redetect', 'litespeed-cache' ); ?></a>\n\t\t\t\t\t<?php endif; ?>\n\n\t\t\t\t\t<?php if ( ! empty( $lqip_queue ) ) : ?>\n\t\t\t\t\t\t<div class=\"litespeed-callout notice notice-warning inline\">\n\t\t\t\t\t\t\t<h4>\n\t\t\t\t\t\t\t\t<?php esc_html_e( 'Size list in queue waiting for cron', 'litespeed-cache' ); ?> ( <?php echo esc_html( count( $lqip_queue ) ); ?> )\n\t\t\t\t\t\t\t\t<a href=\"<?php echo esc_url( Utility::build_url( Router::ACTION_PLACEHOLDER, Placeholder::TYPE_CLEAR_Q ) ); ?>\" class=\"button litespeed-btn-warning litespeed-right\"><?php esc_html_e( 'Clear', 'litespeed-cache' ); ?></a>\n\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\t\t$i = 0;\n\t\t\t\t\t\t\t\tforeach ( $lqip_queue as $k => $v ) {\n\t\t\t\t\t\t\t\t\tif ( $i++ > 20 ) {\n\t\t\t\t\t\t\t\t\t\techo '...';\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\techo esc_html( $v );\n\t\t\t\t\t\t\t\t\techo '<br />';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<a href=\"<?php echo esc_url( Utility::build_url( Router::ACTION_PLACEHOLDER, Placeholder::TYPE_GENERATE ) ); ?>\" class=\"button litespeed-btn-success\">\n\t\t\t\t\t\t\t<?php esc_html_e( 'Run Queue Manually', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<?php Doc::queue_issues(); ?>\n\t\t\t\t\t<?php endif; ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_MEDIA_IFRAME_LAZY; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_switch( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'Load iframes only when they enter the viewport.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<?php esc_html_e( 'This can improve page loading time by reducing initial HTTP requests.', 'litespeed-cache' ); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_MEDIA_ADD_MISSING_SIZES; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_switch( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'Set an explicit width and height on image elements to reduce layout shifts and improve CLS (a Core Web Vitals metric).', 'litespeed-cache' ); ?>\n\t\t\t\t\t<?php Doc::learn_more( 'https://web.dev/optimize-cls/#images-without-dimensions' ); ?>\n\n\t\t\t\t\t<br />\n\t\t\t\t\t<font class=\"litespeed-warning litespeed-left10\">\n\t\t\t\t\t\t⚠️ <?php esc_html_e( 'Notice', 'litespeed-cache' ); ?>: <?php printf( esc_html__( '%s must be turned ON for this setting to work.', 'litespeed-cache' ), '<code>' . esc_html( Lang::title( Base::O_MEDIA_LAZY ) ) . '</code>' ); ?>\n\t\t\t\t\t</font>\n\n\t\t\t\t\t<br />\n\t\t\t\t\t<font class=\"litespeed-success\">\n\t\t\t\t\t\t<?php esc_html_e( 'API', 'litespeed-cache' ); ?>:\n\t\t\t\t\t\t<?php printf( esc_html__( 'Use %1$s to bypass remote image dimension check when %2$s is ON.', 'litespeed-cache' ), '<code>add_filter( \"litespeed_media_ignore_remote_missing_sizes\", \"__return_true\" );</code>', '<code>' . esc_html( Lang::title( Base::O_MEDIA_ADD_MISSING_SIZES ) ) . '</code>' ); ?>\n\t\t\t\t\t</font>\n\t\t\t\t\t<?php $__admin_display->_check_overwritten( Base::O_MEDIA_ADD_MISSING_SIZES ); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_IMG_OPTM_JPG_QUALITY; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_input( $option_id, 'litespeed-input-short' ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'The image compression quality setting of WordPress out of 100.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<?php $this->recommended( $option_id ); ?>\n\t\t\t\t\t<?php $this->_validate_ttl( $option_id, 0, 100 ); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_MEDIA_AUTO_RESCALE_ORI; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_switch( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'Automatically replace large images with scaled versions.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<?php esc_html_e( 'Scaled size threshold', 'litespeed-cache' ); ?>: <code><?php echo wp_kses_post( $scaled_size ); ?></code>\n\t\t\t\t\t<br />\n\t\t\t\t\t<span class=\"litespeed-success\">\n\t\t\t\t\t\tAPI:\n\t\t\t\t\t\t<?php\n\t\t\t\t\t\tprintf(\n\t\t\t\t\t\t\tesc_html__( 'Filter %s available to change threshold.', 'litespeed-cache' ),\n\t\t\t\t\t\t\t'<code>big_image_size_threshold</code>'\n\t\t\t\t\t\t);\n\t\t\t\t\t\t?>\n\t\t\t\t\t\t<a href=\"https://developer.wordpress.org/reference/hooks/big_image_size_threshold/\" target=\"_blank\" class=\"litespeed-learn-more\">\n\t\t\t\t\t\t\t<?php esc_html_e('Learn More', 'litespeed-cache'); ?>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</span>\n\n\t\t\t\t\t<br />\n\t\t\t\t\t<font class=\"litespeed-danger\">\n\t\t\t\t\t\t🚨\n\t\t\t\t\t\t<?php esc_html_e( 'This is irreversible.', 'litespeed-cache' ); ?>\n\t\t\t\t\t</font>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>",
    "plugins/litespeed-cache/tpl/page_optm/settings_vpi.tpl.php": "<?php\n/**\n * LiteSpeed Cache Viewport Images Settings\n *\n * Renders the Viewport Images settings interface for LiteSpeed Cache, allowing configuration of viewport image detection and exclusions.\n *\n * @package LiteSpeed\n * @since 1.0.0\n */\n\nnamespace LiteSpeed;\n\ndefined( 'WPINC' ) || exit;\n\n$summary        = VPI::get_summary();\n$closest_server = Cloud::get_summary( 'server.' . Cloud::SVC_VPI );\n\n$queue           = $this->load_queue( 'vpi' );\n$vpi_service_hot = $this->cls( 'Cloud' )->service_hot( Cloud::SVC_VPI );\n?>\n\n<h3 class=\"litespeed-title-short\">\n\t<?php esc_html_e( 'Viewport Images', 'litespeed-cache' ); ?>\n\t<?php Doc::learn_more( 'https://docs.litespeedtech.com/lscache/lscwp/pageopt/#vpi-settings-tab' ); ?>\n</h3>\n\n<table class=\"wp-list-table striped litespeed-table\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_MEDIA_VPI; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_switch( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'When you use Lazy Load, it will delay the loading of all images on a page.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<br /><?php esc_html_e( 'The Viewport Images service detects which images appear above the fold, and excludes them from lazy load.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<br /><?php esc_html_e( \"This enables the page's initial screenful of imagery to be fully displayed without delay.\", 'litespeed-cache' ); ?>\n\n\t\t\t\t\t<?php if ( ! $this->conf( Base::O_MEDIA_LAZY ) ) : ?>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<font class=\"litespeed-warning litespeed-left10\">\n\t\t\t\t\t\t\t⚠️ <?php esc_html_e( 'Notice', 'litespeed-cache' ); ?>: <?php printf( esc_html__( '%s must be turned ON for this setting to work.', 'litespeed-cache' ), '<code>' . esc_html( Lang::title( Base::O_MEDIA_LAZY ) ) . '</code>' ); ?>\n\t\t\t\t\t\t</font>\n\t\t\t\t\t<?php endif; ?>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"litespeed-desc litespeed-left20\">\n\t\t\t\t\t<?php if ( $summary ) : ?>\n\t\t\t\t\t\t<?php if ( ! empty( $summary['last_request'] ) ) : ?>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<?php echo esc_html__( 'Last generated', 'litespeed-cache' ) . ': <code>' . esc_html( Utility::readable_time( $summary['last_request'] ) ) . '</code>'; ?>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t<?php endif; ?>\n\n\t\t\t\t\t<?php if ( $closest_server ) : ?>\n\t\t\t\t\t\t<a class='litespeed-redetect' href=\"<?php echo esc_url( Utility::build_url( Router::ACTION_CLOUD, Cloud::TYPE_REDETECT_CLOUD, false, null, array( 'svc' => Cloud::SVC_VPI ) ) ); ?>\" data-balloon-pos=\"up\" data-balloon-break aria-label='<?php printf( esc_html__( 'Current closest Cloud server is %s. Click to redetect.', 'litespeed-cache' ), esc_html( $closest_server ) ); ?>' data-litespeed-cfm=\"<?php esc_html_e( 'Are you sure you want to redetect the closest cloud server for this service?', 'litespeed-cache' ); ?>\"><i class='litespeed-quic-icon'></i> <?php esc_html_e( 'Redetect', 'litespeed-cache' ); ?></a>\n\t\t\t\t\t<?php endif; ?>\n\n\t\t\t\t\t<?php if ( ! empty( $queue ) ) : ?>\n\t\t\t\t\t\t<div class=\"litespeed-callout notice notice-warning inline\">\n\t\t\t\t\t\t\t<h4>\n\t\t\t\t\t\t\t\t<?php printf( esc_html__( 'URL list in %s queue waiting for cron', 'litespeed-cache' ), 'VPI' ); ?> ( <?php echo esc_html( count( $queue ) ); ?> )\n\t\t\t\t\t\t\t\t<a href=\"<?php echo esc_url( Utility::build_url( Router::ACTION_VPI, VPI::TYPE_CLEAR_Q ) ); ?>\" class=\"button litespeed-btn-warning litespeed-right\"><?php esc_html_e( 'Clear', 'litespeed-cache' ); ?></a>\n\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\t\t$i = 0;\n\t\t\t\t\t\t\t\tforeach ( $queue as $k => $v ) {\n\t\t\t\t\t\t\t\t\tif ( $i++ > 20 ) {\n\t\t\t\t\t\t\t\t\t\techo '...';\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif ( ! is_array( $v ) ) {\n\t\t\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif ( ! empty( $v['_status'] ) ) {\n\t\t\t\t\t\t\t\t\t\techo '<span class=\"litespeed-success\">';\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\techo esc_html( $v['url'] );\n\t\t\t\t\t\t\t\t\tif ( ! empty( $v['_status'] ) ) {\n\t\t\t\t\t\t\t\t\t\techo '</span>';\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t$pos = strpos( $k, ' ' );\n\t\t\t\t\t\t\t\t\tif ( $pos ) {\n\t\t\t\t\t\t\t\t\t\techo ' (' . esc_html__( 'Vary Group', 'litespeed-cache' ) . ':' . esc_html( substr( $k, 0, $pos ) ) . ')';\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif ( $v['is_mobile'] ) {\n\t\t\t\t\t\t\t\t\t\techo ' <span data-balloon-pos=\"up\" aria-label=\"mobile\">📱</span>';\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\techo '<br />';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<?php if ( $vpi_service_hot ) : ?>\n\t\t\t\t\t\t\t<button class=\"button button-secondary\" disabled>\n\t\t\t\t\t\t\t\t<?php printf( esc_html__( 'Run %s Queue Manually', 'litespeed-cache' ), 'VPI' ); ?>\n\t\t\t\t\t\t\t\t- <?php printf( esc_html__( 'Available after %d second(s)', 'litespeed-cache' ), esc_html( $vpi_service_hot ) ); ?>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<?php else : ?>\n\t\t\t\t\t\t\t<a href=\"<?php echo esc_url( Utility::build_url( Router::ACTION_VPI, VPI::TYPE_GEN ) ); ?>\" class=\"button litespeed-btn-success\">\n\t\t\t\t\t\t\t\t<?php printf( esc_html__( 'Run %s Queue Manually', 'litespeed-cache' ), 'VPI' ); ?>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t<?php Doc::queue_issues(); ?>\n\t\t\t\t\t<?php endif; ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_MEDIA_VPI_CRON; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_switch( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'Enable Viewport Images auto generation cron.', 'litespeed-cache' ); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>",
    "plugins/litespeed-cache/tpl/page_optm/settings_tuning_css.tpl.php": "<?php\n/**\n * LiteSpeed Cache Tuning CSS Settings\n *\n * Renders the Tuning CSS settings interface for LiteSpeed Cache, allowing configuration of CSS exclusions and optimizations.\n *\n * @package LiteSpeed\n * @since 1.0.0\n */\n\nnamespace LiteSpeed;\n\ndefined( 'WPINC' ) || exit;\n\n?>\n<h3 class=\"litespeed-title-short\">\n\t<?php esc_html_e( 'Tuning CSS Settings', 'litespeed-cache' ); ?>\n\t<?php Doc::learn_more( 'https://docs.litespeedtech.com/lscache/lscwp/pageopt/#tuning-css-settings-tab' ); ?>\n</h3>\n\n<table class=\"wp-list-table striped litespeed-table\">\n<tbody>\n\t<tr>\n\t\t<th>\n\t\t\t<?php $option_id = Base::O_OPTM_CSS_EXC; ?>\n\t\t\t<?php $this->title( $option_id ); ?>\n\t\t</th>\n\t\t<td>\n\t\t\t<?php $this->build_textarea( $option_id ); ?>\n\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t<?php esc_html_e( 'Listed CSS files or inline CSS code will not be minified or combined.', 'litespeed-cache' ); ?>\n\t\t\t\t<?php Doc::full_or_partial_url(); ?>\n\t\t\t\t<?php Doc::one_per_line(); ?>\n\t\t\t\t<br /><font class=\"litespeed-success\">\n\t\t\t\t\t<?php echo esc_html_e( 'API', 'litespeed-cache' ); ?>:\n\t\t\t\t\t<?php printf( esc_html__( 'Filter %s is supported.', 'litespeed-cache' ), '<code>litespeed_optimize_css_excludes</code>' ); ?>\n\t\t\t\t\t<?php printf( esc_html__( 'Elements with attribute %s in html code will be excluded.', 'litespeed-cache' ), '<code>data-no-optimize=\"1\"</code>' ); ?>\n\t\t\t\t\t<br /><?php echo esc_html_e( 'Predefined list will also be combined with the above settings', 'litespeed-cache' ); ?>: <a href=\"https://github.com/litespeedtech/lscache_wp/blob/dev/data/css_excludes.txt\" target=\"_blank\">https://github.com/litespeedtech/lscache_wp/blob/dev/data/css_excludes.txt</a>\n\t\t\t\t</font>\n\t\t\t</div>\n\t\t</td>\n\t</tr>\n\n\t<tr>\n\t\t<th>\n\t\t\t<?php $option_id = Base::O_OPTM_UCSS_FILE_EXC_INLINE; ?>\n\t\t\t<?php $this->title( $option_id ); ?>\n\t\t</th>\n\t\t<td>\n\t\t\t<?php $this->build_textarea( $option_id ); ?>\n\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t<?php esc_html_e( 'Listed CSS files will be excluded from UCSS and saved to inline.', 'litespeed-cache' ); ?>\n\t\t\t\t<?php Doc::full_or_partial_url(); ?>\n\t\t\t\t<?php Doc::one_per_line(); ?>\n\t\t\t</div>\n\t\t</td>\n\t</tr>\n\n\t<tr>\n\t\t<th>\n\t\t\t<?php $option_id = Base::O_OPTM_UCSS_SELECTOR_WHITELIST; ?>\n\t\t\t<?php $this->title( $option_id ); ?>\n\t\t</th>\n\t\t<td>\n\t\t\t<?php $this->build_textarea( $option_id ); ?>\n\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t<?php esc_html_e( 'List the CSS selectors whose styles should always be included in UCSS.', 'litespeed-cache' ); ?>\n\t\t\t\t<?php Doc::one_per_line(); ?>\n\t\t\t\t<?php Doc::learn_more( 'https://docs.litespeedtech.com/lscache/lscwp/pageopt/#ucss-selector-allowlist', esc_html__( 'Learn more', 'litespeed-cache' ) ); ?>.\n\t\t\t\t<br /><?php printf( esc_html__( 'Wildcard %s supported.', 'litespeed-cache' ), '<code>*</code>' ); ?>\n\t\t\t\t<div class=\"litespeed-callout notice notice-warning inline\">\n\t\t\t\t\t<h4><?php esc_html_e( 'Note', 'litespeed-cache' ); ?></h4>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<?php esc_html_e( 'The selector must exist in the CSS. Parent classes in the HTML will not work.', 'litespeed-cache' ); ?>\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t\t<font class=\"litespeed-success\">\n\t\t\t\t\t<?php esc_html_e( 'Predefined list will also be combined w/ the above settings', 'litespeed-cache' ); ?>: <a href=\"https://github.com/litespeedtech/lscache_wp/blob/dev/data/ucss_whitelist.txt\" target=\"_blank\">https://github.com/litespeedtech/lscache_wp/blob/dev/data/ucss_whitelist.txt</a>\n\t\t\t\t</font>\n\t\t\t</div>\n\t\t</td>\n\t</tr>\n\n\t<tr>\n\t\t<th>\n\t\t\t<?php $option_id = Base::O_OPTM_UCSS_EXC; ?>\n\t\t\t<?php $this->title( $option_id ); ?>\n\t\t</th>\n\t\t<td>\n\t\t\t<?php $this->build_textarea( $option_id ); ?>\n\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t<?php esc_html_e( 'Listed URI will not generate UCSS.', 'litespeed-cache' ); ?>\n\t\t\t\t<?php Doc::full_or_partial_url(); ?>\n\t\t\t\t<?php Doc::one_per_line(); ?>\n\t\t\t\t<br /><span class=\"litespeed-success\">\n\t\t\t\t\t<?php esc_html_e( 'API', 'litespeed-cache' ); ?>:\n\t\t\t\t\t<?php printf( esc_html__( 'Filter %s is supported.', 'litespeed-cache' ), '<code>litespeed_ucss_exc</code>' ); ?>\n\t\t\t\t</span>\n\t\t\t\t<br /><font class=\"litespeed-success\"><?php esc_html_e( 'API', 'litespeed-cache' ); ?>: <?php printf( esc_html__( 'Use %1$s to generate one single UCSS for the pages which page type is %2$s while other page types still per URL.', 'litespeed-cache' ), \"<code>add_filter( 'litespeed_ucss_per_pagetype', function(){return get_post_type() == 'page';} );</code>\", '<code>page</code>' ); ?></font>\n\t\t\t\t<br /><font class=\"litespeed-success\"><?php esc_html_e( 'API', 'litespeed-cache' ); ?>: <?php printf( esc_html__( 'Use %1$s to bypass UCSS for the pages which page type is %2$s.', 'litespeed-cache' ), \"<code>add_action( 'litespeed_optm', function(){get_post_type() == 'page' && do_action( 'litespeed_conf_force', 'optm-ucss', false );});</code>\", '<code>page</code>' ); ?></font>\n\t\t\t</div>\n\t\t</td>\n\t</tr>\n\n\t<tr>\n\t\t<th>\n\t\t\t<?php $option_id = Base::O_OPTM_CCSS_SEP_POSTTYPE; ?>\n\t\t\t<?php $this->title( $option_id ); ?>\n\t\t</th>\n\t\t<td>\n\t\t\t<?php $this->build_textarea( $option_id ); ?>\n\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t<?php esc_html_e( 'List post types where each item of that type should have its own CCSS generated.', 'litespeed-cache' ); ?>\n\t\t\t\t<?php printf( esc_html__( 'For example, if every Page on the site has different formatting, enter %s in the box. Separate critical CSS files will be stored for every Page on the site.', 'litespeed-cache' ), '<code>page</code>' ); ?>\n\t\t\t\t<?php Doc::learn_more( 'https://docs.litespeedtech.com/lscache/lscwp/pageopt/#separate-ccss-cache-post-types_1' ); ?>\n\t\t\t</div>\n\t\t</td>\n\t</tr>\n\n\t<tr>\n\t\t<th>\n\t\t\t<?php $option_id = Base::O_OPTM_CCSS_SEP_URI; ?>\n\t\t\t<?php $this->title( $option_id ); ?>\n\t\t</th>\n\t\t<td>\n\t\t\t<?php $this->build_textarea( $option_id ); ?>\n\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t<?php esc_html_e( 'Separate critical CSS files will be generated for paths containing these strings.', 'litespeed-cache' ); ?>\n\t\t\t\t<?php $this->_uri_usage_example(); ?>\n\t\t\t</div>\n\t\t</td>\n\t</tr>\n\n\t<tr>\n\t\t<th>\n\t\t\t<?php $option_id = Base::O_OPTM_CCSS_SELECTOR_WHITELIST; ?>\n\t\t\t<?php $this->title( $option_id ); ?>\n\t\t</th>\n\t\t<td>\n\t\t\t<?php $this->build_textarea( $option_id ); ?>\n\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t<?php esc_html_e( 'List the CSS selectors whose styles should always be included in CCSS.', 'litespeed-cache' ); ?>\n\t\t\t\t<?php Doc::one_per_line(); ?>\n\t\t\t\t<?php Doc::learn_more( 'https://docs.litespeedtech.com/lscache/lscwp/pageopt/#ccss-selector-allowlist', esc_html__( 'Learn more', 'litespeed-cache' ) ); ?>.\n\t\t\t\t<br /><?php printf( esc_html__( 'Wildcard %s supported.', 'litespeed-cache' ), '<code>*</code>' ); ?>\n\t\t\t\t<div class=\"litespeed-callout notice notice-warning inline\">\n\t\t\t\t\t<h4><?php esc_html_e( 'Note', 'litespeed-cache' ); ?></h4>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<?php esc_html_e( 'Selectors must exist in the CSS. Parent classes in the HTML will not work.', 'litespeed-cache' ); ?>\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t\t<font class=\"litespeed-success\">\n\t\t\t\t\t<?php esc_html_e( 'Predefined list will also be combined w/ the above settings', 'litespeed-cache' ); ?>: <a href=\"https://github.com/litespeedtech/lscache_wp/blob/dev/data/ccss_whitelist.txt\" target=\"_blank\">https://github.com/litespeedtech/lscache_wp/blob/dev/data/ccss_whitelist.txt</a>\n\t\t\t\t</font>\n\t\t\t</div>\n\t\t</td>\n\t</tr>\n\n\t<tr>\n\t\t<th>\n\t\t\t<?php $option_id = Base::O_OPTM_CCSS_CON; ?>\n\t\t\t<?php $this->title( $option_id ); ?>\n\t\t</th>\n\t\t<td>\n\t\t\t<?php $this->build_textarea( $option_id ); ?>\n\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t<?php printf( esc_html__( 'Specify critical CSS rules for above-the-fold content when enabling %s.', 'litespeed-cache' ), esc_html__( 'Load CSS Asynchronously', 'litespeed-cache' ) ); ?>\n\t\t\t</div>\n\t\t</td>\n\t</tr>\n\n</tbody></table>",
    "plugins/litespeed-cache/tpl/esi_widget_edit.php": "<?php\n/**\n * LiteSpeed Cache Widget Settings\n *\n * Configures ESI settings for widgets in LiteSpeed Cache.\n *\n * @package LiteSpeed\n * @since 1.0.0\n */\n\nnamespace LiteSpeed;\n\ndefined( 'WPINC' ) || exit;\n\n$options = ! empty( $instance[ Base::OPTION_NAME ] ) ? $instance[ Base::OPTION_NAME ] : array();\n\nif ( empty( $options ) ) {\n\t$options = array(\n\t\tESI::WIDGET_O_ESIENABLE => Base::VAL_OFF,\n\t\tESI::WIDGET_O_TTL       => '28800',\n\t);\n\n\tadd_filter( 'litespeed_widget_default_options', 'LiteSpeed\\ESI::widget_default_options', 10, 2 );\n\n\t$options = apply_filters( 'litespeed_widget_default_options', $options, $widget );\n}\n\nif ( empty( $options ) ) {\n\t$esi = Base::VAL_OFF;\n\t$ttl = '28800';\n} else {\n\t$esi = $options[ ESI::WIDGET_O_ESIENABLE ];\n\t$ttl = $options[ ESI::WIDGET_O_TTL ];\n}\n\n$display = Admin_Display::cls();\n\n?>\n<div class=\"litespeed-widget-setting\">\n\n\t<h4><?php esc_html_e( 'LiteSpeed Cache', 'litespeed-cache' ); ?>:</h4>\n\n\t<b><?php esc_html_e( 'Enable ESI', 'litespeed-cache' ); ?>:</b>\n\t&nbsp;\n\t<div class=\"litespeed-inline\">\n\t\t<div class=\"litespeed-switch litespeed-mini\">\n\t\t<?php\n\t\t\t$esi_option = ESI::WIDGET_O_ESIENABLE;\n\t\t\t$name       = $widget->get_field_name( $esi_option );\n\n\t\t\t$cache_status_list = array(\n\t\t\t\tarray( Base::VAL_ON, esc_html__( 'Public', 'litespeed-cache' ) ),\n\t\t\t\tarray( Base::VAL_ON2, esc_html__( 'Private', 'litespeed-cache' ) ),\n\t\t\t\tarray( Base::VAL_OFF, esc_html__( 'Disable', 'litespeed-cache' ) ),\n\t\t\t);\n\n\t\t\tforeach ( $cache_status_list as $v ) {\n\t\t\t\tlist( $value, $label ) = $v;\n\t\t\t\t$id_attr               = $widget->get_field_id( $esi_option ) . '_' . $value;\n\t\t\t\t$checked               = $esi === $value ? 'checked' : '';\n\t\t\t\t?>\n\t\t\t\t<input type=\"radio\" autocomplete=\"off\" name=\"<?php echo esc_attr($name); ?>\" id=\"<?php echo esc_attr($id_attr); ?>\" value=\"<?php echo esc_attr( $value ); ?>\" <?php echo esc_attr($checked); ?> />\n\t\t\t\t<label for=\"<?php echo esc_attr($id_attr); ?>\"><?php echo esc_html( $label ); ?></label>\n\t\t\t\t<?php\n\t\t\t}\n\t\t?>\n\t\t</div>\n\t</div>\n\t<br /><br />\n\n\t<b><?php esc_html_e( 'Widget Cache TTL', 'litespeed-cache' ); ?>:</b>\n\t&nbsp;\n\t<?php\n\t\t$ttl_option = ESI::WIDGET_O_TTL;\n\t\t$name       = $widget->get_field_name( $ttl_option );\n\t\t?>\n\t\t<input type=\"text\" class=\"regular-text litespeed-reset\" name=\"<?php echo esc_attr($name); ?>\" value=\"<?php echo esc_attr($ttl); ?>\" size=\"7\" />\n\t<?php esc_html_e( 'seconds', 'litespeed-cache' ); ?>\n\n\t<p class=\"install-help\">\n\t\t<?php esc_html_e( 'Recommended value: 28800 seconds (8 hours).', 'litespeed-cache' ); ?>\n\t\t<?php esc_html_e( 'A TTL of 0 indicates do not cache.', 'litespeed-cache' ); ?>\n\t</p>\n</div>\n\n<br />",
    "plugins/litespeed-cache/tpl/img_optm/summary.tpl.php": "<?php\n/**\n * LiteSpeed Cache Image Optimization Summary\n *\n * Manages the image optimization summary interface for LiteSpeed Cache.\n *\n * @package LiteSpeed\n * @since 1.0.0\n */\n\nnamespace LiteSpeed;\n\ndefined( 'WPINC' ) || exit;\n\n$closest_server = Cloud::get_summary( 'server.' . Cloud::SVC_IMG_OPTM );\n$usage_cloud    = Cloud::get_summary( 'usage.' . Cloud::SVC_IMG_OPTM );\n$allowance      = Cloud::cls()->allowance( Cloud::SVC_IMG_OPTM );\n\n$img_optm = Img_Optm::cls();\n\n$wet_limit = $img_optm->wet_limit();\n$img_count = $img_optm->img_count();\n\n$optm_summary = Img_Optm::get_summary();\n\nlist($last_run, $is_running) = $img_optm->cron_running( false );\n$finished_percentage         = 0;\nif ( $img_count['groups_all'] ) {\n\t$finished_percentage = 100 - floor( $img_count['groups_new'] * 100 / $img_count['groups_all'] );\n}\nif ( 100 === $finished_percentage && $img_count['groups_new'] ) {\n\t$finished_percentage = 99;\n}\n\n$unfinished_num = 0;\nif ( ! empty( $img_count[ 'img.' . Img_Optm::STATUS_REQUESTED ] ) ) {\n\t$unfinished_num += $img_count[ 'img.' . Img_Optm::STATUS_REQUESTED ];\n}\nif ( ! empty( $img_count[ 'img.' . Img_Optm::STATUS_NOTIFIED ] ) ) {\n\t$unfinished_num += $img_count[ 'img.' . Img_Optm::STATUS_NOTIFIED ];\n}\nif ( ! empty( $img_count[ 'img.' . Img_Optm::STATUS_ERR_FETCH ] ) ) {\n\t$unfinished_num += $img_count[ 'img.' . Img_Optm::STATUS_ERR_FETCH ];\n}\n\n$imgoptm_service_hot = $this->cls( 'Cloud' )->service_hot( Cloud::SVC_IMG_OPTM . '-' . Img_Optm::CLOUD_ACTION_NEW_REQ );\n?>\n<div class=\"litespeed-flex-container litespeed-column-with-boxes\">\n\t<div class=\"litespeed-width-7-10 litespeed-column-left litespeed-image-optim-summary-wrapper\">\n\t\t<div class=\"litespeed-image-optim-summary\">\n\n\t\t\t<h3>\n\t\t\t\t<?php if ( $closest_server ) : ?>\n\t\t\t\t\t<a href=\"<?php echo esc_url( Utility::build_url( Router::ACTION_CLOUD, Cloud::TYPE_REDETECT_CLOUD, false, null, array( 'svc' => Cloud::SVC_IMG_OPTM ) ) ); ?>\" class=\"litespeed-info-button litespeed-redetect\" data-balloon-pos=\"right\" data-balloon-break aria-label=\"<?php printf( esc_html__( 'Current closest Cloud server is %s. Click to redetect.', 'litespeed-cache' ), esc_html( $closest_server ) ); ?>\" data-litespeed-cfm=\"<?php esc_html_e( 'Are you sure you want to redetect the closest cloud server for this service?', 'litespeed-cache' ); ?>\"><span class=\"litespeed-quic-icon\"></span> <?php esc_html_e( 'Redetect', 'litespeed-cache' ); ?></a>\n\t\t\t\t<?php else : ?>\n\t\t\t\t\t<span class=\"litespeed-quic-icon\"></span> <?php esc_html_e( 'Redetect', 'litespeed-cache' ); ?>\n\t\t\t\t<?php endif; ?>\n\t\t\t\t<?php esc_html_e( 'Optimize images with our QUIC.cloud server', 'litespeed-cache' ); ?>\n\t\t\t\t<a href=\"https://docs.litespeedtech.com/lscache/lscwp/imageopt/#image-optimization-summary-tab\" target=\"_blank\" class=\"litespeed-right litespeed-learn-more\"><?php esc_html_e( 'Learn More', 'litespeed-cache' ); ?></a>\n\t\t\t</h3>\n\n\t\t\t<p>\n\t\t\t\t<?php printf( esc_html__( 'You can request a maximum of %s images at once.', 'litespeed-cache' ), '<strong>' . intval( $allowance ) . '</strong>' ); ?>\n\t\t\t</p>\n\n\t\t\t<?php if ( $wet_limit ) : ?>\n\t\t\t\t<p class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'To make sure our server can communicate with your server without any issues and everything works fine, for the few first requests the number of image groups allowed in a single request is limited.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<?php echo esc_html__( 'Current limit is', 'litespeed-cache' ) . ': <strong>' . esc_html( $wet_limit ) . '</strong>'; ?>\n\t\t\t\t</p>\n\t\t\t<?php endif; ?>\n\n\t\t\t<div class=\"litespeed-img-optim-actions\">\n\t\t\t\t<?php if ( $imgoptm_service_hot ) : ?>\n\t\t\t\t\t<button class=\"button button-secondary\" disabled>\n\t\t\t\t\t\t<span class=\"dashicons dashicons-images-alt2\"></span> <?php esc_html_e( 'Send Optimization Request', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t- <?php printf( esc_html__( 'Available after %d second(s)', 'litespeed-cache' ), esc_html( $imgoptm_service_hot ) ); ?>\n\t\t\t\t\t</button>\n\t\t\t\t<?php else : ?>\n\t\t\t\t\t<a data-litespeed-onlyonce class=\"button button-primary\"\n\t\t\t\t\t<?php\n\t\t\t\t\tif ( ! empty( $img_count['groups_new'] ) || ! empty( $img_count[ 'group.' . Img_Optm::STATUS_RAW ] ) ) :\n\t\t\t\t\t\t?>\n\t\t\t\t\t\thref=\"<?php echo esc_url( Utility::build_url( Router::ACTION_IMG_OPTM, Img_Optm::TYPE_NEW_REQ ) ); ?>\"\n\t\t\t\t\t\t<?php\n\t\t\t\t\telse :\n\t\t\t\t\t\t?>\n\t\t\t\t\t\thref=\"javascript:;\" disabled <?php endif; ?>>\n\t\t\t\t\t\t<span class=\"dashicons dashicons-images-alt2\"></span> <?php esc_html_e( 'Send Optimization Request', 'litespeed-cache' ); ?>\n\t\t\t\t\t</a>\n\t\t\t\t<?php endif; ?>\n\n\t\t\t\t<a data-litespeed-onlyonce class=\"button button-secondary\" data-balloon-length=\"large\" data-balloon-pos=\"right\" aria-label=\"<?php esc_html_e( 'Only press the button if the pull cron job is disabled.', 'litespeed-cache' ); ?> <?php esc_html_e( 'Images will be pulled automatically if the cron job is running.', 'litespeed-cache' ); ?>\"\n\t\t\t\t\t<?php\n\t\t\t\t\tif ( ! empty( $img_count[ 'img.' . Img_Optm::STATUS_NOTIFIED ] ) && ! $is_running ) :\n\t\t\t\t\t\t?>\n\t\t\t\t\t\thref=\"<?php echo esc_url( Utility::build_url( Router::ACTION_IMG_OPTM, Img_Optm::TYPE_PULL ) ); ?>\"\n\t\t\t\t\t\t<?php\n\t\t\t\t\telse :\n\t\t\t\t\t\t?>\n\t\t\t\t\t\thref=\"javascript:;\" disabled <?php endif; ?>>\n\t\t\t\t\t<?php esc_html_e( 'Pull Images', 'litespeed-cache' ); ?>\n\t\t\t\t</a>\n\t\t\t</div>\n\n\t\t\t<div>\n\t\t\t\t<h3 class=\"litespeed-title-section\">\n\t\t\t\t\t<?php esc_html_e( 'Optimization Status', 'litespeed-cache' ); ?>\n\t\t\t\t</h3>\n\n\t\t\t\t<div class=\"litespeed-light-code\">\n\n\t\t\t\t\t<?php if ( ! empty( $img_count[ 'group.' . Img_Optm::STATUS_NEW ] ) ) : ?>\n\t\t\t\t\t\t<p class=\"litespeed-success\">\n\t\t\t\t\t\t\t<?php echo esc_html( Lang::img_status( Img_Optm::STATUS_NEW ) ); ?>:\n\t\t\t\t\t\t\t<code>\n\t\t\t\t\t\t\t\t<?php echo esc_html( Admin_Display::print_plural( $img_count['group_new'] ) ); ?>\n\t\t\t\t\t\t\t</code>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t<?php endif; ?>\n\n\t\t\t\t\t<?php if ( ! empty( $img_count[ 'group.' . Img_Optm::STATUS_RAW ] ) ) : ?>\n\t\t\t\t\t\t<p class=\"litespeed-success\">\n\t\t\t\t\t\t\t<?php echo esc_html( Lang::img_status( Img_Optm::STATUS_RAW ) ); ?>:\n\t\t\t\t\t\t\t<code>\n\t\t\t\t\t\t\t\t<?php echo esc_html( Admin_Display::print_plural( $img_count[ 'group.' . Img_Optm::STATUS_RAW ] ) ); ?>\n\t\t\t\t\t\t\t\t(<?php echo esc_html( Admin_Display::print_plural( $img_count[ 'img.' . Img_Optm::STATUS_RAW ], 'image' ) ); ?>)\n\t\t\t\t\t\t\t</code>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t<?php endif; ?>\n\n\t\t\t\t\t<?php if ( ! empty( $img_count[ 'group.' . Img_Optm::STATUS_REQUESTED ] ) ) : ?>\n\t\t\t\t\t\t<p class=\"litespeed-success\">\n\t\t\t\t\t\t\t<?php echo esc_html( Lang::img_status( Img_Optm::STATUS_REQUESTED ) ); ?>:\n\t\t\t\t\t\t\t<code>\n\t\t\t\t\t\t\t\t<?php echo esc_html( Admin_Display::print_plural( $img_count[ 'group.' . Img_Optm::STATUS_REQUESTED ] ) ); ?>\n\t\t\t\t\t\t\t\t(<?php echo esc_html( Admin_Display::print_plural( $img_count[ 'img.' . Img_Optm::STATUS_REQUESTED ], 'image' ) ); ?>)\n\t\t\t\t\t\t\t</code>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p class=\"litespeed-desc\">\n\t\t\t\t\t\t\t<?php esc_html_e( 'After the QUIC.cloud Image Optimization server finishes optimization, it will notify your site to pull the optimized images.', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t\t<?php esc_html_e( 'This process is automatic.', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t<?php endif; ?>\n\n\t\t\t\t\t<?php if ( ! empty( $img_count[ 'group.' . Img_Optm::STATUS_NOTIFIED ] ) ) : ?>\n\t\t\t\t\t\t<p class=\"litespeed-success\">\n\t\t\t\t\t\t\t<?php echo esc_html( Lang::img_status( Img_Optm::STATUS_NOTIFIED ) ); ?>:\n\t\t\t\t\t\t\t<code>\n\t\t\t\t\t\t\t\t<?php echo esc_html( Admin_Display::print_plural( $img_count[ 'group.' . Img_Optm::STATUS_NOTIFIED ] ) ); ?>\n\t\t\t\t\t\t\t\t(<?php echo esc_html( Admin_Display::print_plural( $img_count[ 'img.' . Img_Optm::STATUS_NOTIFIED ], 'image' ) ); ?>)\n\t\t\t\t\t\t\t</code>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<?php if ( $last_run ) : ?>\n\t\t\t\t\t\t\t<p class=\"litespeed-desc\">\n\t\t\t\t\t\t\t\t<?php printf( esc_html__( 'Last pull initiated by cron at %s.', 'litespeed-cache' ), '<code>' . esc_html( Utility::readable_time( $last_run ) ) . '</code>' ); ?>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t<?php endif; ?>\n\n\t\t\t\t\t<?php if ( ! empty( $img_count[ 'group.' . Img_Optm::STATUS_PULLED ] ) ) : ?>\n\t\t\t\t\t\t<p class=\"litespeed-success\">\n\t\t\t\t\t\t\t<?php echo esc_html( Lang::img_status( Img_Optm::STATUS_PULLED ) ); ?>:\n\t\t\t\t\t\t\t<code>\n\t\t\t\t\t\t\t\t<?php echo esc_html( Admin_Display::print_plural( $img_count[ 'group.' . Img_Optm::STATUS_PULLED ] ) ); ?>\n\t\t\t\t\t\t\t\t(<?php echo esc_html( Admin_Display::print_plural( $img_count[ 'img.' . Img_Optm::STATUS_PULLED ], 'image' ) ); ?>)\n\t\t\t\t\t\t\t</code>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t<?php endif; ?>\n\n\t\t\t\t\t<p>\n\t\t\t\t\t<?php\n\t\t\t\t\tprintf(\n\t\t\t\t\t\t'<a href=\"%1$s\" class=\"button button-secondary litespeed-btn-warning\" data-balloon-pos=\"right\" aria-label=\"%2$s\" %3$s><span class=\"dashicons dashicons-editor-removeformatting\"></span> %4$s</a>',\n\t\t\t\t\t\t( $unfinished_num ? esc_url( Utility::build_url( Router::ACTION_IMG_OPTM, Img_Optm::TYPE_CLEAN ) ) : 'javascript:;' ),\n\t\t\t\t\t\tesc_html__( 'Remove all previous unfinished image optimization requests.', 'litespeed-cache' ),\n\t\t\t\t\t\t( $unfinished_num ? '' : ' disabled' ),\n\t\t\t\t\t\tesc_html__( 'Clean Up Unfinished Data', 'litespeed-cache' ) . ( $unfinished_num ? ': ' . esc_html( Admin_Display::print_plural( $unfinished_num, 'image' ) ) : '' )\n\t\t\t\t\t);\n\t\t\t\t\t?>\n\t\t\t\t\t</p>\n\n\t\t\t\t\t<h3 class=\"litespeed-title-section\">\n\t\t\t\t\t\t<?php esc_html_e( 'Storage Optimization', 'litespeed-cache' ); ?>\n\t\t\t\t\t</h3>\n\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<?php esc_html_e( 'A backup of each image is saved before it is optimized.', 'litespeed-cache' ); ?>\n\t\t\t\t\t</p>\n\n\t\t\t\t\t<?php if ( ! empty( $optm_summary['bk_summary'] ) ) : ?>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<?php echo esc_html__( 'Last calculated', 'litespeed-cache' ) . ': <code>' . esc_html( Utility::readable_time( $optm_summary['bk_summary']['date'] ) ) . '</code>'; ?>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<?php if ( $optm_summary['bk_summary']['count'] ) : ?>\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t<?php echo esc_html__( 'Files', 'litespeed-cache' ) . ': <code>' . intval( $optm_summary['bk_summary']['count'] ) . '</code>'; ?>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t<?php echo esc_html__( 'Total', 'litespeed-cache' ) . ': <code>' . esc_html( Utility::real_size( $optm_summary['bk_summary']['sum'] ) ) . '</code>'; ?>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t<?php endif; ?>\n\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<a class=\"button button-secondary\" data-balloon-pos=\"up\" aria-label=\"<?php esc_html_e( 'Calculate Original Image Storage', 'litespeed-cache' ); ?>\"\n\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\tif ( $finished_percentage > 0 ) :\n\t\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\thref=\"<?php echo esc_url( Utility::build_url( Router::ACTION_IMG_OPTM, Img_Optm::TYPE_CALC_BKUP ) ); ?>\"\n\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\telse :\n\t\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\thref=\"javascript:;\" disabled <?php endif; ?>>\n\t\t\t\t\t\t\t<span class=\"dashicons dashicons-update\"></span> <?php esc_html_e( 'Calculate Backups Disk Space', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\n\t\t\t\t</div>\n\n\t\t\t\t<div>\n\t\t\t\t\t<h4><?php esc_html_e( 'Image Thumbnail Group Sizes', 'litespeed-cache' ); ?></h4>\n\t\t\t\t\t<div class=\"litespeed-desc litespeed-left20\">\n\t\t\t\t\t\t<?php\n\t\t\t\t\t\tforeach ( Media::cls()->get_image_sizes() as $size_title => $size ) {\n\t\t\t\t\t\t\tprintf(\n\t\t\t\t\t\t\t\t'<div>%1$s ( %2$s x %3$s )</div>',\n\t\t\t\t\t\t\t\tesc_html( $size_title ),\n\t\t\t\t\t\t\t\t$size['width'] ? esc_html( $size['width'] ) . 'px' : '*',\n\t\t\t\t\t\t\t\t$size['height'] ? esc_html( $size['height'] ) . 'px' : '*'\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t?>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<hr class=\"litespeed-hr-with-space\">\n\t\t\t\t<div>\n\t\t\t\t\t<h4><?php esc_html_e( 'Delete all backups of the original images', 'litespeed-cache' ); ?></h4>\n\t\t\t\t\t<div class=\"notice notice-error litespeed-callout-bg inline\">\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t🚨 <?php esc_html_e( 'This is irreversible.', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t\t<?php esc_html_e( 'You will be unable to Revert Optimization once the backups are deleted!', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<?php if ( ! empty( $optm_summary['rmbk_summary'] ) ) : ?>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<?php echo esc_html__( 'Last ran', 'litespeed-cache' ) . ': <code>' . esc_html( Utility::readable_time( $optm_summary['rmbk_summary']['date'] ) ) . '</code>'; ?>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<?php echo esc_html__( 'Files', 'litespeed-cache' ) . ': <code>' . esc_html( $optm_summary['rmbk_summary']['count'] ) . '</code>'; ?>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<?php echo esc_html__( 'Saved', 'litespeed-cache' ) . ': <code>' . esc_html( Utility::real_size( $optm_summary['rmbk_summary']['sum'] ) ) . '</code>'; ?>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t<?php endif; ?>\n\t\t\t\t<div class=\"litespeed-image-optim-summary-footer\">\n\t\t\t\t\t<a href=\"<?php echo esc_url( Utility::build_url( Router::ACTION_IMG_OPTM, Img_Optm::TYPE_RM_BKUP ) ); ?>\" data-litespeed-cfm=\"<?php esc_html_e( 'Are you sure you want to remove all image backups?', 'litespeed-cache' ); ?>\" class=\"litespeed-link-with-icon litespeed-danger\">\n\t\t\t\t\t\t<span class=\"dashicons dashicons-trash\"></span><?php esc_html_e( 'Remove Original Image Backups', 'litespeed-cache' ); ?>\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<div class=\"litespeed-width-3-10 litespeed-column-right\">\n\t\t<div class=\"postbox litespeed-postbox litespeed-postbox-imgopt-info\">\n\t\t\t<div class=\"inside\">\n\t\t\t\t<h3 class=\"litespeed-title\">\n\t\t\t\t\t<?php esc_html_e( 'Image Information', 'litespeed-cache' ); ?>\n\t\t\t\t</h3>\n\n\t\t\t\t<div class=\"litespeed-flex-container\">\n\t\t\t\t\t<div class=\"litespeed-icon-vertical-middle\">\n\t\t\t\t\t\t<?php echo wp_kses( GUI::pie( $finished_percentage, 70, true ), GUI::allowed_svg_tags() ); ?>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<?php esc_html_e( 'Image groups total', 'litespeed-cache' ); ?>:\n\t\t\t\t\t\t\t<?php if ( $img_count['groups_new'] ) : ?>\n\t\t\t\t\t\t\t\t<code><?php echo esc_html( Admin_Display::print_plural( $img_count['groups_new'], 'group' ) ); ?></code>\n\t\t\t\t\t\t\t<?php else : ?>\n\t\t\t\t\t\t\t\t<font class=\"litespeed-congratulate\"><?php esc_html_e( 'Congratulations, all gathered!', 'litespeed-cache' ); ?></font>\n\t\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t\t<a href=\"https://docs.litespeedtech.com/lscache/lscwp/imageopt/#what-is-an-image-group\" target=\"_blank\" class=\"litespeed-desc litespeed-help-btn-icon\" data-balloon-pos=\"up\" aria-label=\"<?php esc_html_e( 'What is a group?', 'litespeed-cache' ); ?>\">\n\t\t\t\t\t\t\t\t<span class=\"dashicons dashicons-editor-help\"></span>\n\t\t\t\t\t\t\t\t<span class=\"screen-reader-text\"><?php esc_html_e( 'What is an image group?', 'litespeed-cache' ); ?></span>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<?php esc_html_e( 'Current image post id position', 'litespeed-cache' ); ?>: <?php echo ! empty( $optm_summary['next_post_id'] ) ? esc_html( $optm_summary['next_post_id'] ) : '-'; ?><br>\n\t\t\t\t\t\t\t<?php esc_html_e( 'Maximum image post id', 'litespeed-cache' ); ?>: <?php echo esc_html( $img_count['max_id'] ); ?>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"inside litespeed-postbox-footer litespeed-postbox-footer--compact\" style=\"display: none;\">\n\t\t\t\t<a href=\"<?php echo esc_url( Utility::build_url( Router::ACTION_IMG_OPTM, Img_Optm::TYPE_RESCAN ) ); ?>\" class=\"\" data-balloon-pos=\"up\" data-balloon-length=\"large\" aria-label=\"<?php esc_html_e( 'Scan for any new unoptimized image thumbnail sizes and resend necessary image optimization requests.', 'litespeed-cache' ); ?>\">\n\t\t\t\t\t<?php esc_html_e( 'Rescan New Thumbnails', 'litespeed-cache' ); ?>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\"postbox litespeed-postbox\">\n\t\t\t<div class=\"inside\">\n\t\t\t\t<h3 class=\"litespeed-title\">\n\t\t\t\t\t<?php esc_html_e( 'Optimization Summary', 'litespeed-cache' ); ?>\n\t\t\t\t</h3>\n\t\t\t\t<p>\n\t\t\t\t\t<?php esc_html_e( 'Total Reduction', 'litespeed-cache' ); ?>: <code><?php echo isset( $optm_summary['reduced'] ) ? esc_html( Utility::real_size( $optm_summary['reduced'] ) ) : '-'; ?></code>\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t<?php esc_html_e( 'Images Pulled', 'litespeed-cache' ); ?>: <code><?php echo isset( $optm_summary['img_taken'] ) ? esc_html( $optm_summary['img_taken'] ) : '-'; ?></code>\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t<?php esc_html_e( 'Last Request', 'litespeed-cache' ); ?>: <code><?php echo isset( $optm_summary['last_requested'] ) ? esc_html( Utility::readable_time( $optm_summary['last_requested'] ) ) : '-'; ?></code>\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t<?php esc_html_e( 'Last Pulled', 'litespeed-cache' ); ?>: <code><?php echo isset( $optm_summary['last_pulled'] ) ? esc_html( Utility::readable_time( $optm_summary['last_pulled'] ) ) : '-'; ?></code>\n\t\t\t\t\t<?php\n\t\t\t\t\tif ( isset( $optm_summary['last_pulled_by_cron'] ) && $optm_summary['last_pulled_by_cron'] ) {\n\t\t\t\t\t\techo '(Cron)';\n\t\t\t\t\t}\n\t\t\t\t\t?>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<div class=\"inside litespeed-postbox-footer litespeed-postbox-footer--compact litespeed-desc\">\n\t\t\t\t<?php\n\t\t\t\tprintf(\n\t\t\t\t\t/* translators: %s: Link tags */\n\t\t\t\t\tesc_html__( 'Results can be checked in %sMedia Library%s.', 'litespeed-cache' ),\n\t\t\t\t\t'<a href=\"upload.php?mode=list\">',\n\t\t\t\t\t'</a>'\n\t\t\t\t);\n\t\t\t\t?>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\"postbox litespeed-postbox\">\n\t\t\t<div class=\"inside\">\n\t\t\t\t<h3 class=\"litespeed-title\"><?php esc_html_e( 'Optimization Tools', 'litespeed-cache' ); ?></h3>\n\n\t\t\t\t<p>\n\t\t\t\t\t<?php esc_html_e( 'You can quickly switch between using original (unoptimized versions) and optimized image files. It will affect all images on your website, both regular and webp versions if available.', 'litespeed-cache' ); ?>\n\t\t\t\t</p>\n\n\t\t\t\t<div class=\"litespeed-links-group\">\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<a href=\"<?php echo esc_url( Utility::build_url( Router::ACTION_IMG_OPTM, Img_Optm::TYPE_BATCH_SWITCH_ORI ) ); ?>\" class=\"litespeed-link-with-icon\" data-balloon-pos=\"up\" aria-label=\"<?php esc_html_e( 'Use original images (unoptimized) on your site', 'litespeed-cache' ); ?>\">\n\t\t\t\t\t\t\t<span class=\"dashicons dashicons-undo\"></span><?php esc_html_e( 'Use Original Files', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</span><span>\n\t\t\t\t\t\t<a href=\"<?php echo esc_url( Utility::build_url( Router::ACTION_IMG_OPTM, Img_Optm::TYPE_BATCH_SWITCH_OPTM ) ); ?>\" class=\"litespeed-link-with-icon litespeed-icon-right\" data-balloon-pos=\"up\" aria-label=\"<?php esc_html_e( 'Switch back to using optimized images on your site', 'litespeed-cache' ); ?>\">\n\t\t\t\t\t\t\t<?php esc_html_e( 'Use Optimized Files', 'litespeed-cache' ); ?><span class=\"dashicons dashicons-redo\"></span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"inside litespeed-postbox-footer litespeed-postbox-footer--compact\">\n\t\t\t\t<p>\n\t\t\t\t\t<a href=\"<?php echo esc_url( Utility::build_url( Router::ACTION_IMG_OPTM, Img_Optm::TYPE_RESET_COUNTER ) ); ?>\" class=\"litespeed-link-with-icon litespeed-warning\">\n\t\t\t\t\t\t<span class=\"dashicons dashicons-dismiss\"></span><?php esc_html_e( 'Soft Reset Optimization Counter', 'litespeed-cache' ); ?>\n\t\t\t\t\t</a>\n\t\t\t\t</p>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php printf( esc_html__( 'This will reset the %1$s. If you changed WebP/AVIF settings and want to generate %2$s for the previously optimized images, use this action.', 'litespeed-cache' ), '<code>' . esc_html__( 'Current image post id position', 'litespeed-cache' ) . '</code>', 'WebP/AVIF' ); ?>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"inside litespeed-postbox-footer litespeed-postbox-footer--compact\">\n\t\t\t\t<p>\n\t\t\t\t\t<a href=\"<?php echo esc_url( Utility::build_url( Router::ACTION_IMG_OPTM, Img_Optm::TYPE_DESTROY ) ); ?>\" class=\"litespeed-link-with-icon litespeed-danger\" data-litespeed-cfm=\"<?php esc_html_e( 'Are you sure to destroy all optimized images?', 'litespeed-cache' ); ?>\" id=\"litespeed-imageopt-destroy\">\n\t\t\t\t\t\t<span class=\"dashicons dashicons-dismiss\"></span><?php esc_html_e( 'Destroy All Optimization Data', 'litespeed-cache' ); ?>\n\t\t\t\t\t</a>\n\t\t\t\t</p>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'Remove all previous image optimization requests/results, revert completed optimizations, and delete all optimization files.', 'litespeed-cache' ); ?>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>",
    "plugins/litespeed-cache/tpl/img_optm/settings.media_webp.tpl.php": "<?php\n/**\n * LiteSpeed Cache Image Optimization WebP/AVIF Setting\n *\n * Manages the WebP and AVIF optimization settings for LiteSpeed Cache.\n *\n * @package LiteSpeed\n * @since 1.0.0\n */\n\nnamespace LiteSpeed;\n\ndefined( 'WPINC' ) || exit;\n?>\n\n<tr>\n\t<th>\n\t\t<?php $option_id = Base::O_IMG_OPTM_WEBP; ?>\n\t\t<?php $this->title( $option_id ); ?>\n\t</th>\n\t<td>\n\t\t<?php $this->build_switch( $option_id, array( esc_html__( 'OFF', 'litespeed-cache' ), 'WebP', 'AVIF' ) ); ?>\n\t\t<?php Doc::maybe_on_by_gm( $option_id ); ?>\n\t\t<div class=\"litespeed-desc\">\n\t\t\t<?php esc_html_e( 'Request WebP/AVIF versions of original images when doing optimization.', 'litespeed-cache' ); ?>\n\t\t\t<?php printf( esc_html__( 'Significantly improve load time by replacing images with their optimized %s versions.', 'litespeed-cache' ), '.webp/.avif' ); ?>\n\t\t\t<br /><?php Doc::notice_htaccess(); ?>\n\t\t\t<br /><?php Doc::crawler_affected(); ?>\n\t\t\t<br />\n\t\t\t<font class=\"litespeed-warning\">\n\t\t\t\t⚠️ <?php printf( esc_html__( '%1$s is a %2$s paid feature.', 'litespeed-cache' ), 'AVIF', 'QUIC.cloud' ); ?></font>\n\t\t\t<br />\n\t\t\t<font class=\"litespeed-warning\">\n\t\t\t\t⚠️ <?php printf( esc_html__( 'When switching formats, please %1$s or %2$s to apply this new choice to previously optimized images.', 'litespeed-cache' ), esc_html__( 'Destroy All Optimization Data', 'litespeed-cache' ), esc_html__( 'Soft Reset Optimization Counter', 'litespeed-cache' ) ); ?></font>\n\t\t\t<?php Doc::learn_more( 'https://docs.litespeedtech.com/lscache/lscwp/imageopt/#soft-reset-optimization-counter' ); ?>\n\t\t</div>\n\t</td>\n</tr>",
    "plugins/litespeed-cache/tpl/img_optm/settings.tpl.php": "<?php\n/**\n * LiteSpeed Cache Image Optimization Settings\n *\n * Manages image optimization settings for LiteSpeed Cache.\n *\n * @package LiteSpeed\n * @since 1.0.0\n */\n\nnamespace LiteSpeed;\n\ndefined( 'WPINC' ) || exit;\n\n$this->form_action();\n?>\n\n<h3 class=\"litespeed-title-short\">\n\t<?php esc_html_e( 'Image Optimization Settings', 'litespeed-cache' ); ?>\n\t<?php Doc::learn_more( 'https://docs.litespeedtech.com/lscache/lscwp/imageopt/#image-optimization-settings-tab' ); ?>\n</h3>\n\n<table class=\"wp-list-table striped litespeed-table\">\n\t<tbody>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_IMG_OPTM_AUTO; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_switch( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'Automatically request optimization via cron job.', 'litespeed-cache' ); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_IMG_OPTM_ORI; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_switch( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'Optimize images and save backups of the originals in the same folder.', 'litespeed-cache' ); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_IMG_OPTM_RM_BKUP; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_switch( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'Automatically remove the original image backups after fetching optimized images.', 'litespeed-cache' ); ?>\n\n\t\t\t\t\t<br />\n\t\t\t\t\t<font class=\"litespeed-danger\">\n\t\t\t\t\t\t🚨\n\t\t\t\t\t\t<?php esc_html_e( 'This is irreversible.', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t<?php esc_html_e( 'You will be unable to Revert Optimization once the backups are deleted!', 'litespeed-cache' ); ?>\n\t\t\t\t\t</font>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_IMG_OPTM_LOSSLESS; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_switch( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'Optimize images using lossless compression.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<?php esc_html_e( 'This can improve quality but may result in larger images than lossy compression will.', 'litespeed-cache' ); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_IMG_OPTM_EXIF; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_switch( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'Preserve EXIF data (copyright, GPS, comments, keywords, etc) when optimizing.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<?php esc_html_e( 'This will increase the size of optimized files.', 'litespeed-cache' ); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<?php\n\t\tif ( ! is_multisite() ) :\n\t\t\t// webp\n\t\t\trequire LSCWP_DIR . 'tpl/img_optm/settings.media_webp.tpl.php';\n\t\tendif;\n\t\t?>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_IMG_OPTM_WEBP_ATTR; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<div class=\"litespeed-textarea-recommended\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<?php $this->build_textarea( $option_id, 40 ); ?>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<?php $this->recommended( $option_id ); ?>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'Specify which element attributes will be replaced with WebP/AVIF.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<?php esc_html_e( 'Only attributes listed here will be replaced.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<br /><?php printf( esc_html__( 'Use the format %1$s or %2$s (element is optional).', 'litespeed-cache' ), '<code>element.attribute</code>', '<code>.attribute</code>' ); ?>\n\t\t\t\t\t<?php Doc::one_per_line(); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_IMG_OPTM_WEBP_REPLACE_SRCSET; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_switch( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php printf( esc_html__( 'Enable replacement of WebP/AVIF in %s elements that were generated outside of WordPress logic.', 'litespeed-cache' ), '<code>srcset</code>' ); ?>\n\t\t\t\t\t<?php Doc::learn_more( 'https://docs.litespeedtech.com/lscache/lscwp/imageopt/#webp-for-extra-srcset' ); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t</tbody>\n</table>\n\n<?php\n$this->form_end();\n",
    "plugins/litespeed-cache/tpl/img_optm/entry.tpl.php": "<?php\n/**\n * LiteSpeed Cache Image Optimization\n *\n * Manages the image optimization interface for LiteSpeed Cache.\n *\n * @package LiteSpeed\n * @since 1.0.0\n */\n\nnamespace LiteSpeed;\n\ndefined( 'WPINC' ) || exit;\n\n$menu_list = array(\n    'summary'  => esc_html__( 'Image Optimization Summary', 'litespeed-cache' ),\n    'settings' => esc_html__( 'Image Optimization Settings', 'litespeed-cache' ),\n);\n\nif ( is_network_admin() ) {\n    $menu_list = array(\n        'network_settings' => esc_html__( 'Image Optimization Settings', 'litespeed-cache' ),\n    );\n}\n\n?>\n\n<div class=\"wrap\">\n    <h1 class=\"litespeed-h1\">\n        <?php esc_html_e( 'LiteSpeed Cache Image Optimization', 'litespeed-cache' ); ?>\n    </h1>\n    <span class=\"litespeed-desc\">\n        v<?php echo esc_html( Core::VER ); ?>\n    </span>\n    <hr class=\"wp-header-end\">\n</div>\n\n<div class=\"litespeed-wrap\">\n    <h2 class=\"litespeed-header nav-tab-wrapper\">\n        <?php GUI::display_tab_list( $menu_list ); ?>\n    </h2>\n\n    <div class=\"litespeed-body\">\n        <?php\n        foreach ( $menu_list as $menu_key => $val ) {\n            echo '<div data-litespeed-layout=\"' . esc_attr( $menu_key ) . '\">';\n            require LSCWP_DIR . 'tpl/img_optm/' . $menu_key . '.tpl.php';\n            echo '</div>';\n        }\n        ?>\n    </div>\n\n</div>",
    "plugins/litespeed-cache/tpl/img_optm/network_settings.tpl.php": "<?php\n/**\n * LiteSpeed Cache Image Optimization Network Settings\n *\n * Manages network-wide image optimization settings for LiteSpeed Cache.\n *\n * @package LiteSpeed\n * @since 1.0.0\n */\n\nnamespace LiteSpeed;\n\ndefined( 'WPINC' ) || exit;\n\n$this->form_action( Router::ACTION_SAVE_SETTINGS_NETWORK );\n?>\n\n<h3 class=\"litespeed-title-short\">\n\t<?php esc_html_e( 'Image Optimization Settings', 'litespeed-cache' ); ?>\n\t<?php Doc::learn_more( 'https://docs.litespeedtech.com/lscache/lscwp/imageopt/#image-optimization-settings-tab' ); ?>\n</h3>\n\n<table class=\"wp-list-table striped litespeed-table\"><tbody>\n\t<?php require LSCWP_DIR . 'tpl/img_optm/settings.media_webp.tpl.php'; ?>\n\n</tbody></table>\n\n<?php\n$this->form_end();",
    "plugins/litespeed-cache/tpl/dash/network_dash.tpl.php": "<?php\n/**\n * LiteSpeed Cache Network Dashboard\n *\n * @package LiteSpeed\n * @since 1.0.0\n */\n\nnamespace LiteSpeed;\n\ndefined( 'WPINC' ) || exit;\n\n$cloud_summaries = array();\n$blogs           = Activation::get_network_ids();\nforeach ( $blogs as $network_blog_id ) {\n\tswitch_to_blog( $network_blog_id );\n\t$cloud_summaries[ home_url() ] = Cloud::get_summary();\n\t// May need restore_current_blog();\n}\n\n?>\n\n<div class=\"litespeed-dashboard\">\n<?php foreach ( $cloud_summaries as $home_url => $cloud_summary ) : ?>\n\n\t<div class=\"litespeed-dashboard-header\">\n\t\t<h3 class=\"litespeed-dashboard-title\">\n\t\t\t<?php echo esc_html( sprintf( __( 'Usage Statistics: %s', 'litespeed-cache' ), $home_url ) ); ?>\n\t\t</h3>\n\t\t<hr>\n\t</div>\n\n\t<div class=\"litespeed-dashboard-stats-wrapper\">\n\t\t<?php\n\t\t$cat_list = array(\n\t\t\t'img_optm'  => esc_html__( 'Image Optimization', 'litespeed-cache' ),\n\t\t\t'page_optm' => esc_html__( 'Page Optimization', 'litespeed-cache' ),\n\t\t\t'cdn'       => esc_html__( 'CDN Bandwidth', 'litespeed-cache' ),\n\t\t\t'lqip'      => esc_html__( 'Low Quality Image Placeholder', 'litespeed-cache' ),\n\t\t);\n\n\t\tforeach ( $cat_list as $svc => $svc_title ) :\n\t\t\t$finished_percentage = 0;\n\t\t\t$total_used          = '-';\n\t\t\t$used                = '-';\n\t\t\t$quota               = '-';\n\t\t\t$pag_used            = '-';\n\t\t\t$pag_total           = '-';\n\t\t\t$pag_width           = 0;\n\t\t\t$pag_bal             = 0;\n\n\t\t\tif ( ! empty( $cloud_summary[ 'usage.' . $svc ] ) ) {\n\t\t\t\t$usage               = $cloud_summary[ 'usage.' . $svc ];\n\t\t\t\t$finished_percentage = floor( $usage['used'] * 100 / $usage['quota'] );\n\t\t\t\t$used                = $usage['used'];\n\t\t\t\t$quota               = $usage['quota'];\n\t\t\t\t$pag_used            = ! empty( $usage['pag_used'] ) ? $usage['pag_used'] : 0;\n\t\t\t\t$pag_bal             = ! empty( $usage['pag_bal'] ) ? $usage['pag_bal'] : 0;\n\t\t\t\t$pag_total           = $pag_used + $pag_bal;\n\n\t\t\t\tif ( $pag_total ) {\n\t\t\t\t\t$pag_width = round( $pag_used / $pag_total * 100 ) . '%';\n\t\t\t\t}\n\n\t\t\t\tif ( 'cdn' === $svc ) {\n\t\t\t\t\t$used      = Utility::real_size( $used * 1024 * 1024 );\n\t\t\t\t\t$quota     = Utility::real_size( $quota * 1024 * 1024 );\n\t\t\t\t\t$pag_used  = Utility::real_size( $pag_used * 1024 * 1024 );\n\t\t\t\t\t$pag_total = Utility::real_size( $pag_total * 1024 * 1024 );\n\t\t\t\t}\n\n\t\t\t\tif ( ! empty( $usage['total_used'] ) ) {\n\t\t\t\t\t$total_used = $usage['total_used'];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t$percentage_bg = 'success';\n\t\t\tif ( 95 < $finished_percentage ) {\n\t\t\t\t$percentage_bg = 'danger';\n\t\t\t} elseif ( 85 < $finished_percentage ) {\n\t\t\t\t$percentage_bg = 'warning';\n\t\t\t}\n\t\t\t?>\n\n\t\t\t<div class=\"postbox litespeed-postbox\">\n\t\t\t\t<div class=\"inside\">\n\t\t\t\t\t<h3 class=\"litespeed-title\"><?php echo esc_html( $svc_title ); ?></h3>\n\n\t\t\t\t\t<div class=\"litespeed-flex-container\">\n\t\t\t\t\t\t<div class=\"litespeed-icon-vertical-middle litespeed-pie-<?php echo esc_attr( $percentage_bg ); ?>\">\n\t\t\t\t\t\t\t<?php echo wp_kses( GUI::pie( $finished_percentage, 60, false ), GUI::allowed_svg_tags() ); ?>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class=\"litespeed-dashboard-stats\">\n\t\t\t\t\t\t\t\t<h3><?php echo esc_html( 'img_optm' === $svc ? __( 'Fast Queue Usage', 'litespeed-cache' ) : __( 'Usage', 'litespeed-cache' ) ); ?></h3>\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t<strong><?php echo esc_html( $used ); ?></strong>\n\t\t\t\t\t\t\t\t\t<?php if ( $quota !== $used ) : ?>\n\t\t\t\t\t\t\t\t\t\t<span class=\"litespeed-desc\"> / <?php echo esc_html( $quota ); ?></span>\n\t\t\t\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<?php if ( 0 < $pag_total ) : ?>\n\t\t\t\t\t\t<p class=\"litespeed-dashboard-stats-payg\" data-balloon-pos=\"up\" aria-label=\"<?php echo esc_attr__( 'Pay as You Go', 'litespeed-cache' ); ?>\">\n\t\t\t\t\t\t\t<?php esc_html_e( 'PAYG Balance', 'litespeed-cache' ); ?>: <strong><?php echo esc_html( $pag_bal ); ?></strong>\n\t\t\t\t\t\t\t<button class=\"litespeed-info-button\" data-balloon-pos=\"up\" aria-label=\"<?php echo esc_attr( sprintf( __( 'This Month Usage: %s', 'litespeed-cache' ), esc_html( $pag_used ) ) ); ?>\">\n\t\t\t\t\t\t\t\t<span class=\"dashicons dashicons-info\"></span>\n\t\t\t\t\t\t\t\t<span class=\"screen-reader-text\"><?php esc_html_e( 'Pay as You Go Usage Statistics', 'litespeed-cache' ); ?></span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t<?php endif; ?>\n\n\t\t\t\t\t<?php if ( 'img_optm' === $svc ) : ?>\n\t\t\t\t\t\t<p class=\"litespeed-dashboard-stats-total\">\n\t\t\t\t\t\t\t<?php esc_html_e( 'Total Usage', 'litespeed-cache' ); ?>: <strong><?php echo esc_html( $total_used ); ?> / ∞</strong>\n\t\t\t\t\t\t\t<button class=\"litespeed-info-button\" data-balloon-pos=\"up\" aria-label=\"<?php echo esc_attr__( 'Total images optimized in this month', 'litespeed-cache' ); ?>\">\n\t\t\t\t\t\t\t\t<span class=\"dashicons dashicons-info\"></span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<div class=\"clear\"></div>\n\t\t\t\t\t<?php endif; ?>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t<?php endforeach; ?>\n\t</div>\n\n<?php endforeach; ?>\n</div>",
    "plugins/litespeed-cache/tpl/dash/entry.tpl.php": "<?php\n/**\n * LiteSpeed Cache Dashboard Wrapper\n *\n * Renders the main dashboard page for the LiteSpeed Cache plugin in the WordPress admin area.\n *\n * @package LiteSpeed\n * @since 1.0.0\n */\n\nnamespace LiteSpeed;\n\ndefined( 'WPINC' ) || exit;\n\n$menu_list = array(\n\t'dashboard' => esc_html__( 'Dashboard', 'litespeed-cache' ),\n);\n\nif ( $this->_is_network_admin ) {\n\t$menu_list = array(\n\t\t'network_dash' => esc_html__( 'Network Dashboard', 'litespeed-cache' ),\n\t);\n}\n\n?>\n\n<div class=\"wrap\">\n\t<h1 class=\"litespeed-h1\">\n\t\t<?php echo esc_html__( 'LiteSpeed Cache Dashboard', 'litespeed-cache' ); ?>\n\t</h1>\n\t<span class=\"litespeed-desc\">\n\t\t<?php echo esc_html( 'v' . Core::VER ); ?>\n\t</span>\n\t<hr class=\"wp-header-end\">\n</div>\n\n<div class=\"litespeed-wrap\">\n\t<?php\n\tforeach ( $menu_list as $tab_key => $tab_val ) {\n\t\techo '<div data-litespeed-layout=\"' . esc_attr( $tab_key ) . '\">';\n\t\trequire LSCWP_DIR . 'tpl/dash/' . $tab_key . '.tpl.php';\n\t\techo '</div>';\n\t}\n\t?>\n</div>",
    "plugins/litespeed-cache/tpl/dash/dashboard.tpl.php": "<?php\n/**\n * LiteSpeed Cache Dashboard\n *\n * Displays the dashboard for LiteSpeed Cache plugin, including cache status,\n * crawler status, QUIC.cloud service usage, and optimization statistics.\n *\n * @package LiteSpeed\n * @since 1.0.0\n */\n\nnamespace LiteSpeed;\n\ndefined( 'WPINC' ) || exit;\n\n$health_scores   = Health::cls()->scores();\n$crawler_summary = Crawler::get_summary();\n\n// Image related info\n$img_optm_summary        = Img_Optm::get_summary();\n$img_count               = Img_Optm::cls()->img_count();\n$img_finished_percentage = 0;\nif ( ! empty( $img_count['groups_all'] ) ) {\n\t$img_finished_percentage = 100 - floor( $img_count['groups_new'] * 100 / $img_count['groups_all'] );\n}\nif ( 100 === $img_finished_percentage && ! empty( $img_count['groups_new'] ) ) {\n\t$img_finished_percentage = 99;\n}\n\n$cloud_instance = Cloud::cls();\n$cloud_instance->finish_qc_activation();\n\n$cloud_summary           = Cloud::get_summary();\n$css_summary             = CSS::get_summary();\n$ucss_summary            = UCSS::get_summary();\n$placeholder_summary     = Placeholder::get_summary();\n$vpi_summary             = VPI::get_summary();\n$ccss_count              = count( $this->load_queue( 'ccss' ) );\n$ucss_count              = count( $this->load_queue( 'ucss' ) );\n$placeholder_queue_count = count( $this->load_queue( 'lqip' ) );\n$vpi_queue_count         = count( $this->load_queue( 'vpi' ) );\n$can_page_load_time      = defined( 'LITESPEED_SERVER_TYPE' ) && 'NONE' !== LITESPEED_SERVER_TYPE;\n\n?>\n\n<div class=\"litespeed-dashboard\">\n\t<?php if ( ! $cloud_instance->activated() && ! Admin_Display::has_qc_hide_banner() ) : ?>\n\t\t<div class=\"litespeed-dashboard-group\">\n\t\t\t<div class=\"litespeed-flex-container\">\n\t\t\t\t<div class=\"postbox litespeed-postbox litespeed-postbox-cache\">\n\t\t\t\t\t<div class=\"inside\">\n\t\t\t\t\t\t<h3 class=\"litespeed-title\">\n\t\t\t\t\t\t\t<?php esc_html_e( 'Cache Status', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t\t<a href=\"<?php echo esc_url( admin_url( 'admin.php?page=litespeed-cache' ) ); ?>\" class=\"litespeed-title-right-icon\"><?php esc_html_e( 'More', 'litespeed-cache' ); ?></a>\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t<?php\n\t\t\t\t\t\t$cache_list = array(\n\t\t\t\t\t\t\tBase::O_CACHE         => esc_html__( 'Public Cache', 'litespeed-cache' ),\n\t\t\t\t\t\t\tBase::O_CACHE_PRIV    => esc_html__( 'Private Cache', 'litespeed-cache' ),\n\t\t\t\t\t\t\tBase::O_OBJECT        => esc_html__( 'Object Cache', 'litespeed-cache' ),\n\t\t\t\t\t\t\tBase::O_CACHE_BROWSER => esc_html__( 'Browser Cache', 'litespeed-cache' ),\n\t\t\t\t\t\t);\n\t\t\t\t\t\tforeach ( $cache_list as $cache_option => $cache_title ) :\n\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<?php if ( $this->conf( $cache_option ) ) : ?>\n\t\t\t\t\t\t\t\t\t<span class=\"litespeed-label-success litespeed-label-dashboard\"><?php esc_html_e( 'ON', 'litespeed-cache' ); ?></span>\n\t\t\t\t\t\t\t\t<?php else : ?>\n\t\t\t\t\t\t\t\t\t<span class=\"litespeed-label-danger litespeed-label-dashboard\"><?php esc_html_e( 'OFF', 'litespeed-cache' ); ?></span>\n\t\t\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t\t\t<?php echo esc_html( $cache_title ); ?>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<?php endforeach; ?>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"postbox litespeed-postbox litespeed-postbox-crawler\">\n\t\t\t\t\t<div class=\"inside\">\n\t\t\t\t\t\t<h3 class=\"litespeed-title\">\n\t\t\t\t\t\t\t<?php esc_html_e( 'Crawler Status', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t\t<a href=\"<?php echo esc_url( admin_url( 'admin.php?page=litespeed-crawler' ) ); ?>\" class=\"litespeed-title-right-icon\"><?php esc_html_e( 'More', 'litespeed-cache' ); ?></a>\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<code><?php echo esc_html( count( Crawler::cls()->list_crawlers() ) ); ?></code> <?php esc_html_e( 'Crawler(s)', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<?php esc_html_e( 'Currently active crawler', 'litespeed-cache' ); ?>: <code><?php echo esc_html( $crawler_summary['curr_crawler'] ); ?></code>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<?php if ( ! empty( $crawler_summary['curr_crawler_beginning_time'] ) ) : ?>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<span class=\"litespeed-bold\"><?php esc_html_e( 'Current crawler started at', 'litespeed-cache' ); ?>:</span>\n\t\t\t\t\t\t\t\t<?php echo esc_html( Utility::readable_time( $crawler_summary['curr_crawler_beginning_time'] ) ); ?>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t<?php if ( ! empty( $crawler_summary['last_start_time'] ) ) : ?>\n\t\t\t\t\t\t\t<p class=\"litespeed-desc\">\n\t\t\t\t\t\t\t\t<span class=\"litespeed-bold\"><?php esc_html_e( 'Last interval', 'litespeed-cache' ); ?>:</span>\n\t\t\t\t\t\t\t\t<?php echo esc_html( Utility::readable_time( $crawler_summary['last_start_time'] ) ); ?>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t<?php if ( ! empty( $crawler_summary['end_reason'] ) ) : ?>\n\t\t\t\t\t\t\t<p class=\"litespeed-desc\">\n\t\t\t\t\t\t\t\t<span class=\"litespeed-bold\"><?php esc_html_e( 'Ended reason', 'litespeed-cache' ); ?>:</span>\n\t\t\t\t\t\t\t\t<?php echo esc_html( $crawler_summary['end_reason'] ); ?>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t<?php if ( ! empty( $crawler_summary['last_crawled'] ) ) : ?>\n\t\t\t\t\t\t\t<p class=\"litespeed-desc\">\n\t\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\t\tprintf(\n\t\t\t\t\t\t\t\t\tesc_html__( '%1$s %2$d item(s)', 'litespeed-cache' ),\n\t\t\t\t\t\t\t\t\t'<span class=\"litespeed-bold\">' . esc_html__( 'Last crawled:', 'litespeed-cache' ) . '</span>',\n\t\t\t\t\t\t\t\t\tesc_html( $crawler_summary['last_crawled'] )\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<?php\n\t\t\t\t$news = $cloud_instance->load_qc_status_for_dash( 'news_dash_guest' );\n\t\t\t\tif ( ! empty( $news ) ) :\n\t\t\t\t\t?>\n\t\t\t\t\t<div class=\"postbox litespeed-postbox\">\n\t\t\t\t\t\t<div class=\"inside litespeed-text-center\">\n\t\t\t\t\t\t\t<h3 class=\"litespeed-title\">\n\t\t\t\t\t\t\t\t<?php esc_html_e( 'News', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t<div class=\"litespeed-top20\">\n\t\t\t\t\t\t\t\t<?php echo wp_kses_post( $news ); ?>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t<?php endif; ?>\n\t\t\t</div>\n\t\t</div>\n\t<?php endif; ?>\n\n\t<div class=\"litespeed-dashboard-qc\">\n\t\t<?php if ( ! $cloud_instance->activated() && ! Admin_Display::has_qc_hide_banner() ) : ?>\n\t\t\t<div class=\"litespeed-dashboard-unlock\">\n\t\t\t\t<div>\n\t\t\t\t\t<h3 class=\"litespeed-dashboard-unlock-title\">\n\t\t\t\t\t\t<strong class=\"litespeed-qc-text-gradient\">\n\t\t\t\t\t\t\t<?php esc_html_e( 'Accelerate, Optimize, Protect', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t</strong>\n\t\t\t\t\t</h3>\n\t\t\t\t\t<p class=\"litespeed-dashboard-unlock-desc\">\n\t\t\t\t\t\t<?php echo wp_kses_post( __( 'Speed up your WordPress site even further with <strong>QUIC.cloud Online Services and CDN</strong>.', 'litespeed-cache' ) ); ?>\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<?php esc_html_e( 'Free monthly quota available. Can also be used anonymously (no email required).', 'litespeed-cache' ); ?>\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<a class=\"button button-primary\" href=\"<?php echo esc_url( Utility::build_url( Router::ACTION_CLOUD, Cloud::TYPE_ACTIVATE ) ); ?>\">\n\t\t\t\t\t\t\t<span class=\"dashicons dashicons-yes\"></span>\n\t\t\t\t\t\t\t<?php esc_html_e( 'Enable QUIC.cloud services', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<br>\n\t\t\t\t\t\t<a class=\"button button-link litespeed-top10\" href=\"<?php echo esc_url( Utility::build_url( Router::ACTION_ADMIN_DISPLAY, Admin_Display::TYPE_QC_HIDE_BANNER ) ); ?>\">\n\t\t\t\t\t\t\t<?php esc_html_e( 'Do not show this again', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</p>\n\t\t\t\t\t<p class=\"litespeed-dashboard-unlock-footer\">\n\t\t\t\t\t\t<?php esc_html_e( 'QUIC.cloud provides CDN and online optimization services, and is not required. You may use many features of this plugin without QUIC.cloud.', 'litespeed-cache' ); ?><br>\n\t\t\t\t\t\t<a href=\"https://www.quic.cloud/\" target=\"_blank\">\n\t\t\t\t\t\t\t<?php esc_html_e( 'Learn More about QUIC.cloud', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<br>\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t<?php endif; ?>\n\n\t\t<div class=\"litespeed-dashboard-qc-enable\">\n\t\t\t<div class=\"litespeed-dashboard-header\">\n\t\t\t\t<h3 class=\"litespeed-dashboard-title litespeed-dashboard-title--w-btn\">\n\t\t\t\t\t<span class=\"litespeed-right10\"><?php esc_html_e( 'QUIC.cloud Service Usage Statistics', 'litespeed-cache' ); ?></span>\n\t\t\t\t\t<a href=\"<?php echo esc_url( Utility::build_url( Router::ACTION_CLOUD, Cloud::TYPE_SYNC_USAGE ) ); ?>\" class=\"button button-secondary button-small\">\n\t\t\t\t\t\t<span class=\"dashicons dashicons-update\"></span> <?php esc_html_e( 'Refresh Usage', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t<span class=\"screen-reader-text\"><?php esc_html_e( 'Sync data from Cloud', 'litespeed-cache' ); ?></span>\n\t\t\t\t\t</a>\n\t\t\t\t</h3>\n\t\t\t\t<hr>\n\t\t\t\t<a href=\"https://docs.litespeedtech.com/lscache/lscwp/dashboard/#usage-statistics\" target=\"_blank\" class=\"litespeed-learn-more\"><?php esc_html_e( 'Learn More', 'litespeed-cache' ); ?></a>\n\t\t\t</div>\n\n\t\t\t<?php if ( ! $cloud_instance->activated() && Admin_Display::has_qc_hide_banner() ) : ?>\n\t\t\t\t<p class=\"litespeed-desc litespeed-margin-top-remove\">\n\t\t\t\t\t<?php\n\t\t\t\t\tprintf(\n\t\t\t\t\t\tesc_html__( 'The features below are provided by %s', 'litespeed-cache' ),\n\t\t\t\t\t\t'<a href=\"https://quic.cloud\" target=\"_blank\">QUIC.cloud</a>'\n\t\t\t\t\t);\n\t\t\t\t\t?>\n\t\t\t\t</p>\n\t\t\t<?php endif; ?>\n\n\t\t\t<div class=\"litespeed-dashboard-stats-wrapper\">\n\t\t\t\t<?php\n\t\t\t\t$cat_list = array(\n\t\t\t\t\t'img_optm'  => esc_html__( 'Image Optimization', 'litespeed-cache' ),\n\t\t\t\t\t'page_optm' => esc_html__( 'Page Optimization', 'litespeed-cache' ),\n\t\t\t\t\t'cdn'       => esc_html__( 'CDN Bandwidth', 'litespeed-cache' ),\n\t\t\t\t\t'lqip'      => esc_html__( 'Low Quality Image Placeholder', 'litespeed-cache' ),\n\t\t\t\t);\n\n\t\t\t\tforeach ( $cat_list as $svc => $svc_title ) :\n\t\t\t\t\t$finished_percentage = 0;\n\t\t\t\t\t$total_used          = '-';\n\t\t\t\t\t$used                = '-';\n\t\t\t\t\t$quota               = '-';\n\t\t\t\t\t$pag_used            = '-';\n\t\t\t\t\t$pag_total           = '-';\n\t\t\t\t\t$pag_width           = 0;\n\t\t\t\t\t$percentage_bg       = 'success';\n\t\t\t\t\t$pag_txt_color       = '';\n\t\t\t\t\t$usage               = false;\n\n\t\t\t\t\tif ( ! empty( $cloud_summary[ 'usage.' . $svc ] ) ) {\n\t\t\t\t\t\t$usage               = $cloud_summary[ 'usage.' . $svc ];\n\t\t\t\t\t\t$finished_percentage = floor( $usage['used'] * 100 / $usage['quota'] );\n\t\t\t\t\t\t$used                = (int) $usage['used'];\n\t\t\t\t\t\t$quota               = (int) $usage['quota'];\n\t\t\t\t\t\t$pag_used            = ! empty( $usage['pag_used'] ) ? (int) $usage['pag_used'] : 0;\n\t\t\t\t\t\t$pag_bal             = ! empty( $usage['pag_bal'] ) ? (int) $usage['pag_bal'] : 0;\n\t\t\t\t\t\t$pag_total           = $pag_used + $pag_bal;\n\t\t\t\t\t\tif ( ! empty( $usage['total_used'] ) ) {\n\t\t\t\t\t\t\t$total_used = (int) $usage['total_used'];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( $pag_total ) {\n\t\t\t\t\t\t\t$pag_width = round( $pag_used / $pag_total * 100 ) . '%';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( $finished_percentage > 85 ) {\n\t\t\t\t\t\t\t$percentage_bg = 'warning';\n\t\t\t\t\t\t\tif ( $finished_percentage > 95 ) {\n\t\t\t\t\t\t\t\t$percentage_bg = 'danger';\n\t\t\t\t\t\t\t\tif ( $pag_bal ) {\n\t\t\t\t\t\t\t\t\t$percentage_bg = 'warning';\n\t\t\t\t\t\t\t\t\t$pag_txt_color = 'litespeed-success';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t?>\n\t\t\t\t\t<div class=\"postbox litespeed-postbox\">\n\t\t\t\t\t\t<div class=\"inside\">\n\t\t\t\t\t\t\t<h3 class=\"litespeed-title\"><?php echo esc_html( $svc_title ); ?></h3>\n\t\t\t\t\t\t\t<div class=\"litespeed-flex-container\">\n\t\t\t\t\t\t\t\t<div class=\"litespeed-icon-vertical-middle litespeed-pie-<?php echo esc_attr( $percentage_bg ); ?>\">\n\t\t\t\t\t\t\t\t\t<?php echo wp_kses( GUI::pie( $finished_percentage, 60, false ), GUI::allowed_svg_tags() ); ?>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<div class=\"litespeed-dashboard-stats\">\n\t\t\t\t\t\t\t\t\t\t<h3><?php echo 'img_optm' === $svc ? esc_html__( 'Fast Queue Usage', 'litespeed-cache' ) : esc_html__( 'Usage', 'litespeed-cache' ); ?></h3>\n\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t<strong><?php echo esc_html( $used ); ?></strong>\n\t\t\t\t\t\t\t\t\t\t\t<?php if ( $used !== $quota ) : ?>\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"litespeed-desc\"> / <?php echo esc_html( $quota ); ?></span>\n\t\t\t\t\t\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<?php if ( $pag_total > 0 ) : ?>\n\t\t\t\t\t\t\t\t<p class=\"litespeed-dashboard-stats-payg <?php echo esc_attr( $pag_txt_color ); ?>\">\n\t\t\t\t\t\t\t\t\t<?php esc_html_e( 'PAYG Balance', 'litespeed-cache' ); ?>: <strong><?php echo esc_html( $pag_bal ); ?></strong>\n\t\t\t\t\t\t\t\t\t<button class=\"litespeed-info-button\" data-balloon-pos=\"up\" aria-label=\"<?php echo esc_attr( sprintf( esc_html__( 'PAYG used this month: %s. PAYG balance and usage not included in above quota calculation.', 'litespeed-cache' ), $pag_used ) ); ?>\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"dashicons dashicons-info\"></span>\n\t\t\t\t\t\t\t\t\t\t<span class=\"screen-reader-text\"><?php esc_html_e( 'Pay as You Go Usage Statistics', 'litespeed-cache' ); ?></span>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t\t<?php if ( 'page_optm' === $svc && ! empty( $usage['sub_svc'] ) ) : ?>\n\t\t\t\t\t\t\t\t<p class=\"litespeed-dashboard-stats-total\">\n\t\t\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\t\t\t$i = 0;\n\t\t\t\t\t\t\t\t\tforeach ( $usage['sub_svc'] as $sub_svc => $sub_usage ) :\n\t\t\t\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t\t\t\t<span class=\"<?php echo $i++ > 0 ? 'litespeed-left10' : ''; ?>\">\n\t\t\t\t\t\t\t\t\t\t\t<?php echo esc_html( strtoupper( $sub_svc ) ); ?>: <strong><?php echo (int) $sub_usage; ?></strong>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<?php endforeach; ?>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t\t<?php if ( 'img_optm' === $svc ) : ?>\n\t\t\t\t\t\t\t\t<p class=\"litespeed-dashboard-stats-total\">\n\t\t\t\t\t\t\t\t\t<?php esc_html_e( 'Total Usage', 'litespeed-cache' ); ?>: <strong><?php echo esc_html( $total_used ); ?> / ∞</strong>\n\t\t\t\t\t\t\t\t\t<button class=\"litespeed-info-button\" data-balloon-pos=\"up\" aria-label=\"<?php esc_attr_e( 'Total images optimized in this month', 'litespeed-cache' ); ?>\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"dashicons dashicons-info\"></span>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<div class=\"clear\"></div>\n\t\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t\t<?php if ( isset( $usage['remaining_daily_quota'] ) && $usage['remaining_daily_quota'] >= 0 && isset( $usage['daily_quota'] ) && $usage['daily_quota'] >= 0 ) : ?>\n\t\t\t\t\t\t\t\t<p class=\"litespeed-dashboard-stats-total\">\n\t\t\t\t\t\t\t\t\t<?php esc_html_e( 'Remaining Daily Quota', 'litespeed-cache' ); ?>: <strong><?php echo esc_html( $usage['remaining_daily_quota'] ); ?> / <?php echo esc_html( $usage['daily_quota'] ); ?></strong>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<div class=\"clear\"></div>\n\t\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t<?php endforeach; ?>\n\t\t\t\t<?php if ( ! empty( $cloud_summary['partner'] ) ) : ?>\n\t\t\t\t\t<div class=\"litespeed-postbox litespeed-postbox-partner\">\n\t\t\t\t\t\t<div class=\"inside\">\n\t\t\t\t\t\t\t<h3 class=\"litespeed-title\"><?php esc_html_e( 'Partner Benefits Provided by', 'litespeed-cache' ); ?></h3>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<?php if ( ! empty( $cloud_summary['partner']['logo'] ) ) : ?>\n\t\t\t\t\t\t\t\t\t<?php if ( ! empty( $cloud_summary['partner']['url'] ) ) : ?>\n\t\t\t\t\t\t\t\t\t\t<a href=\"<?php echo esc_url( $cloud_summary['partner']['url'] ); ?>\" target=\"_blank\">\n\t\t\t\t\t\t\t\t\t\t\t<img src=\"<?php echo esc_url( $cloud_summary['partner']['logo'] ); ?>\" alt=\"<?php echo esc_attr( $cloud_summary['partner']['name'] ); ?>\">\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t<?php else : ?>\n\t\t\t\t\t\t\t\t\t\t<img src=\"<?php echo esc_url( $cloud_summary['partner']['logo'] ); ?>\" alt=\"<?php echo esc_attr( $cloud_summary['partner']['name'] ); ?>\">\n\t\t\t\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t\t\t<?php elseif ( ! empty( $cloud_summary['partner']['name'] ) ) : ?>\n\t\t\t\t\t\t\t\t\t<?php if ( ! empty( $cloud_summary['partner']['url'] ) ) : ?>\n\t\t\t\t\t\t\t\t\t\t<a href=\"<?php echo esc_url( $cloud_summary['partner']['url'] ); ?>\" target=\"_blank\">\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"postbox-partner-name\"><?php echo esc_html( $cloud_summary['partner']['name'] ); ?></span>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t<?php else : ?>\n\t\t\t\t\t\t\t\t\t\t<span class=\"postbox-partner-name\"><?php echo esc_html( $cloud_summary['partner']['name'] ); ?></span>\n\t\t\t\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t<?php endif; ?>\n\t\t\t</div>\n\n\t\t\t<p class=\"litespeed-right litespeed-qc-dashboard-link\">\n\t\t\t\t<?php\n\t\t\t\tif ( ! empty( $cloud_summary['partner'] ) && ! empty( $cloud_summary['partner']['login_title'] ) && ! empty( $cloud_summary['partner']['login_link'] ) ) :\n\t\t\t\t\tDoc::learn_more( $cloud_summary['partner']['login_link'], $cloud_summary['partner']['login_title'], true, 'button litespeed-btn-warning' );\n\t\t\t\telseif ( ! empty( $cloud_summary['partner'] ) && ! empty( $cloud_summary['partner']['disable_qc_login'] ) ) :\n\t\t\t\t\t// Skip rendering any link or button.\n\t\t\t\t\techo '';\n\t\t\t\telse :\n\t\t\t\t\tif ( ! $cloud_instance->activated() ) :\n\t\t\t\t\t\tDoc::learn_more(\n\t\t\t\t\t\t\tUtility::build_url( Router::ACTION_CLOUD, Cloud::TYPE_ACTIVATE ),\n\t\t\t\t\t\t\tesc_html__( 'Enable QUIC.cloud Services', 'litespeed-cache' ),\n\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t'button litespeed-btn-warning'\n\t\t\t\t\t\t);\n\t\t\t\t\telseif ( ! empty( $cloud_summary['qc_activated'] ) && 'anonymous' !== $cloud_summary['qc_activated'] ) :\n\t\t\t\t\t\t?>\n\t\t\t\t\t\t<a href=\"<?php echo esc_url( $cloud_instance->qc_link() ); ?>\" class=\"litespeed-link-with-icon\" target=\"qc\">\n\t\t\t\t\t\t\t<?php esc_html_e( 'Go to QUIC.cloud dashboard', 'litespeed-cache' ); ?> <span class=\"dashicons dashicons-external\"></span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t<?php else : ?>\n\t\t\t\t\t\t<?php\n\t\t\t\t\t\tDoc::learn_more(\n\t\t\t\t\t\t\tUtility::build_url( Router::ACTION_CLOUD, Cloud::TYPE_LINK ),\n\t\t\t\t\t\t\tesc_html__( 'Link to QUIC.cloud', 'litespeed-cache' ),\n\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t'button litespeed-btn-warning'\n\t\t\t\t\t\t);\n\t\t\t\t\t\t?>\n\t\t\t\t\t<?php endif; ?>\n\t\t\t\t<?php endif; ?>\n\t\t\t</p>\n\n\t\t\t<div class=\"litespeed-dashboard-group\">\n\t\t\t\t<hr>\n\t\t\t\t<div class=\"litespeed-flex-container\">\n\t\t\t\t\t<div class=\"postbox litespeed-postbox litespeed-postbox-pagetime\">\n\t\t\t\t\t\t<div class=\"inside\">\n\t\t\t\t\t\t\t<h3 class=\"litespeed-title\">\n\t\t\t\t\t\t\t\t<?php esc_html_e( 'Page Load Time', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t\t\t<?php if ( $can_page_load_time ) : ?>\n\t\t\t\t\t\t\t\t\t<?php $closest_server = Cloud::get_summary( 'server.' . Cloud::SVC_HEALTH ); ?>\n\t\t\t\t\t\t\t\t\t<?php if ( $closest_server ) : ?>\n\t\t\t\t\t\t\t\t\t\t<a href=\"<?php echo esc_url( Utility::build_url( Router::ACTION_CLOUD, Cloud::TYPE_REDETECT_CLOUD, false, null, array( 'svc' => Cloud::SVC_HEALTH ) ) ); ?>\"\n\t\t\t\t\t\t\t\t\t\t\tdata-balloon-pos=\"up\"\n\t\t\t\t\t\t\t\t\t\t\tdata-balloon-break\n\t\t\t\t\t\t\t\t\t\t\taria-label=\"<?php echo esc_attr( sprintf( esc_html__( 'Current closest Cloud server is %s. Click to redetect.', 'litespeed-cache' ), esc_html( $closest_server ) ) ); ?>\"\n\t\t\t\t\t\t\t\t\t\t\tdata-litespeed-cfm=\"<?php esc_attr_e( 'Are you sure you want to redetect the closest cloud server for this service?', 'litespeed-cache' ); ?>\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"litespeed-title-right-icon\">\n\t\t\t\t\t\t\t\t\t\t\t<i class='litespeed-quic-icon'></i> <small><?php esc_html_e( 'Redetect', 'litespeed-cache' ); ?></small>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div class=\"litespeed-flex-container\">\n\t\t\t\t\t\t\t\t\t<?php if ( $can_page_load_time && ! empty( $health_scores['speed_before'] ) ) : ?>\n\t\t\t\t\t\t\t\t\t\t<div class=\"litespeed-score-col\">\n\t\t\t\t\t\t\t\t\t\t\t<p class=\"litespeed-text-grey\">\n\t\t\t\t\t\t\t\t\t\t\t\t<?php esc_html_e( 'Before', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"litespeed-text-md litespeed-text-grey\">\n\t\t\t\t\t\t\t\t\t\t\t\t<?php echo esc_html( $health_scores['speed_before'] ); ?><span class=\"litespeed-text-large\">s</span>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"litespeed-score-col\">\n\t\t\t\t\t\t\t\t\t\t\t<p class=\"litespeed-text-grey\">\n\t\t\t\t\t\t\t\t\t\t\t\t<?php esc_html_e( 'After', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"litespeed-text-md litespeed-text-success\">\n\t\t\t\t\t\t\t\t\t\t\t\t<?php echo esc_html( $health_scores['speed_after'] ); ?><span class=\"litespeed-text-large\">s</span>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"litespeed-score-col litespeed-score-col--imp\">\n\t\t\t\t\t\t\t\t\t\t\t<p class=\"litespeed-text-grey\" style=\"white-space: nowrap;\">\n\t\t\t\t\t\t\t\t\t\t\t\t<?php esc_html_e( 'Improved by', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"litespeed-text-jumbo litespeed-text-success\">\n\t\t\t\t\t\t\t\t\t\t\t\t<?php echo esc_html( $health_scores['speed_improved'] ); ?><span class=\"litespeed-text-large\">%</span>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<?php else : ?>\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<p><?php esc_html_e( 'You must be using one of the following products in order to measure Page Load Time:', 'litespeed-cache' ); ?></p>\n\t\t\t\t\t\t\t\t\t\t\t<a href=\"https://www.litespeedtech.com/products/litespeed-web-server\" target=\"_blank\"><?php esc_html_e( 'LiteSpeed Web Server', 'litespeed-cache' ); ?></a>\n\t\t\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t\t\t<a href=\"https://openlitespeed.org/\" target=\"_blank\"><?php esc_html_e( 'OpenLiteSpeed Web Server', 'litespeed-cache' ); ?></a>\n\t\t\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t\t\t<a href=\"https://www.litespeedtech.com/products/litespeed-web-adc\" target=\"_blank\"><?php esc_html_e( 'LiteSpeed Web ADC', 'litespeed-cache' ); ?></a>\n\t\t\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t\t\t<a href=\"https://quic.cloud\" target=\"_blank\"><?php esc_html_e( 'QUIC.cloud CDN', 'litespeed-cache' ); ?></a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<?php if ( $can_page_load_time ) : ?>\n\t\t\t\t\t\t\t<div class=\"inside litespeed-postbox-footer litespeed-postbox-footer--compact\">\n\t\t\t\t\t\t\t\t<?php if ( ! empty( $cloud_summary['last_request.health-speed'] ) ) : ?>\n\t\t\t\t\t\t\t\t\t<span class=\"litespeed-right10\">\n\t\t\t\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\t\t\t\tprintf(\n\t\t\t\t\t\t\t\t\t\t\tesc_html__( 'Requested: %s ago', 'litespeed-cache' ),\n\t\t\t\t\t\t\t\t\t\t\t'<span data-balloon-pos=\"up\" aria-label=\"' . esc_attr( Utility::readable_time( $cloud_summary['last_request.health-speed'] ) ) . '\">' . esc_html( human_time_diff( $cloud_summary['last_request.health-speed'] ) ) . '</span>'\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t\t\t<a href=\"<?php echo esc_url( Utility::build_url( Router::ACTION_HEALTH, Health::TYPE_SPEED ) ); ?>\" class=\"button button-secondary button-small\">\n\t\t\t\t\t\t\t\t\t<span class=\"dashicons dashicons-update\"></span>\n\t\t\t\t\t\t\t\t\t<?php esc_html_e( 'Refresh', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t\t\t\t<span class=\"screen-reader-text\"><?php esc_html_e( 'Refresh page load time', 'litespeed-cache' ); ?></span>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"postbox litespeed-postbox litespeed-postbox-pagespeed\">\n\t\t\t\t\t\t<div class=\"inside\">\n\t\t\t\t\t\t\t<h3 class=\"litespeed-title\">\n\t\t\t\t\t\t\t\t<?php esc_html_e( 'PageSpeed Score', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t\t\t<?php $guest_option = Base::O_GUEST; ?>\n\t\t\t\t\t\t\t\t<a href=\"<?php echo esc_url( admin_url( 'admin.php?page=litespeed-general#settings' ) ); ?>\" class=\"litespeed-title-right-icon\"><?php echo esc_html( Lang::title( $guest_option ) ); ?></a>\n\t\t\t\t\t\t\t\t<?php if ( $this->conf( $guest_option ) ) : ?>\n\t\t\t\t\t\t\t\t\t<span class=\"litespeed-label-success litespeed-label-dashboard\"><?php esc_html_e( 'ON', 'litespeed-cache' ); ?></span>\n\t\t\t\t\t\t\t\t<?php else : ?>\n\t\t\t\t\t\t\t\t\t<span class=\"litespeed-label-danger litespeed-label-dashboard\"><?php esc_html_e( 'OFF', 'litespeed-cache' ); ?></span>\n\t\t\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div class=\"litespeed-margin-bottom20\">\n\t\t\t\t\t\t\t\t\t<div class=\"litespeed-row-flex\" style=\"margin-left: -10px;\">\n\t\t\t\t\t\t\t\t\t\t<?php if ( ! empty( $health_scores['score_before'] ) ) : ?>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"litespeed-width-1-3 litespeed-padding-space litespeed-margin-x5\">\n\t\t\t\t\t\t\t\t\t\t\t\t<p class=\"litespeed-text-grey litespeed-text-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<?php esc_html_e( 'Before', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"litespeed-promo-score\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<?php echo wp_kses( GUI::pie( $health_scores['score_before'], 45, false, true, 'litespeed-pie-' . esc_attr( GUI::cls()->get_cls_of_pagescore( $health_scores['score_before'] ) ) ), GUI::allowed_svg_tags() ); ?>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"litespeed-width-1-3 litespeed-padding-space litespeed-margin-x5\">\n\t\t\t\t\t\t\t\t\t\t\t\t<p class=\"litespeed-text-grey litespeed-text-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<?php esc_html_e( 'After', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"litespeed-promo-score\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<?php echo wp_kses( GUI::pie( $health_scores['score_after'], 45, false, true, 'litespeed-pie-' . esc_attr( GUI::cls()->get_cls_of_pagescore( $health_scores['score_after'] ) ) ), GUI::allowed_svg_tags() ); ?>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"litespeed-width-1-3 litespeed-padding-space litespeed-margin-x5\">\n\t\t\t\t\t\t\t\t\t\t\t\t<p class=\"litespeed-text-grey\" style=\"white-space: nowrap;\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<?php esc_html_e( 'Improved by', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"litespeed-postbox-score-improve litespeed-text-fern\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<?php echo esc_html( $health_scores['score_improved'] ); ?><span class=\"litespeed-text-large\">%</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"inside litespeed-postbox-footer litespeed-postbox-footer--compact\">\n\t\t\t\t\t\t\t<?php if ( ! empty( $cloud_summary['last_request.health-score'] ) ) : ?>\n\t\t\t\t\t\t\t\t<span class=\"litespeed-right10\">\n\t\t\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\t\t\tprintf(\n\t\t\t\t\t\t\t\t\t\tesc_html__( 'Requested: %s ago', 'litespeed-cache' ),\n\t\t\t\t\t\t\t\t\t\t'<span data-balloon-pos=\"up\" aria-label=\"' . esc_attr( Utility::readable_time( $cloud_summary['last_request.health-score'] ) ) . '\">' . esc_html( human_time_diff( $cloud_summary['last_request.health-score'] ) ) . '</span>'\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t\t<a href=\"<?php echo esc_url( Utility::build_url( Router::ACTION_HEALTH, Health::TYPE_SCORE ) ); ?>\" class=\"button button-secondary button-small\">\n\t\t\t\t\t\t\t\t<span class=\"dashicons dashicons-update\"></span>\n\t\t\t\t\t\t\t\t<?php esc_html_e( 'Refresh', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t\t\t<span class=\"screen-reader-text\"><?php esc_html_e( 'Refresh page score', 'litespeed-cache' ); ?></span>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"postbox litespeed-postbox litespeed-postbox-double litespeed-postbox-imgopt\">\n\t\t\t\t\t\t<div class=\"inside\">\n\t\t\t\t\t\t\t<h3 class=\"litespeed-title\">\n\t\t\t\t\t\t\t\t<?php esc_html_e( 'Image Optimization Summary', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t\t\t<a href=\"<?php echo esc_url( admin_url( 'admin.php?page=litespeed-img_optm' ) ); ?>\" class=\"litespeed-title-right-icon\"><?php esc_html_e( 'More', 'litespeed-cache' ); ?></a>\n\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t<div class=\"litespeed-postbox-double-content\">\n\t\t\t\t\t\t\t\t<div class=\"litespeed-postbox-double-col\">\n\t\t\t\t\t\t\t\t\t<div class=\"litespeed-flex-container\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"litespeed-icon-vertical-middle\">\n\t\t\t\t\t\t\t\t\t\t\t<?php echo wp_kses( GUI::pie( $img_finished_percentage, 70, true ), GUI::allowed_svg_tags() ); ?>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"litespeed-dashboard-stats\">\n\t\t\t\t\t\t\t\t\t\t\t\t<a data-litespeed-onlyonce class=\"button button-primary\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t<?php if ( ! empty( $img_count['groups_new'] ) || ! empty( $img_count[ 'groups.' . Img_Optm::STATUS_RAW ] ) ) : ?>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thref=\"<?php echo esc_url( Utility::build_url( Router::ACTION_IMG_OPTM, Img_Optm::TYPE_NEW_REQ ) ); ?>\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t<?php else : ?>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thref=\"javascript:;\" disabled\n\t\t\t\t\t\t\t\t\t\t\t\t\t<?php endif; ?>>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"dashicons dashicons-images-alt2\"></span><?php esc_html_e( 'Send Optimization Request', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t<?php esc_html_e( 'Total Reduction', 'litespeed-cache' ); ?>: <code><?php echo isset( $img_optm_summary['reduced'] ) ? esc_html( Utility::real_size( $img_optm_summary['reduced'] ) ) : '-'; ?></code>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t<?php esc_html_e( 'Images Pulled', 'litespeed-cache' ); ?>: <code><?php echo isset( $img_optm_summary['img_taken'] ) ? esc_html( $img_optm_summary['img_taken'] ) : '-'; ?></code>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"litespeed-postbox-double-col\">\n\t\t\t\t\t\t\t\t\t<?php if ( ! empty( $img_count[ 'group.' . Img_Optm::STATUS_REQUESTED ] ) ) : ?>\n\t\t\t\t\t\t\t\t\t\t<p class=\"litespeed-success\">\n\t\t\t\t\t\t\t\t\t\t\t<?php esc_html_e( 'Images requested', 'litespeed-cache' ); ?>:\n\t\t\t\t\t\t\t\t\t\t\t<code>\n\t\t\t\t\t\t\t\t\t\t\t\t<?php echo esc_html( Admin_Display::print_plural( $img_count[ 'group.' . Img_Optm::STATUS_REQUESTED ] ) ); ?>\n\t\t\t\t\t\t\t\t\t\t\t\t(<?php echo esc_html( Admin_Display::print_plural( $img_count[ 'img.' . Img_Optm::STATUS_REQUESTED ], 'image' ) ); ?>)\n\t\t\t\t\t\t\t\t\t\t\t</code>\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t\t\t\t<?php if ( ! empty( $img_count[ 'group.' . Img_Optm::STATUS_NOTIFIED ] ) ) : ?>\n\t\t\t\t\t\t\t\t\t\t<p class=\"litespeed-success\">\n\t\t\t\t\t\t\t\t\t\t\t<?php esc_html_e( 'Images notified to pull', 'litespeed-cache' ); ?>:\n\t\t\t\t\t\t\t\t\t\t\t<code>\n\t\t\t\t\t\t\t\t\t\t\t\t<?php echo esc_html( Admin_Display::print_plural( $img_count[ 'group.' . Img_Optm::STATUS_NOTIFIED ] ) ); ?>\n\t\t\t\t\t\t\t\t\t\t\t\t(<?php echo esc_html( Admin_Display::print_plural( $img_count[ 'img.' . Img_Optm::STATUS_NOTIFIED ], 'image' ) ); ?>)\n\t\t\t\t\t\t\t\t\t\t\t</code>\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t<?php esc_html_e( 'Last Request', 'litespeed-cache' ); ?>: <code><?php echo ! empty( $img_optm_summary['last_requested'] ) ? esc_html( Utility::readable_time( $img_optm_summary['last_requested'] ) ) : '-'; ?></code>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t<?php esc_html_e( 'Last Pull', 'litespeed-cache' ); ?>: <code><?php echo ! empty( $img_optm_summary['last_pull'] ) ? esc_html( Utility::readable_time( $img_optm_summary['last_pull'] ) ) : '-'; ?></code>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\t\t\t$opt_list = array(\n\t\t\t\t\t\t\t\t\t\tBase::O_IMG_OPTM_AUTO => Lang::title( Base::O_IMG_OPTM_AUTO ),\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tforeach ( $opt_list as $opt_id => $opt_title ) :\n\t\t\t\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t<?php if ( $this->conf( $opt_id ) ) : ?>\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"litespeed-label-success litespeed-label-dashboard\"><?php esc_html_e( 'ON', 'litespeed-cache' ); ?></span>\n\t\t\t\t\t\t\t\t\t\t\t<?php else : ?>\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"litespeed-label-danger litespeed-label-dashboard\"><?php esc_html_e( 'OFF', 'litespeed-cache' ); ?></span>\n\t\t\t\t\t\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t\t\t\t\t\t<a href=\"<?php echo esc_url( admin_url( 'admin.php?page=litespeed-img_optm#settings' ) ); ?>\"><?php echo esc_html( $opt_title ); ?></a>\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t<?php endforeach; ?>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"postbox litespeed-postbox litespeed-postbox-cache\">\n\t\t\t\t\t\t<div class=\"inside\">\n\t\t\t\t\t\t\t<h3 class=\"litespeed-title\">\n\t\t\t\t\t\t\t\t<?php esc_html_e( 'Cache Status', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t\t\t<a href=\"<?php echo esc_url( admin_url( 'admin.php?page=litespeed-cache' ) ); ?>\" class=\"litespeed-title-right-icon\"><?php esc_html_e( 'More', 'litespeed-cache' ); ?></a>\n\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\t$cache_list = array(\n\t\t\t\t\t\t\t\tBase::O_CACHE         => esc_html__( 'Public Cache', 'litespeed-cache' ),\n\t\t\t\t\t\t\t\tBase::O_CACHE_PRIV    => esc_html__( 'Private Cache', 'litespeed-cache' ),\n\t\t\t\t\t\t\t\tBase::O_OBJECT        => esc_html__( 'Object Cache', 'litespeed-cache' ),\n\t\t\t\t\t\t\t\tBase::O_CACHE_BROWSER => esc_html__( 'Browser Cache', 'litespeed-cache' ),\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tforeach ( $cache_list as $cache_option => $cache_title ) :\n\t\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t<?php if ( $this->conf( $cache_option ) ) : ?>\n\t\t\t\t\t\t\t\t\t\t<span class=\"litespeed-label-success litespeed-label-dashboard\"><?php esc_html_e( 'ON', 'litespeed-cache' ); ?></span>\n\t\t\t\t\t\t\t\t\t<?php else : ?>\n\t\t\t\t\t\t\t\t\t\t<span class=\"litespeed-label-danger litespeed-label-dashboard\"><?php esc_html_e( 'OFF', 'litespeed-cache' ); ?></span>\n\t\t\t\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t\t\t\t<?php echo esc_html( $cache_title ); ?>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<?php endforeach; ?>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"postbox litespeed-postbox litespeed-postbox-ccss\">\n\t\t\t\t\t\t<div class=\"inside\">\n\t\t\t\t\t\t\t<h3 class=\"litespeed-title\">\n\t\t\t\t\t\t\t\t<?php esc_html_e( 'Critical CSS', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t\t\t<a href=\"<?php echo esc_url( admin_url( 'admin.php?page=litespeed-page_optm#settings_css' ) ); ?>\" class=\"litespeed-title-right-icon\"><?php esc_html_e( 'More', 'litespeed-cache' ); ?></a>\n\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t<?php if ( ! empty( $css_summary['last_request_ccss'] ) ) : ?>\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\t\t\tprintf(\n\t\t\t\t\t\t\t\t\t\tesc_html__( 'Last generated: %s', 'litespeed-cache' ),\n\t\t\t\t\t\t\t\t\t\t'<code>' . esc_html( Utility::readable_time( $css_summary['last_request_ccss'] ) ) . '</code>'\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\t\t\tprintf(\n\t\t\t\t\t\t\t\t\t\tesc_html__( 'Time to execute previous request: %s', 'litespeed-cache' ),\n\t\t\t\t\t\t\t\t\t\t'<code>' . esc_html( $css_summary['last_spent_ccss'] ) . 's</code>'\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<?php esc_html_e( 'Requests in queue', 'litespeed-cache' ); ?>: <code><?php echo ! empty( $ccss_count ) ? esc_html( $ccss_count ) : '-'; ?></code>\n\t\t\t\t\t\t\t\t<a href=\"<?php echo ! empty( $ccss_count ) ? esc_url( Utility::build_url( Router::ACTION_CSS, CSS::TYPE_GEN_CCSS ) ) : 'javascript:;'; ?>\"\n\t\t\t\t\t\t\t\t\tclass=\"button button-secondary button-small <?php echo empty( $ccss_count ) ? 'disabled' : ''; ?>\">\n\t\t\t\t\t\t\t\t\t<?php esc_html_e( 'Force cron', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<?php if ( ! empty( $cloud_summary['last_request.ccss'] ) ) : ?>\n\t\t\t\t\t\t\t<div class=\"inside litespeed-postbox-footer litespeed-postbox-footer--compact\">\n\t\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\t\tprintf(\n\t\t\t\t\t\t\t\t\tesc_html__( 'Last requested: %s', 'litespeed-cache' ),\n\t\t\t\t\t\t\t\t\tesc_html( Utility::readable_time( $cloud_summary['last_request.ccss'] ) )\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"postbox litespeed-postbox litespeed-postbox-ucss\">\n\t\t\t\t\t\t<div class=\"inside\">\n\t\t\t\t\t\t\t<h3 class=\"litespeed-title\">\n\t\t\t\t\t\t\t\t<?php esc_html_e( 'Unique CSS', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t\t\t<a href=\"<?php echo esc_url( admin_url( 'admin.php?page=litespeed-page_optm#settings_css' ) ); ?>\" class=\"litespeed-title-right-icon\"><?php esc_html_e( 'More', 'litespeed-cache' ); ?></a>\n\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t<?php if ( ! empty( $ucss_summary['last_request'] ) ) : ?>\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\t\t\tprintf(\n\t\t\t\t\t\t\t\t\t\tesc_html__( 'Last generated: %s', 'litespeed-cache' ),\n\t\t\t\t\t\t\t\t\t\t'<code>' . esc_html( Utility::readable_time( $ucss_summary['last_request'] ) ) . '</code>'\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\t\t\tprintf(\n\t\t\t\t\t\t\t\t\t\tesc_html__( 'Time to execute previous request: %s', 'litespeed-cache' ),\n\t\t\t\t\t\t\t\t\t\t'<code>' . esc_html( $ucss_summary['last_spent'] ) . 's</code>'\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<?php esc_html_e( 'Requests in queue', 'litespeed-cache' ); ?>: <code><?php echo ! empty( $ucss_count ) ? esc_html( $ucss_count ) : '-'; ?></code>\n\t\t\t\t\t\t\t\t<a href=\"<?php echo ! empty( $ucss_count ) ? esc_url( Utility::build_url( Router::ACTION_UCSS, UCSS::TYPE_GEN ) ) : 'javascript:;'; ?>\"\n\t\t\t\t\t\t\t\t\tclass=\"button button-secondary button-small <?php echo empty( $ucss_count ) ? 'disabled' : ''; ?>\">\n\t\t\t\t\t\t\t\t\t<?php esc_html_e( 'Force cron', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<?php if ( ! empty( $cloud_summary['last_request.ucss'] ) ) : ?>\n\t\t\t\t\t\t\t<div class=\"inside litespeed-postbox-footer litespeed-postbox-footer--compact\">\n\t\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\t\tprintf(\n\t\t\t\t\t\t\t\t\tesc_html__( 'Last requested: %s', 'litespeed-cache' ),\n\t\t\t\t\t\t\t\t\tesc_html( Utility::readable_time( $cloud_summary['last_request.ucss'] ) )\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"postbox litespeed-postbox litespeed-postbox-lqip\">\n\t\t\t\t\t\t<div class=\"inside\">\n\t\t\t\t\t\t\t<h3 class=\"litespeed-title\">\n\t\t\t\t\t\t\t\t<?php esc_html_e( 'Low Quality Image Placeholder', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t\t\t<a href=\"<?php echo esc_url( admin_url( 'admin.php?page=litespeed-page_optm#settings_media' ) ); ?>\" class=\"litespeed-title-right-icon\"><?php esc_html_e( 'More', 'litespeed-cache' ); ?></a>\n\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t<?php if ( ! empty( $placeholder_summary['last_request'] ) ) : ?>\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\t\t\tprintf(\n\t\t\t\t\t\t\t\t\t\tesc_html__( 'Last generated: %s', 'litespeed-cache' ),\n\t\t\t\t\t\t\t\t\t\t'<code>' . esc_html( Utility::readable_time( $placeholder_summary['last_request'] ) ) . '</code>'\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\t\t\tprintf(\n\t\t\t\t\t\t\t\t\t\tesc_html__( 'Time to execute previous request: %s', 'litespeed-cache' ),\n\t\t\t\t\t\t\t\t\t\t'<code>' . esc_html( $placeholder_summary['last_spent'] ) . 's</code>'\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<?php esc_html_e( 'Requests in queue', 'litespeed-cache' ); ?>: <code><?php echo ! empty( $placeholder_queue_count ) ? esc_html( $placeholder_queue_count ) : '-'; ?></code>\n\t\t\t\t\t\t\t\t<a href=\"<?php echo ! empty( $placeholder_queue_count ) ? esc_url( Utility::build_url( Router::ACTION_PLACEHOLDER, Placeholder::TYPE_GENERATE ) ) : 'javascript:;'; ?>\"\n\t\t\t\t\t\t\t\t\tclass=\"button button-secondary button-small <?php echo empty( $placeholder_queue_count ) ? 'disabled' : ''; ?>\">\n\t\t\t\t\t\t\t\t\t<?php esc_html_e( 'Force cron', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<?php if ( ! empty( $cloud_summary['last_request.lqip'] ) ) : ?>\n\t\t\t\t\t\t\t<div class=\"inside litespeed-postbox-footer litespeed-postbox-footer--compact\">\n\t\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\t\tprintf(\n\t\t\t\t\t\t\t\t\tesc_html__( 'Last requested: %s', 'litespeed-cache' ),\n\t\t\t\t\t\t\t\t\tesc_html( Utility::readable_time( $cloud_summary['last_request.lqip'] ) )\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"postbox litespeed-postbox litespeed-postbox-vpi\">\n\t\t\t\t\t\t<div class=\"inside\">\n\t\t\t\t\t\t\t<h3 class=\"litespeed-title\">\n\t\t\t\t\t\t\t\t<?php esc_html_e( 'Viewport Image', 'litespeed-cache' ); ?> (VPI)\n\t\t\t\t\t\t\t\t<a href=\"<?php echo esc_url( admin_url( 'admin.php?page=litespeed-page_optm#settings_vpi' ) ); ?>\" class=\"litespeed-title-right-icon\"><?php esc_html_e( 'More', 'litespeed-cache' ); ?></a>\n\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t<?php if ( ! empty( $vpi_summary['last_request'] ) ) : ?>\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\t\t\tprintf(\n\t\t\t\t\t\t\t\t\t\tesc_html__( 'Last generated: %s', 'litespeed-cache' ),\n\t\t\t\t\t\t\t\t\t\t'<code>' . esc_html( Utility::readable_time( $vpi_summary['last_request'] ) ) . '</code>'\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\t\t\tprintf(\n\t\t\t\t\t\t\t\t\t\tesc_html__( 'Time to execute previous request: %s', 'litespeed-cache' ),\n\t\t\t\t\t\t\t\t\t\t'<code>' . esc_html( $vpi_summary['last_spent'] ) . 's</code>'\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<?php esc_html_e( 'Requests in queue', 'litespeed-cache' ); ?>: <code><?php echo ! empty( $vpi_queue_count ) ? esc_html( $vpi_queue_count ) : '-'; ?></code>\n\t\t\t\t\t\t\t\t<a href=\"<?php echo ! empty( $vpi_queue_count ) ? esc_url( Utility::build_url( Router::ACTION_VPI, VPI::TYPE_GEN ) ) : 'javascript:;'; ?>\"\n\t\t\t\t\t\t\t\t\tclass=\"button button-secondary button-small <?php echo empty( $vpi_queue_count ) ? 'disabled' : ''; ?>\">\n\t\t\t\t\t\t\t\t\t<?php esc_html_e( 'Force cron', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<?php if ( ! empty( $cloud_summary['last_request.vpi'] ) ) : ?>\n\t\t\t\t\t\t\t<div class=\"inside litespeed-postbox-footer litespeed-postbox-footer--compact\">\n\t\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\t\tprintf(\n\t\t\t\t\t\t\t\t\tesc_html__( 'Last requested: %s', 'litespeed-cache' ),\n\t\t\t\t\t\t\t\t\tesc_html( Utility::readable_time( $cloud_summary['last_request.vpi'] ) )\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"postbox litespeed-postbox litespeed-postbox-crawler\">\n\t\t\t\t\t\t<div class=\"inside\">\n\t\t\t\t\t\t\t<h3 class=\"litespeed-title\">\n\t\t\t\t\t\t\t\t<?php esc_html_e( 'Crawler Status', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t\t\t<a href=\"<?php echo esc_url( admin_url( 'admin.php?page=litespeed-crawler' ) ); ?>\" class=\"litespeed-title-right-icon\"><?php esc_html_e( 'More', 'litespeed-cache' ); ?></a>\n\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<code><?php echo esc_html( count( Crawler::cls()->list_crawlers() ) ); ?></code> <?php esc_html_e( 'Crawler(s)', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<?php esc_html_e( 'Currently active crawler', 'litespeed-cache' ); ?>: <code><?php echo esc_html( $crawler_summary['curr_crawler'] ); ?></code>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<?php if ( ! empty( $crawler_summary['curr_crawler_beginning_time'] ) ) : ?>\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t<span class=\"litespeed-bold\"><?php esc_html_e( 'Current crawler started at', 'litespeed-cache' ); ?>:</span>\n\t\t\t\t\t\t\t\t\t<?php echo esc_html( Utility::readable_time( $crawler_summary['curr_crawler_beginning_time'] ) ); ?>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t\t<?php if ( ! empty( $crawler_summary['last_start_time'] ) ) : ?>\n\t\t\t\t\t\t\t\t<p class=\"litespeed-desc\">\n\t\t\t\t\t\t\t\t\t<span class=\"litespeed-bold\"><?php esc_html_e( 'Last interval', 'litespeed-cache' ); ?>:</span>\n\t\t\t\t\t\t\t\t\t<?php echo esc_html( Utility::readable_time( $crawler_summary['last_start_time'] ) ); ?>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t\t<?php if ( ! empty( $crawler_summary['end_reason'] ) ) : ?>\n\t\t\t\t\t\t\t\t<p class=\"litespeed-desc\">\n\t\t\t\t\t\t\t\t\t<span class=\"litespeed-bold\"><?php esc_html_e( 'Ended reason', 'litespeed-cache' ); ?>:</span>\n\t\t\t\t\t\t\t\t\t<?php echo esc_html( $crawler_summary['end_reason'] ); ?>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t\t<?php if ( ! empty( $crawler_summary['last_crawled'] ) ) : ?>\n\t\t\t\t\t\t\t\t<p class=\"litespeed-desc\">\n\t\t\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\t\t\tprintf(\n\t\t\t\t\t\t\t\t\t\tesc_html__( '%1$s %2$d item(s)', 'litespeed-cache' ),\n\t\t\t\t\t\t\t\t\t\t'<span class=\"litespeed-bold\">' . esc_html__( 'Last crawled:', 'litespeed-cache' ) . '</span>',\n\t\t\t\t\t\t\t\t\t\tesc_html( $crawler_summary['last_crawled'] )\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"postbox litespeed-postbox litespeed-postbox-quiccloud <?php echo empty( $cloud_summary['qc_activated'] ) || 'cdn' !== $cloud_summary['qc_activated'] ? 'litespeed-postbox--quiccloud' : ''; ?>\">\n\t\t\t\t\t\t<div class=\"inside\">\n\t\t\t\t\t\t\t<h3 class=\"litespeed-title litespeed-dashboard-title--w-btn\">\n\t\t\t\t\t\t\t\t<span class=\"litespeed-quic-icon\"></span><?php esc_html_e( 'QUIC.cloud CDN', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t\t\t<?php if ( empty( $cloud_summary['qc_activated'] ) || 'cdn' !== $cloud_summary['qc_activated'] ) : ?>\n\t\t\t\t\t\t\t\t\t<a href=\"https://www.quic.cloud/quic-cloud-services-and-features/litespeed-cache-service/\" class=\"litespeed-title-right-icon\" target=\"_blank\"><?php esc_html_e( 'Learn More', 'litespeed-cache' ); ?></a>\n\t\t\t\t\t\t\t\t<?php else : ?>\n\t\t\t\t\t\t\t\t\t<a href=\"<?php echo esc_url( admin_url( 'admin.php?page=litespeed-cdn' ) ); ?>\" class=\"litespeed-title-right-icon\"><?php esc_html_e( 'More', 'litespeed-cache' ); ?></a>\n\t\t\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t<?php if ( empty( $cloud_summary['qc_activated'] ) || 'cdn' !== $cloud_summary['qc_activated'] ) : ?>\n\t\t\t\t\t\t\t\t<div class=\"litespeed-text-center litespeed-empty-space-medium\">\n\t\t\t\t\t\t\t\t\t<p class=\"litespeed-margin-bottom20\">\n\t\t\t\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\t\t\t\tDoc::learn_more(\n\t\t\t\t\t\t\t\t\t\t\tesc_url( Utility::build_url( Router::ACTION_CLOUD, $cloud_instance->activated() ? Cloud::TYPE_ENABLE_CDN : Cloud::TYPE_ACTIVATE ) ),\n\t\t\t\t\t\t\t\t\t\t\t'<span class=\"dashicons dashicons-saved\"></span>' . esc_html__( 'Enable QUIC.cloud CDN', 'litespeed-cache' ),\n\t\t\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t\t\t\t'button button-primary litespeed-button-cta'\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t<p class=\"litespeed-margin-bottom10 litespeed-top20 litespeed-text-md\">\n\t\t\t\t\t\t\t\t\t\t<strong class=\"litespeed-qc-text-gradient\"><?php esc_html_e( 'Best available WordPress performance', 'litespeed-cache' ); ?></strong>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t<p class=\"litespeed-margin-bottom20 litespeed-margin-top-remove\">\n\t\t\t\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\t\t\t\tprintf(\n\t\t\t\t\t\t\t\t\t\t\tesc_html__( 'Globally fast TTFB, easy setup, and %s!', 'litespeed-cache' ),\n\t\t\t\t\t\t\t\t\t\t\t'<a href=\"https://www.quic.cloud/quic-cloud-services-and-features/litespeed-cache-service/\" target=\"_blank\">' . esc_html__( 'more', 'litespeed-cache' ) . '</a>'\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<?php else : ?>\n\t\t\t\t\t\t\t\t<?php echo wp_kses_post( $cloud_instance->load_qc_status_for_dash( 'cdn_dash_mini' ) ); ?>\n\t\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<?php if ( $cloud_instance->activated() ) : ?>\n\t\t\t\t\t\t\t<div class=\"inside litespeed-postbox-footer litespeed-postbox-footer--compact\">\n\t\t\t\t\t\t\t\t<a href=\"<?php echo esc_url( Utility::build_url( Router::ACTION_CLOUD, Cloud::TYPE_SYNC_STATUS ) ); ?>\"\n\t\t\t\t\t\t\t\t\tclass=\"button button-<?php echo 'cdn' !== $cloud_summary['qc_activated'] ? 'link' : 'secondary'; ?> button-small\">\n\t\t\t\t\t\t\t\t\t<?php if ( 'cdn' === $cloud_summary['qc_activated'] ) : ?>\n\t\t\t\t\t\t\t\t\t\t<span class=\"dashicons dashicons-update\"></span>\n\t\t\t\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t\t\t\t<?php esc_html_e( 'Refresh Status', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t\t\t\t<span class=\"screen-reader-text\"><?php esc_html_e( 'Refresh QUIC.cloud status', 'litespeed-cache' ); ?></span>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<?php\n\t\t\t\t\t$promo_mini = $cloud_instance->load_qc_status_for_dash( 'promo_mini' );\n\t\t\t\t\tif ( $promo_mini ) :\n\t\t\t\t\t\techo wp_kses_post( $promo_mini );\n\t\t\t\t\tendif;\n\t\t\t\t\t?>\n\n\t\t\t\t\t<?php if ( $cloud_instance->activated() ) : ?>\n\t\t\t\t\t\t<?php\n\t\t\t\t\t\t$news = $cloud_instance->load_qc_status_for_dash( 'news_dash' );\n\t\t\t\t\t\tif ( $news ) :\n\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t<div class=\"postbox litespeed-postbox\">\n\t\t\t\t\t\t\t\t<div class=\"inside litespeed-text-center\">\n\t\t\t\t\t\t\t\t\t<h3 class=\"litespeed-title\">\n\t\t\t\t\t\t\t\t\t\t<?php esc_html_e( 'News', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t<div class=\"litespeed-top20\">\n\t\t\t\t\t\t\t\t\t\t<?php echo wp_kses_post( $news ); ?>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t<?php endif; ?>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>",
    "plugins/litespeed-cache/tpl/crawler/summary.tpl.php": "<?php\n/**\n * LiteSpeed Cache Crawler Summary\n *\n * @package LiteSpeed\n * @since 1.0.0\n */\n\nnamespace LiteSpeed;\n\ndefined( 'WPINC' ) || exit;\n\n$__crawler    = Crawler::cls();\n$crawler_list = $__crawler->list_crawlers();\n$summary      = Crawler::get_summary();\n\nif ( $summary['curr_crawler'] >= count( $crawler_list ) ) {\n\t$summary['curr_crawler'] = 0;\n}\n\n$is_running = time() - $summary['is_running'] <= 900;\n\n$disabled     = Router::can_crawl() ? '' : 'disabled';\n$disabled_tip = '';\nif ( ! $this->conf( Base::O_CRAWLER_SITEMAP ) ) {\n\t$disabled     = 'disabled';\n\t$disabled_tip = '<span class=\"litespeed-callout notice notice-error inline litespeed-left20\">' . sprintf(\n\t\tesc_html__( 'You need to set the %s in Settings first before using the crawler', 'litespeed-cache' ),\n\t\t'<code>' . esc_html( Lang::title( Base::O_CRAWLER_SITEMAP ) ) . '</code>'\n\t) . '</span>';\n}\n\n$crawler_run_interval = defined( 'LITESPEED_CRAWLER_RUN_INTERVAL' ) ? LITESPEED_CRAWLER_RUN_INTERVAL : 600;\nif ( $crawler_run_interval > 0 ) :\n\t$recurrence = '';\n\t$hours      = (int) floor( $crawler_run_interval / 3600 );\n\tif ( $hours ) {\n\t\t$recurrence .= sprintf(\n\t\t\t$hours > 1 ? esc_html__( '%d hours', 'litespeed-cache' ) : esc_html__( '%d hour', 'litespeed-cache' ),\n\t\t\t$hours\n\t\t);\n\t}\n\t$minutes = (int) floor( ( $crawler_run_interval % 3600 ) / 60 );\n\tif ( $minutes ) {\n\t\t$recurrence .= ' ';\n\t\t$recurrence .= sprintf(\n\t\t\t$minutes > 1 ? esc_html__( '%d minutes', 'litespeed-cache' ) : esc_html__( '%d minute', 'litespeed-cache' ),\n\t\t\t$minutes\n\t\t);\n\t}\n?>\n\n\t<h3 class=\"litespeed-title litespeed-relative\">\n\t\t<?php esc_html_e( 'Crawler Cron', 'litespeed-cache' ); ?>\n\t\t<?php Doc::learn_more( 'https://docs.litespeedtech.com/lscache/lscwp/crawler/' ); ?>\n\t</h3>\n\n\t<?php if ( ! Router::can_crawl() ) : ?>\n\t\t<div class=\"litespeed-callout notice notice-error inline\">\n\t\t\t<h4><?php esc_html_e( 'WARNING', 'litespeed-cache' ); ?></h4>\n\t\t\t<p><?php esc_html_e( 'The crawler feature is not enabled on the LiteSpeed server. Please consult your server admin or hosting provider.', 'litespeed-cache' ); ?></p>\n\t\t\t<p>\n\t\t\t\t<?php\n\t\t\t\tprintf(\n\t\t\t\t\t/* translators: %s: Link tags */\n\t\t\t\t\tesc_html__( 'See %sIntroduction for Enabling the Crawler%s for detailed information.', 'litespeed-cache' ),\n\t\t\t\t\t'<a href=\"https://docs.litespeedtech.com/lscache/lscwp/admin/#enabling-and-limiting-the-crawler\" target=\"_blank\" rel=\"noopener\">',\n\t\t\t\t\t'</a>'\n\t\t\t\t);\n\t\t\t\t?>\n\t\t\t</p>\n\t\t</div>\n\t<?php endif; ?>\n\n\t<?php if ( $summary['this_full_beginning_time'] ) : ?>\n\t\t<p>\n\t\t\t<b><?php esc_html_e( 'Current sitemap crawl started at', 'litespeed-cache' ); ?>:</b>\n\t\t\t<?php echo esc_html( Utility::readable_time( $summary['this_full_beginning_time'] ) ); ?>\n\t\t</p>\n\t\t<?php if ( ! $is_running ) : ?>\n\t\t\t<p>\n\t\t\t\t<b><?php esc_html_e( 'The next complete sitemap crawl will start at', 'litespeed-cache' ); ?>:</b>\n\t\t\t\t<?php echo esc_html( gmdate( 'm/d/Y H:i:s', $summary['this_full_beginning_time'] + LITESPEED_TIME_OFFSET + (int) $summary['last_full_time_cost'] + $this->conf( Base::O_CRAWLER_CRAWL_INTERVAL ) ) ); ?>\n\t\t\t</p>\n\t\t<?php endif; ?>\n\t<?php endif; ?>\n\n\t<?php if ( $summary['last_full_time_cost'] ) : ?>\n\t\t<p>\n\t\t\t<b><?php esc_html_e( 'Last complete run time for all crawlers', 'litespeed-cache' ); ?>:</b>\n\t\t\t<?php printf( esc_html__( '%d seconds', 'litespeed-cache' ), (int) $summary['last_full_time_cost'] ); ?>\n\t\t</p>\n\t<?php endif; ?>\n\n\t<?php if ( $summary['last_crawler_total_cost'] ) : ?>\n\t\t<p>\n\t\t\t<b><?php esc_html_e( 'Run time for previous crawler', 'litespeed-cache' ); ?>:</b>\n\t\t\t<?php printf( esc_html__( '%d seconds', 'litespeed-cache' ), (int) $summary['last_crawler_total_cost'] ); ?>\n\t\t</p>\n\t<?php endif; ?>\n\n\t<?php if ( $summary['curr_crawler_beginning_time'] ) : ?>\n\t\t<p>\n\t\t\t<b><?php esc_html_e( 'Current crawler started at', 'litespeed-cache' ); ?>:</b>\n\t\t\t<?php echo esc_html( Utility::readable_time( $summary['curr_crawler_beginning_time'] ) ); ?>\n\t\t</p>\n\t<?php endif; ?>\n\n\t<p>\n\t\t<b><?php esc_html_e( 'Current server load', 'litespeed-cache' ); ?>:</b>\n\t\t<?php echo esc_html( $__crawler->get_server_load() ); ?>\n\t</p>\n\n\t<?php if ( $summary['last_start_time'] ) : ?>\n\t\t<p class=\"litespeed-desc\">\n\t\t\t<b><?php esc_html_e( 'Last interval', 'litespeed-cache' ); ?>:</b>\n\t\t\t<?php echo esc_html( Utility::readable_time( $summary['last_start_time'] ) ); ?>\n\t\t</p>\n\t<?php endif; ?>\n\n\t<?php if ( $summary['end_reason'] ) : ?>\n\t\t<p class=\"litespeed-desc\">\n\t\t\t<b><?php esc_html_e( 'Ended reason', 'litespeed-cache' ); ?>:</b>\n\t\t\t<?php echo esc_html( $summary['end_reason'] ); ?>\n\t\t</p>\n\t<?php endif; ?>\n\n\t<?php if ( $summary['last_crawled'] ) : ?>\n\t\t<p class=\"litespeed-desc\">\n\t\t\t<b><?php esc_html_e( 'Last crawled', 'litespeed-cache' ); ?>:</b>\n\t\t\t<?php\n\t\t\tprintf(\n\t\t\t\tesc_html__( '%d item(s)', 'litespeed-cache' ),\n\t\t\t\tesc_html( $summary['last_crawled'] )\n\t\t\t);\n\t\t\t?>\n\t\t</p>\n\t<?php endif; ?>\n\n\t<p>\n\t\t<a href=\"<?php echo esc_url( Utility::build_url( Router::ACTION_CRAWLER, Crawler::TYPE_RESET ) ); ?>\" class=\"button litespeed-btn-warning\"><?php esc_html_e( 'Reset position', 'litespeed-cache' ); ?></a>\n\t\t<a href=\"<?php echo Router::can_crawl() ? esc_url( Utility::build_url( Router::ACTION_CRAWLER, Crawler::TYPE_START ) ) : 'javascript:;'; ?>\" id=\"litespeed_manual_trigger\" class=\"button litespeed-btn-success\" litespeed-accesskey=\"R\" <?php echo wp_kses_post( $disabled ); ?>><?php esc_html_e( 'Manually run', 'litespeed-cache' ); ?></a>\n\t\t<?php echo wp_kses_post( $disabled_tip ); ?>\n\t</p>\n\n\t<div class=\"litespeed-table-responsive\">\n\t\t<table class=\"wp-list-table widefat striped\" data-crawler-list>\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th scope=\"col\">#</th>\n\t\t\t\t\t<th scope=\"col\"><?php esc_html_e( 'Cron Name', 'litespeed-cache' ); ?></th>\n\t\t\t\t\t<th scope=\"col\"><?php esc_html_e( 'Run Frequency', 'litespeed-cache' ); ?></th>\n\t\t\t\t\t<th scope=\"col\"><?php esc_html_e( 'Status', 'litespeed-cache' ); ?></th>\n\t\t\t\t\t<th scope=\"col\"><?php esc_html_e( 'Activate', 'litespeed-cache' ); ?></th>\n\t\t\t\t\t<th scope=\"col\"><?php esc_html_e( 'Running', 'litespeed-cache' ); ?></th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t<?php\n\t\t\t\tforeach ( $crawler_list as $i => $v ) :\n\t\t\t\t\t$hit          = ! empty( $summary['crawler_stats'][ $i ][ Crawler::STATUS_HIT ] ) ? (int) $summary['crawler_stats'][ $i ][ Crawler::STATUS_HIT ] : 0;\n\t\t\t\t\t$miss         = ! empty( $summary['crawler_stats'][ $i ][ Crawler::STATUS_MISS ] ) ? (int) $summary['crawler_stats'][ $i ][ Crawler::STATUS_MISS ] : 0;\n\t\t\t\t\t$blacklisted  = ! empty( $summary['crawler_stats'][ $i ][ Crawler::STATUS_BLACKLIST ] ) ? (int) $summary['crawler_stats'][ $i ][ Crawler::STATUS_BLACKLIST ] : 0;\n\t\t\t\t\t$blacklisted += ! empty( $summary['crawler_stats'][ $i ][ Crawler::STATUS_NOCACHE ] ) ? (int) $summary['crawler_stats'][ $i ][ Crawler::STATUS_NOCACHE ] : 0;\n\t\t\t\t\t$waiting      = isset( $summary['crawler_stats'][ $i ][ Crawler::STATUS_WAIT ] )\n\t\t\t\t\t\t? (int) $summary['crawler_stats'][ $i ][ Crawler::STATUS_WAIT ]\n\t\t\t\t\t\t: (int) ( $summary['list_size'] - $hit - $miss - $blacklisted );\n\t\t\t\t?>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\techo esc_html( $i + 1 );\n\t\t\t\t\t\t\tif ( $i === $summary['curr_crawler'] ) {\n\t\t\t\t\t\t\t\techo '<img class=\"litespeed-crawler-curr\" src=\"' . esc_url( LSWCP_PLUGIN_URL . 'assets/img/Litespeed.icon.svg' ) . '\" alt=\"Current Crawler\">';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td><?php echo wp_kses_post( $v['title'] ); ?></td>\n\t\t\t\t\t\t<td><?php echo esc_html( $recurrence ); ?></td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\tprintf(\n\t\t\t\t\t\t\t\t'<i class=\"litespeed-badge litespeed-bg-default\" data-balloon-pos=\"up\" aria-label=\"%s\">%s</i> ',\n\t\t\t\t\t\t\t\tesc_attr__( 'Waiting', 'litespeed-cache' ),\n\t\t\t\t\t\t\t\tesc_html( $waiting > 0 ? $waiting : '-' )\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tprintf(\n\t\t\t\t\t\t\t\t'<i class=\"litespeed-badge litespeed-bg-success\" data-balloon-pos=\"up\" aria-label=\"%s\">%s</i> ',\n\t\t\t\t\t\t\t\tesc_attr__( 'Hit', 'litespeed-cache' ),\n\t\t\t\t\t\t\t\tesc_html( $hit > 0 ? $hit : '-' )\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tprintf(\n\t\t\t\t\t\t\t\t'<i class=\"litespeed-badge litespeed-bg-primary\" data-balloon-pos=\"up\" aria-label=\"%s\">%s</i> ',\n\t\t\t\t\t\t\t\tesc_attr__( 'Miss', 'litespeed-cache' ),\n\t\t\t\t\t\t\t\tesc_html( $miss > 0 ? $miss : '-' )\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tprintf(\n\t\t\t\t\t\t\t\t'<i class=\"litespeed-badge litespeed-bg-danger\" data-balloon-pos=\"up\" aria-label=\"%s\">%s</i> ',\n\t\t\t\t\t\t\t\tesc_attr__( 'Blocklisted', 'litespeed-cache' ),\n\t\t\t\t\t\t\t\tesc_html( $blacklisted > 0 ? $blacklisted : '-' )\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<?php $this->build_toggle( 'litespeed-crawler-' . $i, $__crawler->is_active( $i ) ); ?>\n\t\t\t\t\t\t\t<?php if ( ! empty( $v['uid'] ) && empty( $this->conf( Base::O_SERVER_IP ) ) ) : ?>\n\t\t\t\t\t\t\t\t<div class=\"litespeed-danger litespeed-text-bold\">\n\t\t\t\t\t\t\t\t\t🚨 <?php esc_html_e( 'NOTICE', 'litespeed-cache' ); ?>:\n\t\t\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\t\t\tprintf(\n\t\t\t\t\t\t\t\t\t\tesc_html__( 'You must set %s before using this feature.', 'litespeed-cache' ),\n\t\t\t\t\t\t\t\t\t\tesc_html( Lang::title( Base::O_SERVER_IP ) )\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\t\t\tDoc::learn_more(\n\t\t\t\t\t\t\t\t\t\tesc_url( admin_url( 'admin.php?page=litespeed-general#settings' ) ),\n\t\t\t\t\t\t\t\t\t\tesc_html__( 'Click here to set.', 'litespeed-cache' ),\n\t\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\tif ( $i === $summary['curr_crawler'] ) {\n\t\t\t\t\t\t\t\techo esc_html__( 'Position: ', 'litespeed-cache' ) . esc_html( $summary['last_pos'] + 1 );\n\t\t\t\t\t\t\t\tif ( $is_running ) {\n\t\t\t\t\t\t\t\t\techo ' <span class=\"litespeed-label-success\">' . esc_html__( 'running', 'litespeed-cache' ) . '</span>';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t<?php endforeach; ?>\n\t\t\t</tbody>\n\t\t</table>\n\t</div>\n\n\t<p>\n\t\t<i class=\"litespeed-badge litespeed-bg-default\"></i> = <?php esc_html_e( 'Waiting to be Crawled', 'litespeed-cache' ); ?><br>\n\t\t<i class=\"litespeed-badge litespeed-bg-success\"></i> = <?php esc_html_e( 'Already Cached', 'litespeed-cache' ); ?><br>\n\t\t<i class=\"litespeed-badge litespeed-bg-primary\"></i> = <?php esc_html_e( 'Successfully Crawled', 'litespeed-cache' ); ?><br>\n\t\t<i class=\"litespeed-badge litespeed-bg-danger\"></i> = <?php esc_html_e( 'Blocklisted', 'litespeed-cache' ); ?><br>\n\t</p>\n\n\t<div class=\"litespeed-desc\">\n\t\t<div><?php esc_html_e( 'Run frequency is set by the Interval Between Runs setting.', 'litespeed-cache' ); ?></div>\n\t\t<div>\n\t\t\t<?php\n\t\t\tesc_html_e( 'Crawlers cannot run concurrently. If both the cron and a manual run start at similar times, the first to be started will take precedence.', 'litespeed-cache' );\n\t\t\t?>\n\t\t</div>\n\t\t<div>\n\t\t\t<?php\n\t\t\tprintf(\n\t\t\t\t/* translators: %s: Link tags */\n\t\t\t\tesc_html__( 'Please see %sHooking WP-Cron Into the System Task Scheduler%s to learn how to create the system cron task.', 'litespeed-cache' ),\n\t\t\t\t'<a href=\"https://developer.wordpress.org/plugins/cron/hooking-wp-cron-into-the-system-task-scheduler/\" target=\"_blank\" rel=\"noopener\">',\n\t\t\t\t'</a>'\n\t\t\t);\n\t\t\t?>\n\t\t</div>\n\t</div>\n<?php\nendif;\n?>\n\n<h3 class=\"litespeed-title\"><?php esc_html_e( 'Watch Crawler Status', 'litespeed-cache' ); ?></h3>\n\n<?php\n$ajax_url = $__crawler->json_path();\nif ( $ajax_url ) :\n?>\n\t<input type=\"button\" id=\"litespeed-crawl-url-btn\" value=\"<?php esc_attr_e( 'Show crawler status', 'litespeed-cache' ); ?>\" class=\"button button-secondary\" data-url=\"<?php echo esc_url( $ajax_url ); ?>\" />\n\t<div class=\"litespeed-shell litespeed-hide\">\n\t\t<div class=\"litespeed-shell-header-bar\"></div>\n\t\t<div class=\"litespeed-shell-header\">\n\t\t\t<div class=\"litespeed-shell-header-bg\"></div>\n\t\t\t<div class=\"litespeed-shell-header-icon-container\">\n\t\t\t\t<img id=\"litespeed-shell-icon\" src=\"<?php echo esc_url( LSWCP_PLUGIN_URL . 'assets/img/Litespeed.icon.svg' ); ?>\" alt=\"LiteSpeed Icon\" />\n\t\t\t</div>\n\t\t</div>\n\t\t<ul class=\"litespeed-shell-body\">\n\t\t\t<li><?php esc_html_e( 'Start watching...', 'litespeed-cache' ); ?></li>\n\t\t\t<li id=\"litespeed-loading-dot\"></li>\n\t\t</ul>\n\t</div>\n<?php else : ?>\n\t<p><?php esc_html_e( 'No crawler meta file generated yet', 'litespeed-cache' ); ?></p>\n<?php endif; ?>\n\n<script>\nvar _litespeed_meta;\nvar _litespeed_shell_interval = 3; // seconds\nvar _litespeed_shell_interval_range = [3, 60];\nvar _litespeed_shell_handle;\nvar _litespeed_shell_display_handle;\nvar _litespeed_crawler_url;\nvar _litespeed_dots;\n\n\n(function ($) {\n\t'use strict';\n\tjQuery(document).ready(function () {\n\t\t$('#litespeed-crawl-url-btn').on('click', function () {\n\t\t\tif (!$(this).data('url')) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t$('.litespeed-shell').removeClass('litespeed-hide');\n\t\t\t_litespeed_dots = window.setInterval(_litespeed_loading_dots, 300);\n\t\t\t_litespeed_crawler_url = $(this).data('url');\n\t\t\tlitespeed_fetch_meta();\n\t\t\t$(this).hide();\n\t\t});\n\n\t\t$('#litespeed_manual_trigger').on('click', function (event) {\n\t\t\t$('#litespeed-loading-dot').before('<li>Manually Started</li>');\n\t\t\t_litespeed_shell_interval = _litespeed_shell_interval_range[0];\n\t\t\tlitespeed_fetch_meta();\n\t\t});\n\n\t\t/**\n\t\t * Freeze or melt a specific crawler\n\t\t * @since  4.3\n\t\t */\n\t\tif ($('[data-crawler-list] [data-litespeed_toggle_id]').length > 0) {\n\t\t\t$('[data-crawler-list] [data-litespeed_toggle_id]').on('click', function (e) {\n\t\t\t\tvar crawler_id = $(this).attr('data-litespeed_toggle_id');\n\t\t\t\tvar crawler_id = Number(crawler_id.split('-').pop());\n\t\t\t\tvar that = this;\n\t\t\t\t$.ajax({\n\t\t\t\t\turl: '<?php echo function_exists('get_rest_url') ? get_rest_url(null, 'litespeed/v1/toggle_crawler_state') : '/'; // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?>',\n\t\t\t\t\tdataType: 'json',\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tcache: false,\n\t\t\t\t\tdata: { crawler_id: crawler_id },\n\t\t\t\t\tbeforeSend: function (xhr) {\n\t\t\t\t\t\txhr.setRequestHeader('X-WP-Nonce', '<?php echo esc_js( wp_create_nonce('wp_rest') ); ?>');\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: function (data) {\n\t\t\t\t\t\t$(that)\n\t\t\t\t\t\t\t.toggleClass('litespeed-toggle-btn-default litespeed-toggleoff', data == 0)\n\t\t\t\t\t\t\t.toggleClass('litespeed-toggle-btn-primary', data == 1);\n\t\t\t\t\t\tconsole.log('litespeed-crawler-ajax: change Activate option');\n\t\t\t\t\t},\n\t\t\t\t\terror: function (xhr, error) {\n\t\t\t\t\t\tconsole.log(xhr);\n\t\t\t\t\t\tconsole.log(error);\n\t\t\t\t\t\tconsole.log('litespeed-crawler-ajax: option failed to save due to some error');\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t});\n})(jQuery);\n\n\nfunction litespeed_fetch_meta() {\n\twindow.clearTimeout(_litespeed_shell_handle);\n\tjQuery('#litespeed-loading-dot').text('');\n\tjQuery.ajaxSetup({ cache: false });\n\tjQuery.getJSON(_litespeed_crawler_url, function (meta) {\n\t\tlitespeed_pulse();\n\t\tvar changed = false;\n\t\tif (meta && 'list_size' in meta) {\n\t\t\tnew_meta =\n\t\t\t\tmeta.list_size + ' ' + meta.file_time + ' ' + meta.curr_crawler + ' ' + meta.last_pos + ' ' + meta.last_count + ' ' + meta.last_start_time + ' ' + meta.is_running;\n\t\t\tif (new_meta != _litespeed_meta) {\n\t\t\t\t_litespeed_meta = new_meta;\n\t\t\t\tchanged = true;\n\t\t\t\tstring = _litespeed_build_meta(meta);\n\t\t\t\tjQuery('#litespeed-loading-dot').before(string);\n\t\t\t\t// remove first log elements\n\t\t\t\tlog_length = jQuery('.litespeed-shell-body li').length;\n\t\t\t\tif (log_length > 50) {\n\t\t\t\t\tjQuery('.litespeed-shell-body li:lt(' + (log_length - 50) + ')').remove();\n\t\t\t\t}\n\t\t\t\t// scroll to end\n\t\t\t\tjQuery('.litespeed-shell-body')\n\t\t\t\t\t.stop()\n\t\t\t\t\t.animate(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tscrollTop: jQuery('.litespeed-shell-body')[0].scrollHeight,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t800,\n\t\t\t\t\t);\n\t\t\t}\n\n\t\t\t// dynamic adjust the interval length\n\t\t\t_litespeed_adjust_interval(changed);\n\t\t}\n\t\t// display interval counting\n\t\tlitespeed_display_interval_reset();\n\t\t_litespeed_shell_handle = window.setTimeout(_litespeed_dynamic_timeout, _litespeed_shell_interval * 1000);\n\t});\n}\n\nfunction _litespeed_loading_dots() {\n\tjQuery('#litespeed-loading-dot').append('.');\n}\n\n/**\n * Dynamic adjust interval\n */\nfunction _litespeed_adjust_interval(changed) {\n\tif (changed) {\n\t\t_litespeed_shell_interval -= Math.ceil(_litespeed_shell_interval / 2);\n\t} else {\n\t\t_litespeed_shell_interval++;\n\t}\n\n\tif (_litespeed_shell_interval < _litespeed_shell_interval_range[0]) {\n\t\t_litespeed_shell_interval = _litespeed_shell_interval_range[0];\n\t}\n\tif (_litespeed_shell_interval > _litespeed_shell_interval_range[1]) {\n\t\t_litespeed_shell_interval = _litespeed_shell_interval_range[1];\n\t}\n}\n\nfunction _litespeed_build_meta(meta) {\n\tvar string =\n\t\t'<li>' +\n\t\tlitespeed_date(meta.last_update_time) +\n\t\t'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Size: ' +\n\t\tmeta.list_size +\n\t\t'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Crawler: #' +\n\t\t(meta.curr_crawler * 1 + 1) +\n\t\t'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Position: ' +\n\t\t(meta.last_pos * 1 + 1) +\n\t\t'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Threads: ' +\n\t\tmeta.last_count +\n\t\t'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Status: ';\n\tif (meta.is_running) {\n\t\tstring += 'crawling, ' + meta.last_status;\n\t} else {\n\t\tstring += meta.end_reason ? meta.end_reason : '-';\n\t}\n\tstring += '</li>';\n\treturn string;\n}\n\nfunction _litespeed_dynamic_timeout() {\n\tlitespeed_fetch_meta();\n}\n\nfunction litespeed_display_interval_reset() {\n\twindow.clearInterval(_litespeed_shell_display_handle);\n\tjQuery('.litespeed-shell-header-bar').data('num', _litespeed_shell_interval);\n\t_litespeed_shell_display_handle = window.setInterval(_litespeed_display_interval, 1000);\n\n\tjQuery('.litespeed-shell-header-bar')\n\t\t.stop()\n\t\t.animate({ width: '100%' }, 500, function () {\n\t\t\tjQuery('.litespeed-shell-header-bar').css('width', '0%');\n\t\t});\n}\n\nfunction _litespeed_display_interval() {\n\tvar num = jQuery('.litespeed-shell-header-bar').data('num');\n\tjQuery('.litespeed-shell-header-bar')\n\t\t.stop()\n\t\t.animate({ width: litespeed_get_percent(num, _litespeed_shell_interval) + '%' }, 1000);\n\tif (num > 0) num--;\n\tif (num < 0) num = 0;\n\tjQuery('.litespeed-shell-header-bar').data('num', num);\n}\n\nfunction litespeed_get_percent(num1, num2) {\n\tnum1 = num1 * 1;\n\tnum2 = num2 * 1;\n\tnum = (num2 - num1) / num2;\n\treturn num * 100;\n}\n\nfunction litespeed_date(timestamp) {\n\tvar a = new Date(timestamp * 1000);\n\tvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n\tvar year = a.getFullYear();\n\tvar month = months[a.getMonth()];\n\tvar date = litespeed_add_zero(a.getDate());\n\tvar hour = litespeed_add_zero(a.getHours());\n\tvar min = litespeed_add_zero(a.getMinutes());\n\tvar sec = litespeed_add_zero(a.getSeconds());\n\tvar time = date + ' ' + month + ' ' + year + ' ' + hour + ':' + min + ':' + sec;\n\treturn time;\n}\n\nfunction litespeed_add_zero(i) {\n\tif (i < 10) {\n\t\ti = '0' + i;\n\t}\n\treturn i;\n}\n\nfunction litespeed_pulse() {\n\tjQuery('#litespeed-shell-icon').animate(\n\t\t{\n\t\t\twidth: 27,\n\t\t\theight: 34,\n\t\t\topacity: 1,\n\t\t},\n\t\t700,\n\t\tfunction () {\n\t\t\tjQuery('#litespeed-shell-icon').animate(\n\t\t\t\t{\n\t\t\t\t\twidth: 23,\n\t\t\t\t\theight: 29,\n\t\t\t\t\topacity: 0.5,\n\t\t\t\t},\n\t\t\t\t700,\n\t\t\t);\n\t\t},\n\t);\n}\n\n</script>",
    "plugins/litespeed-cache/tpl/crawler/settings.tpl.php": "<?php\n/**\n * LiteSpeed Cache Crawler General Settings\n *\n * @package LiteSpeed\n * @since 1.0.0\n */\n\nnamespace LiteSpeed;\n\ndefined( 'WPINC' ) || exit;\n\n$this->form_action();\n?>\n\n<h3 class=\"litespeed-title-short\">\n\t<?php esc_html_e( 'Crawler General Settings', 'litespeed-cache' ); ?>\n\t<?php Doc::learn_more( 'https://docs.litespeedtech.com/lscache/lscwp/crawler/#general-settings-tab' ); ?>\n</h3>\n\n<table class=\"wp-list-table striped litespeed-table\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_CRAWLER; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_switch( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'This will enable crawler cron.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<br><?php Doc::notice_htaccess(); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_CRAWLER_CRAWL_INTERVAL; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_input( $option_id ); ?> <?php esc_html_e( 'seconds', 'litespeed-cache' ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'Specify how long in seconds before the crawler should initiate crawling the entire sitemap again.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<?php $this->recommended( $option_id ); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_CRAWLER_SITEMAP; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_textarea( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'The crawler will use your XML sitemap or sitemap index. Enter the full URL to your sitemap here.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<?php Doc::one_per_line(); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_CRAWLER_LOAD_LIMIT; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_input( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'The maximum average server load allowed while crawling. The number of crawler threads in use will be actively reduced until average server load falls under this limit. If this cannot be achieved with a single thread, the current crawler run will be terminated.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<?php if ( ! empty( $_SERVER[ Base::ENV_CRAWLER_LOAD_LIMIT_ENFORCE ] ) ) : ?>\n\t\t\t\t\t\t<span class=\"litespeed-warning\">\n\t\t\t\t\t\t\t<?php esc_html_e( 'NOTE', 'litespeed-cache' ); ?>:\n\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\tprintf(\n\t\t\t\t\t\t\t\tesc_html__( 'Server enforced value: %s', 'litespeed-cache' ),\n\t\t\t\t\t\t\t\t'<code>' . esc_html( sanitize_text_field( wp_unslash( $_SERVER[ Base::ENV_CRAWLER_LOAD_LIMIT_ENFORCE ] ) ) ) . '</code>'\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t<?php elseif ( ! empty( $_SERVER[ Base::ENV_CRAWLER_LOAD_LIMIT ] ) ) : ?>\n\t\t\t\t\t\t<span class=\"litespeed-warning\">\n\t\t\t\t\t\t\t<?php esc_html_e( 'NOTE', 'litespeed-cache' ); ?>:\n\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\tprintf(\n\t\t\t\t\t\t\t\tesc_html__( 'Server allowed max value: %s', 'litespeed-cache' ),\n\t\t\t\t\t\t\t\t'<code>' . esc_html( sanitize_text_field( wp_unslash( $_SERVER[ Base::ENV_CRAWLER_LOAD_LIMIT ] ) ) ) . '</code>'\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t<br>\n\t\t\t\t\t<?php $this->_api_env_var( Base::ENV_CRAWLER_LOAD_LIMIT, Base::ENV_CRAWLER_LOAD_LIMIT_ENFORCE ); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_CRAWLER_ROLES; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_textarea( $option_id, 20 ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'To crawl the site as a logged-in user, enter the user ids to be simulated.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<?php Doc::one_per_line(); ?>\n\t\t\t\t\t<?php if ( empty( $this->conf( Base::O_SERVER_IP ) ) ) : ?>\n\t\t\t\t\t\t<div class=\"litespeed-danger litespeed-text-bold\">\n\t\t\t\t\t\t\t🚨 <?php esc_html_e( 'NOTICE', 'litespeed-cache' ); ?>:\n\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\tprintf(\n\t\t\t\t\t\t\t\tesc_html__( 'You must set %s before using this feature.', 'litespeed-cache' ),\n\t\t\t\t\t\t\t\tesc_html( Lang::title( Base::O_SERVER_IP ) )\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\tDoc::learn_more(\n\t\t\t\t\t\t\t\tesc_url( admin_url( 'admin.php?page=litespeed-general#settings' ) ),\n\t\t\t\t\t\t\t\tesc_html__( 'Click here to set.', 'litespeed-cache' ),\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t<?php if ( empty( $this->conf( Base::O_ESI ) ) ) : ?>\n\t\t\t\t\t\t<div class=\"litespeed-danger litespeed-text-bold\">\n\t\t\t\t\t\t\t🚨 <?php esc_html_e( 'NOTICE', 'litespeed-cache' ); ?>:\n\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\tprintf(\n\t\t\t\t\t\t\t\tesc_html__( 'You must set %1$s to %2$s before using this feature.', 'litespeed-cache' ),\n\t\t\t\t\t\t\t\tesc_html( Lang::title( Base::O_ESI ) ),\n\t\t\t\t\t\t\t\tesc_html__( 'ON', 'litespeed-cache' )\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\tDoc::learn_more(\n\t\t\t\t\t\t\t\tesc_url( admin_url( 'admin.php?page=litespeed-cache#esi' ) ),\n\t\t\t\t\t\t\t\tesc_html__( 'Click here to set.', 'litespeed-cache' ),\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t<?php endif; ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_CRAWLER_COOKIES; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->enroll( $option_id . '[name][]' ); ?>\n\t\t\t\t<?php $this->enroll( $option_id . '[vals][]' ); ?>\n\t\t\t\t<div id=\"litespeed_crawler_simulation_div\"></div>\n\t\t\t\t<script type=\"text/babel\">\n\t\t\t\t\tReactDOM.render(\n\t\t\t\t\t\t<CrawlerSimulate list={ <?php echo wp_json_encode( $this->conf( $option_id ) ); ?> } />,\n\t\t\t\t\t\tdocument.getElementById( 'litespeed_crawler_simulation_div' )\n\t\t\t\t\t);\n\t\t\t\t</script>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'To crawl for a particular cookie, enter the cookie name, and the values you wish to crawl for. Values should be one per line. There will be one crawler created per cookie value, per simulated role.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<?php Doc::learn_more( 'https://docs.litespeedtech.com/lscache/lscwp/crawler/#cookie-simulation' ); ?>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<?php\n\t\t\t\t\t\tprintf(\n\t\t\t\t\t\t\tesc_html__( 'Use %1$s in %2$s to indicate this cookie has not been set.', 'litespeed-cache' ),\n\t\t\t\t\t\t\t'<code>_null</code>',\n\t\t\t\t\t\t\tesc_html__( 'Cookie Values', 'litespeed-cache' )\n\t\t\t\t\t\t);\n\t\t\t\t\t\t?>\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<?php $this->form_end(); ?>",
    "plugins/litespeed-cache/tpl/crawler/blacklist.tpl.php": "<?php\n/**\n * LiteSpeed Cache Crawler Blocklist\n *\n * @package LiteSpeed\n * @since 1.0.0\n */\n\nnamespace LiteSpeed;\n\ndefined( 'WPINC' ) || exit;\n\n$crawler_summary = Crawler::get_summary();\n$__map           = Crawler_Map::cls();\n$__admin_display = Admin_Display::cls();\n$list            = $__map->list_blacklist( 30 );\n$count           = $__map->count_blacklist();\n$pagination      = Utility::pagination( $count, 30 );\n?>\n\n<p class=\"litespeed-right\">\n\t<a href=\"<?php echo esc_url( Utility::build_url( Router::ACTION_CRAWLER, Crawler::TYPE_BLACKLIST_EMPTY ) ); ?>\" class=\"button litespeed-btn-warning\" data-litespeed-cfm=\"<?php esc_attr_e( 'Are you sure to delete all existing blocklist items?', 'litespeed-cache' ); ?>\">\n\t\t<?php esc_html_e( 'Empty blocklist', 'litespeed-cache' ); ?>\n\t</a>\n</p>\n\n<h3 class=\"litespeed-title\">\n\t<?php esc_html_e( 'Blocklist', 'litespeed-cache' ); ?>\n\t<?php Doc::learn_more( 'https://docs.litespeedtech.com/lscache/lscwp/crawler/#blocklist-tab' ); ?>\n</h3>\n\n<?php echo esc_html__( 'Total', 'litespeed-cache' ) . ': ' . esc_html( $count ); ?>\n\n<?php echo wp_kses_post( $pagination ); ?>\n\n<div class=\"litespeed-table-responsive\">\n\t<table class=\"wp-list-table widefat striped\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th scope=\"col\">#</th>\n\t\t\t\t<th scope=\"col\"><?php esc_html_e( 'URL', 'litespeed-cache' ); ?></th>\n\t\t\t\t<th scope=\"col\"><?php esc_html_e( 'Status', 'litespeed-cache' ); ?></th>\n\t\t\t\t<th scope=\"col\"><?php esc_html_e( 'Operation', 'litespeed-cache' ); ?></th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<?php foreach ( $list as $i => $v ) : ?>\n\t\t\t<tr>\n\t\t\t\t<td><?php echo esc_html( $i + 1 ); ?></td>\n\t\t\t\t<td><?php echo esc_html( $v['url'] ); ?></td>\n\t\t\t\t<td><?php echo wp_kses_post( Crawler::cls()->display_status( $v['res'], $v['reason'] ) ); ?></td>\n\t\t\t\t<td>\n\t\t\t\t\t<a href=\"<?php echo esc_url( Utility::build_url( Router::ACTION_CRAWLER, Crawler::TYPE_BLACKLIST_DEL, false, null, array( 'id' => $v['id'] ) ) ); ?>\" class=\"button button-secondary\">\n\t\t\t\t\t\t<?php esc_html_e( 'Remove from Blocklist', 'litespeed-cache' ); ?>\n\t\t\t\t\t</a>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<?php endforeach; ?>\n\t\t</tbody>\n\t</table>\n</div>\n\n<?php echo wp_kses_post( $pagination ); ?>\n\n<p>\n\t<span class=\"litespeed-success\">\n\t\t<?php\n\t\tprintf(\n\t\t\tesc_html__( 'API: PHP Constant %s available to disable blocklist.', 'litespeed-cache' ),\n\t\t\t'<code>LITESPEED_CRAWLER_DISABLE_BLOCKLIST</code>'\n\t\t);\n\t\t?>\n\t</span>\n</p>\n<p>\n\t<span class=\"litespeed-success\">\n\t\t<?php\n\t\tprintf(\n\t\t\tesc_html__( 'API: Filter %s available to disable blocklist.', 'litespeed-cache' ),\n\t\t\t'<code>add_filter( \\'litespeed_crawler_disable_blocklist\\', \\'__return_true\\' );</code>'\n\t\t);\n\t\t?>\n\t</span>\n</p>\n<?php $__admin_display->_check_overwritten( 'crawler-blocklist' ); ?>\n<p>\n\t<i class=\"litespeed-dot litespeed-bg-default\"></i> = <?php esc_html_e( 'Not blocklisted', 'litespeed-cache' ); ?><br>\n\t<i class=\"litespeed-dot litespeed-bg-warning\"></i> = <?php esc_html_e( 'Blocklisted due to not cacheable', 'litespeed-cache' ); ?><br>\n\t<i class=\"litespeed-dot litespeed-bg-danger\"></i> = <?php esc_html_e( 'Blocklisted', 'litespeed-cache' ); ?><br>\n</p>\n",
    "plugins/litespeed-cache/tpl/crawler/entry.tpl.php": "<?php\n/**\n * LiteSpeed Cache Crawler Settings\n *\n * @package LiteSpeed\n * @since 1.0.0\n */\n\nnamespace LiteSpeed;\n\ndefined( 'WPINC' ) || exit;\n\n$menu_list = [\n\t'summary'   => esc_html__( 'Summary', 'litespeed-cache' ),\n\t'map'       => esc_html__( 'Map', 'litespeed-cache' ),\n\t'blacklist' => esc_html__( 'Blocklist', 'litespeed-cache' ),\n\t'settings'  => esc_html__( 'Settings', 'litespeed-cache' ),\n];\n?>\n\n<div class=\"wrap\">\n\t<h1 class=\"litespeed-h1\">\n\t\t<?php esc_html_e( 'LiteSpeed Cache Crawler', 'litespeed-cache' ); ?>\n\t</h1>\n\t<span class=\"litespeed-desc\">\n\t\t<?php echo esc_html( 'v' . Core::VER ); ?>\n\t</span>\n\t<hr class=\"wp-header-end\">\n</div>\n\n<div class=\"litespeed-wrap\">\n\t<h2 class=\"litespeed-header nav-tab-wrapper\">\n\t\t<?php GUI::display_tab_list( $menu_list ); ?>\n\t</h2>\n\n\t<div class=\"litespeed-body\">\n\t\t<?php\n\t\tforeach ( $menu_list as $menu_key => $menu_value ) {\n\t\t\tprintf(\n\t\t\t\t'<div data-litespeed-layout=\"%s\">',\n\t\t\t\tesc_attr( $menu_key )\n\t\t\t);\n\t\t\trequire LSCWP_DIR . \"tpl/crawler/$menu_key.tpl.php\";\n\t\t\techo '</div>';\n\t\t}\n\t\t?>\n\t</div>\n</div>\n\n<iframe name=\"litespeedHiddenIframe\" src=\"\" width=\"0\" height=\"0\" frameborder=\"0\"></iframe>\n",
    "plugins/litespeed-cache/tpl/crawler/map.tpl.php": "<?php\n/**\n * LiteSpeed Cache Crawler Sitemap List\n *\n * @package LiteSpeed\n * @since 1.0.0\n */\n\nnamespace LiteSpeed;\n\ndefined( 'WPINC' ) || exit;\n\n$crawler_summary = Crawler::get_summary();\n$__map           = Crawler_Map::cls();\n$list            = $__map->list_map( 30 );\n$count           = $__map->count_map();\n$pagination      = Utility::pagination( $count, 30 );\n$kw              = '';\nif (! empty( $_POST['kw'] ) && ! empty( $_POST['_wpnonce'] )) {\n\t$nonce = sanitize_text_field(wp_unslash($_POST['_wpnonce']));\n\tif (wp_verify_nonce($nonce)) {\n\t\t$kw = sanitize_text_field(wp_unslash($_POST['kw']));\n\t}\n}\n?>\n\n<p class=\"litespeed-right\">\n\t<a href=\"<?php echo esc_url( Utility::build_url( Router::ACTION_CRAWLER, Crawler::TYPE_EMPTY ) ); ?>\" class=\"button litespeed-btn-warning\">\n\t\t<?php esc_html_e( 'Clean Crawler Map', 'litespeed-cache' ); ?>\n\t</a>\n\t<a href=\"<?php echo esc_url( Utility::build_url( Router::ACTION_CRAWLER, Crawler::TYPE_REFRESH_MAP ) ); ?>\" class=\"button button-secondary\">\n\t\t<?php esc_html_e( 'Refresh Crawler Map', 'litespeed-cache' ); ?>\n\t</a>\n</p>\n\n<p>\n\t<?php\n\tif ( ! empty( $crawler_summary['sitemap_time'] ) ) {\n\t\tprintf(\n\t\t\tesc_html__( 'Generated at %s', 'litespeed-cache' ),\n\t\t\tesc_html( Utility::readable_time( $crawler_summary['sitemap_time'] ) )\n\t\t);\n\t}\n\t?>\n</p>\n\n<h3 class=\"litespeed-title\">\n\t<?php esc_html_e( 'Sitemap List', 'litespeed-cache' ); ?>\n\t<?php Doc::learn_more( 'https://docs.litespeedtech.com/lscache/lscwp/crawler/#map-tab' ); ?>\n</h3>\n\n<?php echo esc_html__( 'Sitemap Total', 'litespeed-cache' ) . ': ' . esc_html( $count ); ?>\n\n<div style=\"display: flex; justify-content: space-between;\">\n\t<div style=\"margin-top:10px;\">\n\t\t<form action=\"<?php echo esc_url( admin_url( 'admin.php?page=litespeed-crawler' ) ); ?>\" method=\"post\">\n\t\t<?php wp_nonce_field(); ?>\n\t\t\t<input type=\"text\" name=\"kw\" value=\"<?php echo esc_attr( $kw ); ?>\" placeholder=\"<?php esc_attr_e( 'URL Search', 'litespeed-cache' ); ?>\" style=\"width: 600px;\" />\n\t\t</form>\n\t</div>\n\t<div>\n\t\t<a style=\"padding-right:10px;\" href=\"<?php echo esc_url( admin_url( 'admin.php?page=litespeed-crawler&' . Router::TYPE . '=hit' ) ); ?>\"><?php esc_html_e( 'Cache Hit', 'litespeed-cache' ); ?></a>\n\t\t<a style=\"padding-right:10px;\" href=\"<?php echo esc_url( admin_url( 'admin.php?page=litespeed-crawler&' . Router::TYPE . '=miss' ) ); ?>\"><?php esc_html_e( 'Cache Miss', 'litespeed-cache' ); ?></a>\n\t\t<a style=\"padding-right:10px;\" href=\"<?php echo esc_url( admin_url( 'admin.php?page=litespeed-crawler&' . Router::TYPE . '=blacklisted' ) ); ?>\"><?php esc_html_e( 'Blocklisted', 'litespeed-cache' ); ?></a>\n\t</div>\n\t<div>\n\t\t<?php echo wp_kses_post( $pagination ); ?>\n\t</div>\n</div>\n\n<div class=\"litespeed-table-responsive\">\n\t<table class=\"wp-list-table widefat striped\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th scope=\"col\">#</th>\n\t\t\t\t<th scope=\"col\"><?php esc_html_e( 'URL', 'litespeed-cache' ); ?></th>\n\t\t\t\t<th scope=\"col\"><?php esc_html_e( 'Crawler Status', 'litespeed-cache' ); ?></th>\n\t\t\t\t<th scope=\"col\"><?php esc_html_e( 'Operation', 'litespeed-cache' ); ?></th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<?php foreach ( $list as $i => $v ) : ?>\n\t\t\t\t<tr>\n\t\t\t\t\t<td><?php echo esc_html( $i + 1 ); ?></td>\n\t\t\t\t\t<td><?php echo esc_html( $v['url'] ); ?></td>\n\t\t\t\t\t<td><?php echo wp_kses_post( Crawler::cls()->display_status( $v['res'], $v['reason'] ) ); ?></td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<a href=\"<?php echo esc_url( Utility::build_url( Router::ACTION_CRAWLER, Crawler::TYPE_BLACKLIST_ADD, false, null, array( 'id' => $v['id'] ) ) ); ?>\" class=\"button button-secondary\">\n\t\t\t\t\t\t\t<?php esc_html_e( 'Add to Blocklist', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t<?php endforeach; ?>\n\t\t</tbody>\n\t</table>\n</div>\n\n<?php echo wp_kses_post( $pagination ); ?>\n\n<p>\n\t<i class=\"litespeed-dot litespeed-bg-success\"></i> = <?php esc_html_e( 'Cache Hit', 'litespeed-cache' ); ?><br>\n\t<i class=\"litespeed-dot litespeed-bg-primary\"></i> = <?php esc_html_e( 'Cache Miss', 'litespeed-cache' ); ?><br>\n\t<i class=\"litespeed-dot litespeed-bg-warning\"></i> = <?php esc_html_e( 'Blocklisted due to not cacheable', 'litespeed-cache' ); ?><br>\n\t<i class=\"litespeed-dot litespeed-bg-danger\"></i> = <?php esc_html_e( 'Blocklisted', 'litespeed-cache' ); ?><br>\n</p>\n",
    "plugins/litespeed-cache/tpl/db_optm/manage.tpl.php": "<?php\n/**\n * LiteSpeed Cache Database Optimization\n *\n * Manages database optimization options and displays table engine conversion tools.\n *\n * @package LiteSpeed\n * @since 1.0.0\n */\n\nnamespace LiteSpeed;\n\ndefined( 'WPINC' ) || exit;\n\n$_panels = array(\n    'all' => array(\n        'title' => esc_html__( 'Clean All', 'litespeed-cache' ),\n        'desc'  => '',\n    ),\n    'revision' => array(\n        'title' => esc_html__( 'Post Revisions', 'litespeed-cache' ),\n        'desc'  => esc_html__( 'Clean all post revisions', 'litespeed-cache' ),\n    ),\n    'orphaned_post_meta' => array(\n        'title' => esc_html__( 'Orphaned Post Meta', 'litespeed-cache' ),\n        'desc'  => esc_html__( 'Clean all orphaned post meta records', 'litespeed-cache' ),\n    ),\n    'auto_draft' => array(\n        'title' => esc_html__( 'Auto Drafts', 'litespeed-cache' ),\n        'desc'  => esc_html__( 'Clean all auto saved drafts', 'litespeed-cache' ),\n    ),\n    'trash_post' => array(\n        'title' => esc_html__( 'Trashed Posts', 'litespeed-cache' ),\n        'desc'  => esc_html__( 'Clean all trashed posts and pages', 'litespeed-cache' ),\n    ),\n    'spam_comment' => array(\n        'title' => esc_html__( 'Spam Comments', 'litespeed-cache' ),\n        'desc'  => esc_html__( 'Clean all spam comments', 'litespeed-cache' ),\n    ),\n    'trash_comment' => array(\n        'title' => esc_html__( 'Trashed Comments', 'litespeed-cache' ),\n        'desc'  => esc_html__( 'Clean all trashed comments', 'litespeed-cache' ),\n    ),\n    'trackback-pingback' => array(\n        'title' => esc_html__( 'Trackbacks/Pingbacks', 'litespeed-cache' ),\n        'desc'  => esc_html__( 'Clean all trackbacks and pingbacks', 'litespeed-cache' ),\n    ),\n    'expired_transient' => array(\n        'title' => esc_html__( 'Expired Transients', 'litespeed-cache' ),\n        'desc'  => esc_html__( 'Clean expired transient options', 'litespeed-cache' ),\n    ),\n    'all_transients' => array(\n        'title' => esc_html__( 'All Transients', 'litespeed-cache' ),\n        'desc'  => esc_html__( 'Clean all transient options', 'litespeed-cache' ),\n    ),\n    'optimize_tables' => array(\n        'title' => esc_html__( 'Optimize Tables', 'litespeed-cache' ),\n        'desc'  => esc_html__( 'Optimize all tables in your database', 'litespeed-cache' ),\n    ),\n);\n\n$rev_max = $this->conf( Base::O_DB_OPTM_REVISIONS_MAX );\n$rev_age = $this->conf( Base::O_DB_OPTM_REVISIONS_AGE );\nif ( $rev_max || $rev_age ) {\n    $_panels['revision']['desc'] = sprintf(\n\t\tesc_html__( 'Clean revisions older than %1$s day(s), excluding %2$s latest revisions', 'litespeed-cache' ),\n\t\t'<strong>' . esc_html( $rev_age ) . '</strong>',\n\t\t'<strong>' . esc_html( $rev_max ) . '</strong>'\n\t);\n}\n\n$total = 0;\nforeach ( $_panels as $key => $v ) {\n    if ( 'all' !== $key ) {\n        $_panels[ $key ]['count'] = $this->cls( 'DB_Optm' )->db_count( $key );\n        if ( ! in_array( $key, array( 'optimize_tables' ), true ) ) {\n            $total += $_panels[ $key ]['count'];\n        }\n    }\n    $_panels[ $key ]['link'] = Utility::build_url( Router::ACTION_DB_OPTM, $key );\n}\n\n$_panels['all']['count'] = $total;\n\n$autoload_summary = DB_Optm::cls()->autoload_summary();\n\n?>\n\n<h3 class=\"litespeed-title\">\n    <?php esc_html_e( 'Database Optimizer', 'litespeed-cache' ); ?>\n    <?php Doc::learn_more( 'https://docs.litespeedtech.com/lscache/lscwp/database/' ); ?>\n</h3>\n\n<div class=\"litespeed-panel-wrapper litespeed-cards-wrapper\">\n\n    <?php foreach ( $_panels as $key => $v ) : ?>\n        <a href=\"<?php echo esc_url( $v['link'] ); ?>\" class=\"litespeed-panel postbox\">\n            <section class=\"litespeed-panel-wrapper-icon\">\n                <span class=\"litespeed-panel-icon-<?php echo esc_attr( $key ); ?>\"></span>\n            </section>\n            <section class=\"litespeed-panel-content\">\n                <div class=\"litespeed-h3\">\n                    <?php echo esc_html( $v['title'] ); ?>\n                    <span class=\"litespeed-panel-counter<?php echo $v['count'] > 0 ? '-red' : ''; ?>\">(<?php echo esc_html( $v['count'] ); ?><?php echo DB_Optm::hide_more() ? '+' : ''; ?>)</span>\n                </div>\n                <span class=\"litespeed-panel-para\"><?php echo wp_kses_post( $v['desc'] ); ?></span>\n            </section>\n            <section class=\"litespeed-panel-wrapper-top-right\">\n                <span class=\"litespeed-panel-top-right-icon<?php echo $v['count'] > 0 ? '-cross' : '-tick'; ?>\"></span>\n            </section>\n        </a>\n    <?php endforeach; ?>\n\n</div>\n\n<h3 class=\"litespeed-title\"><?php esc_html_e( 'Database Table Engine Converter', 'litespeed-cache' ); ?></h3>\n\n<div class=\"litespeed-panel-wrapper\">\n\n    <table class=\"wp-list-table widefat striped\">\n        <thead>\n            <tr>\n                <th scope=\"col\">#</th>\n                <th scope=\"col\"><?php esc_html_e( 'Table', 'litespeed-cache' ); ?></th>\n                <th scope=\"col\"><?php esc_html_e( 'Engine', 'litespeed-cache' ); ?></th>\n                <th scope=\"col\"><?php esc_html_e( 'Tool', 'litespeed-cache' ); ?></th>\n            </tr>\n        </thead>\n        <tbody>\n            <?php\n            $list = DB_Optm::cls()->list_myisam();\n            if ( ! empty( $list ) ) :\n                foreach ( $list as $k => $v ) :\n                    ?>\n                    <tr>\n                        <td><?php echo esc_html( $k + 1 ); ?></td>\n                        <td><?php echo esc_html( $v->table_name ); ?></td>\n                        <td><?php echo esc_html( $v->engine ); ?></td>\n                        <td>\n                            <a href=\"<?php echo esc_url( Utility::build_url( Router::ACTION_DB_OPTM, DB_Optm::TYPE_CONV_TB, false, false, array( 'tb' => $v->table_name ) ) ); ?>\">\n                                <?php esc_html_e( 'Convert to InnoDB', 'litespeed-cache' ); ?>\n                            </a>\n                        </td>\n                    </tr>\n                <?php endforeach; ?>\n            <?php else : ?>\n                <tr>\n                    <td colspan=\"4\" class=\"litespeed-success litespeed-text-center\">\n                        <?php esc_html_e( 'We are good. No table uses MyISAM engine.', 'litespeed-cache' ); ?>\n                    </td>\n                </tr>\n            <?php endif; ?>\n        </tbody>\n    </table>\n\n</div>\n\n<style type=\"text/css\">\n    .litespeed-body .field-col {\n        display: inline-block;\n        vertical-align: top;\n        margin-left: 20px;\n        margin-right: 20px;\n    }\n\n    .litespeed-body .field-col:first-child {\n        margin-left: 0;\n    }\n</style>\n\n<h3 class=\"litespeed-title\"><?php esc_html_e( 'Database Summary', 'litespeed-cache' ); ?></h3>\n<div>\n    <div class=\"field-col\">\n        <p>\n        \t<?php esc_html_e( 'Autoload size', 'litespeed-cache' ); ?>: <strong><?php echo esc_html( Utility::real_size( $autoload_summary->autoload_size ) ); ?></strong></p>\n        <p><?php esc_html_e( 'Autoload entries', 'litespeed-cache' ); ?>: <strong><?php echo esc_html( $autoload_summary->autload_entries ); ?></strong></p>\n    </div>\n\n    <div class=\"field-col\">\n        <p><?php esc_html_e( 'Autoload top list', 'litespeed-cache' ); ?>:</p>\n        <table class=\"wp-list-table widefat striped litespeed-width-auto litespeed-table-compact\">\n            <thead>\n                <tr>\n                    <th scope=\"col\">#</th>\n                    <th scope=\"col\"><?php esc_html_e( 'Option Name', 'litespeed-cache' ); ?></th>\n                    <th scope=\"col\"><?php esc_html_e( 'Autoload', 'litespeed-cache' ); ?></th>\n                    <th scope=\"col\"><?php esc_html_e( 'Size', 'litespeed-cache' ); ?></th>\n                </tr>\n            </thead>\n            <tbody>\n                <?php foreach ( $autoload_summary->autoload_toplist as $k => $v ) : ?>\n                    <tr>\n                        <td><?php echo esc_html( $k + 1 ); ?></td>\n                        <td><?php echo esc_html( $v->option_name ); ?></td>\n                        <td><?php echo esc_html( $v->autoload ); ?></td>\n                        <td><?php echo esc_html( $v->option_value_length ); ?></td>\n                    </tr>\n                <?php endforeach; ?>\n            </tbody>\n        </table>\n    </div>\n</div>",
    "plugins/litespeed-cache/tpl/db_optm/settings.tpl.php": "<?php\n/**\n * LiteSpeed Cache Database Optimization Settings\n *\n * Manages settings for database optimization in LiteSpeed Cache.\n *\n * @package LiteSpeed\n * @since 1.0.0\n */\n\nnamespace LiteSpeed;\n\ndefined( 'WPINC' ) || exit;\n\n$this->form_action();\n?>\n\n<h3 class=\"litespeed-title-short\">\n\t<?php esc_html_e( 'DB Optimization Settings', 'litespeed-cache' ); ?>\n\t<?php Doc::learn_more( 'https://docs.litespeedtech.com/lscache/lscwp/database/#db-optimization-settings-tab' ); ?>\n</h3>\n\n<table class=\"wp-list-table striped litespeed-table\"><tbody>\n\t<tr>\n\t\t<th>\n\t\t\t<?php $option_id = Base::O_DB_OPTM_REVISIONS_MAX; ?>\n\t\t\t<?php $this->title( $option_id ); ?>\n\t\t</th>\n\t\t<td>\n\t\t\t<?php $this->build_input( $option_id, 'litespeed-input-short' ); ?>\n\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t<?php esc_html_e( 'Specify the number of most recent revisions to keep when cleaning revisions.', 'litespeed-cache' ); ?>\n\t\t\t\t<?php $this->_validate_ttl( $option_id, 1, 100, true ); ?>\n\t\t\t</div>\n\t\t</td>\n\t</tr>\n\n\t<tr>\n\t\t<th>\n\t\t\t<?php $option_id = Base::O_DB_OPTM_REVISIONS_AGE; ?>\n\t\t\t<?php $this->title( $option_id ); ?>\n\t\t</th>\n\t\t<td>\n\t\t\t<?php $this->build_input( $option_id, 'litespeed-input-short' ); ?> <?php esc_html_e( 'Day(s)', 'litespeed-cache' ); ?>\n\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t<?php esc_html_e( 'Revisions newer than this many days will be kept when cleaning revisions.', 'litespeed-cache' ); ?>\n\t\t\t\t<?php $this->_validate_ttl( $option_id, 1, 600, true ); ?>\n\t\t\t</div>\n\t\t</td>\n\t</tr>\n\n</tbody></table>\n\n<?php\n$this->form_end();\n?>",
    "plugins/litespeed-cache/tpl/db_optm/entry.tpl.php": "<?php\n/**\n * LiteSpeed Cache Database Optimization\n *\n * @package LiteSpeed\n */\n\nnamespace LiteSpeed;\n\ndefined( 'WPINC' ) || exit;\n\n$menu_list = array(\n    'manage'   => esc_html__( 'Manage', 'litespeed-cache' ),\n);\n\nif ( ! is_network_admin() ) {\n    $menu_list['settings'] = esc_html__( 'DB Optimization Settings', 'litespeed-cache' );\n}\n\n?>\n\n<div class=\"wrap\">\n    <h1 class=\"litespeed-h1\">\n        <?php esc_html_e( 'LiteSpeed Cache Database Optimization', 'litespeed-cache' ); ?>\n    </h1>\n    <span class=\"litespeed-desc\">\n        <?php echo esc_html( 'v' . Core::VER ); ?>\n    </span>\n    <hr class=\"wp-header-end\">\n</div>\n\n<div class=\"litespeed-wrap\">\n    <h2 class=\"litespeed-header nav-tab-wrapper\">\n        <?php GUI::display_tab_list( $menu_list ); ?>\n    </h2>\n\n    <div class=\"litespeed-body\">\n    <?php\n        foreach ( $menu_list as $tab_key => $tab_val ) {\n\t\t\techo '<div data-litespeed-layout=\"' . esc_attr( $tab_key ) . '\">';\n\t\t\trequire LSCWP_DIR . 'tpl/db_optm/' . $tab_key . '.tpl.php';\n\t\t\techo '</div>';\n        }\n    ?>\n    </div>\n\n</div>",
    "plugins/litespeed-cache/tpl/cdn/other.tpl.php": "<?php\n/**\n * LiteSpeed Cache CDN Settings\n *\n * @package LiteSpeed\n * @since 1.0.0\n */\n\nnamespace LiteSpeed;\n\ndefined( 'WPINC' ) || exit;\n\n$home_url = home_url( '/' );\n$parsed   = wp_parse_url( $home_url );\n$home_url = str_replace( $parsed['scheme'] . ':', '', $home_url );\n\n$cdn_mapping = $this->conf( Base::O_CDN_MAPPING );\n// Special handler: Append one row if somehow the DB default preset value got deleted\nif ( ! $cdn_mapping ) {\n\t$this->load_default_vals();\n\t$cdn_mapping = self::$_default_options[ Base::O_CDN_MAPPING ];\n}\n\n$this->form_action();\n?>\n\n<h3 class=\"litespeed-title-short\">\n\t<?php esc_html_e( 'CDN Settings', 'litespeed-cache' ); ?>\n\t<?php Doc::learn_more( 'https://docs.litespeedtech.com/lscache/lscwp/cdn/' ); ?>\n</h3>\n\n<table class=\"wp-list-table striped litespeed-table\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_CDN; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_switch( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php\n\t\t\t\t\tprintf(\n\t\t\t\t\t\tesc_html__( 'Turn this setting %s if you are using a traditional Content Delivery Network (CDN) or a subdomain for static content with QUIC.cloud CDN.', 'litespeed-cache' ),\n\t\t\t\t\t\t'<code>' . esc_html__( 'ON', 'litespeed-cache' ) . '</code>'\n\t\t\t\t\t);\n\t\t\t\t\t?>\n\t\t\t\t\t<?php Doc::learn_more( 'https://docs.litespeedtech.com/lscache/lscwp/cdn/#use-cdn-mapping' ); ?>\n\t\t\t\t\t<br>\n\t\t\t\t\t<?php\n\t\t\t\t\tprintf(\n\t\t\t\t\t\tesc_html__( 'NOTE: QUIC.cloud CDN and Cloudflare do not use CDN Mapping. If you are only using QUIC.cloud or Cloudflare, leave this setting %s.', 'litespeed-cache' ),\n\t\t\t\t\t\t'<code>' . esc_html__( 'OFF', 'litespeed-cache' ) . '</code>'\n\t\t\t\t\t);\n\t\t\t\t\t?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th class=\"litespeed-padding-left\"></th>\n\t\t\t<td>\n\t\t\t\t<?php $this->enroll( Base::O_CDN_MAPPING . '[' . Base::CDN_MAPPING_URL . '][]' ); ?>\n\t\t\t\t<?php $this->enroll( Base::O_CDN_MAPPING . '[' . Base::CDN_MAPPING_INC_IMG . '][]' ); ?>\n\t\t\t\t<?php $this->enroll( Base::O_CDN_MAPPING . '[' . Base::CDN_MAPPING_INC_CSS . '][]' ); ?>\n\t\t\t\t<?php $this->enroll( Base::O_CDN_MAPPING . '[' . Base::CDN_MAPPING_INC_JS . '][]' ); ?>\n\t\t\t\t<?php $this->enroll( Base::O_CDN_MAPPING . '[' . Base::CDN_MAPPING_FILETYPE . '][]' ); ?>\n\n\t\t\t\t<div id=\"litespeed_cdn_mapping_div\"></div>\n\n\t\t\t\t<script type=\"text/babel\">\n\t\t\t\t\tReactDOM.render(\n\t\t\t\t\t\t<CDNMapping list={ <?php echo wp_json_encode( $cdn_mapping ); ?> } />,\n\t\t\t\t\t\tdocument.getElementById( 'litespeed_cdn_mapping_div' )\n\t\t\t\t\t);\n\t\t\t\t</script>\n\n\t\t\t\t<div class=\"litespeed-warning\">\n\t\t\t\t\t<?php esc_html_e( 'NOTE', 'litespeed-cache' ); ?>:\n\t\t\t\t\t<?php esc_html_e( 'To randomize CDN hostname, define multiple hostnames for the same resources.', 'litespeed-cache' ); ?>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<b><?php $this->title( Base::CDN_MAPPING_INC_IMG ); ?></b>:\n\t\t\t\t\t<?php\n\t\t\t\t\tprintf(\n\t\t\t\t\t\tesc_html__( 'Serve all image files through the CDN. This will affect all attachments, HTML %1$s tags, and CSS %2$s attributes.', 'litespeed-cache' ),\n\t\t\t\t\t\t'<code>&lt;img</code>',\n\t\t\t\t\t\t'<code>url()</code>'\n\t\t\t\t\t);\n\t\t\t\t\t?>\n\t\t\t\t\t<br>\n\t\t\t\t\t<b><?php $this->title( Base::CDN_MAPPING_INC_CSS ); ?></b>:\n\t\t\t\t\t<?php esc_html_e( 'Serve all CSS files through the CDN. This will affect all enqueued WP CSS files.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<br>\n\t\t\t\t\t<b><?php $this->title( Base::CDN_MAPPING_INC_JS ); ?></b>:\n\t\t\t\t\t<?php esc_html_e( 'Serve all JavaScript files through the CDN. This will affect all enqueued WP JavaScript files.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<br>\n\t\t\t\t\t<b><?php $this->title( Base::CDN_MAPPING_FILETYPE ); ?></b>:\n\t\t\t\t\t<?php esc_html_e( 'Static file type links to be replaced by CDN links.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<?php Doc::one_per_line(); ?>\n\t\t\t\t\t<?php\n\t\t\t\t\tprintf(\n\t\t\t\t\t\tesc_html__( 'This will affect all tags containing attributes: %s.', 'litespeed-cache' ),\n\t\t\t\t\t\t'<code>src=\"\"</code> <code>data-src=\"\"</code> <code>href=\"\"</code>'\n\t\t\t\t\t);\n\t\t\t\t\t?>\n\t\t\t\t\t<?php Doc::learn_more( 'https://docs.litespeedtech.com/lscache/lscwp/cdn/#include-file-types', esc_html__( 'Default value', 'litespeed-cache' ) ); ?>\n\t\t\t\t\t<br>\n\t\t\t\t\t<?php\n\t\t\t\t\tprintf(\n\t\t\t\t\t\tesc_html__( 'If you turn any of the above settings OFF, please remove the related file types from the %s box.', 'litespeed-cache' ),\n\t\t\t\t\t\t'<b>' . esc_html__( 'Include File Types', 'litespeed-cache' ) . '</b>'\n\t\t\t\t\t);\n\t\t\t\t\t?>\n\t\t\t\t\t<?php Doc::learn_more( 'https://docs.litespeedtech.com/lscache/lscwp/cdn/#include-file-types' ); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_CDN_ATTR; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<div class=\"litespeed-textarea-recommended\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<?php $this->build_textarea( $option_id, 40 ); ?>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<?php $this->recommended( $option_id ); ?>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'Specify which HTML element attributes will be replaced with CDN Mapping.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<?php esc_html_e( 'Only attributes listed here will be replaced.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<br>\n\t\t\t\t\t<?php\n\t\t\t\t\tprintf(\n\t\t\t\t\t\tesc_html__( 'Use the format %1$s or %2$s (element is optional).', 'litespeed-cache' ),\n\t\t\t\t\t\t'<code>element.attribute</code>',\n\t\t\t\t\t\t'<code>.attribute</code>'\n\t\t\t\t\t);\n\t\t\t\t\t?>\n\t\t\t\t\t<?php Doc::one_per_line(); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th class=\"litespeed-padding-left\">\n\t\t\t\t<?php $option_id = Base::O_CDN_ORI; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_textarea( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php\n\t\t\t\t\tprintf(\n\t\t\t\t\t\tesc_html__( 'Site URL to be served through the CDN. Beginning with %1$s. For example, %2$s.', 'litespeed-cache' ),\n\t\t\t\t\t\t'<code>//</code>',\n\t\t\t\t\t\t'<code>' . esc_html( $home_url ) . '</code>'\n\t\t\t\t\t);\n\t\t\t\t\t?>\n\t\t\t\t\t<br>\n\t\t\t\t\t<?php\n\t\t\t\t\tprintf(\n\t\t\t\t\t\tesc_html__( 'Wildcard %1$s supported (match zero or more characters). For example, to match %2$s and %3$s, use %4$s.', 'litespeed-cache' ),\n\t\t\t\t\t\t'<code>*</code>',\n\t\t\t\t\t\t'<code>//www.aa.com</code>',\n\t\t\t\t\t\t'<code>//aa.com</code>',\n\t\t\t\t\t\t'<code>//*aa.com</code>'\n\t\t\t\t\t);\n\t\t\t\t\t?>\n\t\t\t\t\t<?php Doc::one_per_line(); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th class=\"litespeed-padding-left\">\n\t\t\t\t<?php $option_id = Base::O_CDN_ORI_DIR; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<div class=\"litespeed-textarea-recommended\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<?php $this->build_textarea( $option_id, 40 ); ?>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<?php $this->recommended( $option_id ); ?>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'Only files within these directories will be pointed to the CDN.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<?php Doc::one_per_line(); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\n\t\t<tr>\n\t\t\t<th class=\"litespeed-padding-left\">\n\t\t\t\t<?php $option_id = Base::O_CDN_EXC; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_textarea( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php esc_html_e( 'Paths containing these strings will not be served from the CDN.', 'litespeed-cache' ); ?>\n\t\t\t\t\t<?php Doc::one_per_line(); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<?php $this->form_end(); ?>",
    "plugins/litespeed-cache/tpl/cdn/qc.tpl.php": "<?php\n/**\n * LiteSpeed Cache QUIC.cloud CDN Settings\n *\n * @package LiteSpeed\n * @since 1.0.0\n */\n\nnamespace LiteSpeed;\n\ndefined( 'WPINC' ) || exit;\n\n$__cloud = Cloud::cls();\n$__cloud->finish_qc_activation( 'cdn' );\n$cloud_summary = Cloud::get_summary();\n?>\n\n<div class=\"litespeed-flex-container litespeed-column-with-boxes\">\n\t<div class=\"litespeed-width-7-10 litespeed-column-left litespeed-cdn-summary-wrapper\">\n\t\t<div class=\"litespeed-column-left-inside\">\n\t\t\t<h3>\n\t\t\t\t<?php if ( $__cloud->activated() ) : ?>\n\t\t\t\t\t<a class=\"button button-small litespeed-right litespeed-learn-more\" href=\"<?php echo esc_url( Utility::build_url( Router::ACTION_CLOUD, Cloud::TYPE_SYNC_STATUS ) ); ?>\">\n\t\t\t\t\t\t<span class=\"dashicons dashicons-update\"></span> <?php esc_html_e( 'Refresh Status', 'litespeed-cache' ); ?>\n\t\t\t\t\t</a>\n\t\t\t\t<?php endif; ?>\n\t\t\t\t<span class=\"litespeed-quic-icon\"></span> <?php esc_html_e( 'QUIC.cloud CDN Status Overview', 'litespeed-cache' ); ?>\n\t\t\t</h3>\n\t\t\t<p class=\"litespeed-desc\"><?php esc_html_e( 'Check the status of your most important settings and the health of your CDN setup here.', 'litespeed-cache' ); ?></p>\n\n\t\t\t<?php if ( ! $__cloud->activated() ) : ?>\n\t\t\t\t<div class=\"litespeed-dashboard-unlock litespeed-dashboard-unlock--inline\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h3 class=\"litespeed-dashboard-unlock-title\"><strong class=\"litespeed-qc-text-gradient\"><?php esc_html_e( 'Accelerate, Optimize, Protect', 'litespeed-cache' ); ?></strong></h3>\n\t\t\t\t\t\t<p class=\"litespeed-dashboard-unlock-desc\">\n\t\t\t\t\t\t\t<?php echo wp_kses_post( __( 'Speed up your WordPress site even further with <strong>QUIC.cloud Online Services and CDN</strong>.', 'litespeed-cache' ) ); ?>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p><?php esc_html_e( 'Free monthly quota available.', 'litespeed-cache' ); ?></p>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<a class=\"button button-primary\" href=\"<?php echo esc_url( Utility::build_url( Router::ACTION_CLOUD, Cloud::TYPE_ACTIVATE, false, null, array( 'ref' => 'cdn' ) ) ); ?>\">\n\t\t\t\t\t\t\t\t<span class=\"dashicons dashicons-yes\"></span><?php esc_html_e( 'Enable QUIC.cloud services', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p class=\"litespeed-dashboard-unlock-footer\">\n\t\t\t\t\t\t\t<?php esc_html_e( 'QUIC.cloud provides CDN and online optimization services, and is not required. You may use many features of this plugin without QUIC.cloud.', 'litespeed-cache' ); ?><br>\n\t\t\t\t\t\t\t<a href=\"https://www.quic.cloud/\" target=\"_blank\" rel=\"noopener\"><?php esc_html_e( 'Learn More about QUIC.cloud', 'litespeed-cache' ); ?></a>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t<?php elseif ( empty( $cloud_summary['qc_activated'] ) || 'cdn' !== $cloud_summary['qc_activated'] ) : ?>\n\t\t\t\t<div class=\"litespeed-top20\">\n\t\t\t\t\t<?php if ( ! empty( $cloud_summary['qc_activated'] ) && 'linked' === $cloud_summary['qc_activated'] ) : ?>\n\t\t\t\t\t\t<p><?php echo wp_kses_post( __( 'QUIC.cloud CDN is currently <strong>fully disabled</strong>.', 'litespeed-cache' ) ); ?></p>\n\t\t\t\t\t<?php else : ?>\n\t\t\t\t\t\t<p><?php echo wp_kses_post( __( 'QUIC.cloud CDN is <strong>not available</strong> for anonymous (unlinked) users.', 'litespeed-cache' ) ); ?></p>\n\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<?php\n\t\t\t\t\t\t$btn_title = esc_html__( 'Link & Enable QUIC.cloud CDN', 'litespeed-cache' );\n\t\t\t\t\t\tif ( ! empty( $cloud_summary['qc_activated'] ) && 'linked' === $cloud_summary['qc_activated'] ) {\n\t\t\t\t\t\t\t$btn_title = esc_html__( 'Enable QUIC.cloud CDN', 'litespeed-cache' );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tDoc::learn_more(\n\t\t\t\t\t\t\tesc_url( Utility::build_url( Router::ACTION_CLOUD, Cloud::TYPE_ENABLE_CDN, false, null, array( 'ref' => 'cdn' ) ) ),\n\t\t\t\t\t\t\t'<span class=\"dashicons dashicons-yes\"></span>' . $btn_title,\n\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t'button button-primary litespeed-button-cta'\n\t\t\t\t\t\t);\n\t\t\t\t\t\t?>\n\t\t\t\t\t</p>\n\t\t\t\t\t<h3 class=\"litespeed-title-section\"><?php esc_html_e( 'Content Delivery Network Service', 'litespeed-cache' ); ?></h3>\n\t\t\t\t\t<p class=\"litespeed-text-md\">\n\t\t\t\t\t\t<?php esc_html_e( 'Serve your visitors fast', 'litespeed-cache' ); ?> <strong class=\"litespeed-qc-text-gradient\"><?php esc_html_e( 'no matter where they live.', 'litespeed-cache' ); ?></strong>\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<?php\n\t\t\t\t\t\tprintf(\n\t\t\t\t\t\t\t/* translators: %s: Link tags */\n\t\t\t\t\t\t\tesc_html__( 'Best available WordPress performance, globally fast TTFB, easy setup, and %smore%s!', 'litespeed-cache' ),\n\t\t\t\t\t\t\t'<a href=\"https://www.quic.cloud/quic-cloud-services-and-features/litespeed-cache-service/\" target=\"_blank\" rel=\"noopener\">',\n\t\t\t\t\t\t\t'</a>'\n\t\t\t\t\t\t);\n\t\t\t\t\t\t?>\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t<?php else : ?>\n\t\t\t\t<?php echo wp_kses_post( $__cloud->load_qc_status_for_dash( 'cdn_dash' ) ); ?>\n\t\t\t<?php endif; ?>\n\t\t</div>\n\t</div>\n\n\t<div class=\"litespeed-width-3-10 litespeed-column-right\">\n\t\t<div class=\"postbox litespeed-postbox\">\n\t\t\t<div class=\"inside\">\n\t\t\t\t<h3 class=\"litespeed-title\">\n\t\t\t\t\t<?php esc_html_e( 'QUIC.cloud CDN Options', 'litespeed-cache' ); ?>\n\t\t\t\t</h3>\n\t\t\t\t<?php if ( ! empty( $cloud_summary['partner'] ) && ! empty( $cloud_summary['partner']['disable_qc_login'] ) ) : ?>\n\t\t\t\t\t<?php if ( ! empty( $cloud_summary['partner']['logo'] ) ) : ?>\n\t\t\t\t\t\t<?php if ( ! empty( $cloud_summary['partner']['url'] ) ) : ?>\n\t\t\t\t\t\t\t<a href=\"<?php echo esc_url( $cloud_summary['partner']['url'] ); ?>\" target=\"_blank\" rel=\"noopener\">\n\t\t\t\t\t\t\t\t<img src=\"<?php echo esc_url( $cloud_summary['partner']['logo'] ); ?>\" alt=\"<?php echo esc_attr( $cloud_summary['partner']['name'] ); ?>\">\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<?php else : ?>\n\t\t\t\t\t\t\t<img src=\"<?php echo esc_url( $cloud_summary['partner']['logo'] ); ?>\" alt=\"<?php echo esc_attr( $cloud_summary['partner']['name'] ); ?>\">\n\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t<?php elseif ( ! empty( $cloud_summary['partner']['name'] ) ) : ?>\n\t\t\t\t\t\t<?php if ( ! empty( $cloud_summary['partner']['url'] ) ) : ?>\n\t\t\t\t\t\t\t<a href=\"<?php echo esc_url( $cloud_summary['partner']['url'] ); ?>\" target=\"_blank\" rel=\"noopener\">\n\t\t\t\t\t\t\t\t<span class=\"postbox-partner-name\"><?php echo esc_html( $cloud_summary['partner']['name'] ); ?></span>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<?php else : ?>\n\t\t\t\t\t\t\t<span class=\"postbox-partner-name\"><?php echo esc_html( $cloud_summary['partner']['name'] ); ?></span>\n\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t<?php if ( ! $__cloud->activated() ) : ?>\n\t\t\t\t\t\t<p><?php esc_html_e( 'To manage your QUIC.cloud options, go to your hosting provider\\'s portal.', 'litespeed-cache' ); ?></p>\n\t\t\t\t\t<?php else : ?>\n\t\t\t\t\t\t<p><?php esc_html_e( 'To manage your QUIC.cloud options, please contact your hosting provider.', 'litespeed-cache' ); ?></p>\n\t\t\t\t\t<?php endif; ?>\n\t\t\t\t<?php else : ?>\n\t\t\t\t\t<?php if ( ! $__cloud->activated() ) : ?>\n\t\t\t\t\t\t<p><?php esc_html_e( 'To manage your QUIC.cloud options, go to QUIC.cloud Dashboard.', 'litespeed-cache' ); ?></p>\n\t\t\t\t\t\t<p class=\"litespeed-top20\">\n\t\t\t\t\t\t\t<button type=\"button\" class=\"button button-primary disabled\">\n\t\t\t\t\t\t\t\t<?php esc_html_e( 'Link to QUIC.cloud', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t<?php elseif ( 'anonymous' === $cloud_summary['qc_activated'] ) : ?>\n\t\t\t\t\t\t<p><?php esc_html_e( 'You are currently using services as an anonymous user. To manage your QUIC.cloud options, use the button below to create an account and link to the QUIC.cloud Dashboard.', 'litespeed-cache' ); ?></p>\n\t\t\t\t\t\t<p class=\"litespeed-top20\">\n\t\t\t\t\t\t\t<a href=\"<?php echo esc_url( Utility::build_url( Router::ACTION_CLOUD, Cloud::TYPE_LINK, false, null, array( 'ref' => 'cdn' ) ) ); ?>\" class=\"button button-<?php echo ( empty( $cloud_summary['qc_activated'] ) || 'cdn' !== $cloud_summary['qc_activated'] ) ? 'secondary' : 'primary'; ?>\">\n\t\t\t\t\t\t\t\t<?php esc_html_e( 'Link to QUIC.cloud', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t<?php elseif ( 'linked' === $cloud_summary['qc_activated'] ) : ?>\n\t\t\t\t\t\t<p class=\"litespeed-top20\">\n\t\t\t\t\t\t\t<a href=\"<?php echo esc_url( $__cloud->qc_link() ); ?>\" target=\"qc\" rel=\"noopener\" class=\"button button-<?php echo ( empty( $cloud_summary['qc_activated'] ) || 'cdn' !== $cloud_summary['qc_activated'] ) ? 'secondary' : 'primary'; ?>\">\n\t\t\t\t\t\t\t\t<?php esc_html_e( 'My QUIC.cloud Dashboard', 'litespeed-cache' ); ?> <span class=\"dashicons dashicons-external\"></span>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t<?php else : ?>\n\t\t\t\t\t\t<p><?php esc_html_e( 'To manage your QUIC.cloud options, go to QUIC.cloud Dashboard.', 'litespeed-cache' ); ?></p>\n\t\t\t\t\t\t<p class=\"litespeed-top20\">\n\t\t\t\t\t\t\t<a href=\"<?php echo esc_url( $__cloud->qc_link() ); ?>\" target=\"qc\" rel=\"noopener\" class=\"button button-<?php echo ( empty( $cloud_summary['qc_activated'] ) || 'cdn' !== $cloud_summary['qc_activated'] ) ? 'secondary' : 'primary'; ?>\">\n\t\t\t\t\t\t\t\t<?php esc_html_e( 'My QUIC.cloud Dashboard', 'litespeed-cache' ); ?> <span class=\"dashicons dashicons-external\"></span>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t<?php endif; ?>\n\t\t\t\t<?php endif; ?>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<?php $promo_mini = $__cloud->load_qc_status_for_dash( 'promo_mini' ); ?>\n\t\t<?php if ( $promo_mini ) : ?>\n\t\t\t<?php echo wp_kses_post( $promo_mini ); ?>\n\t\t<?php endif; ?>\n\t</div>\n</div>\n",
    "plugins/litespeed-cache/tpl/cdn/entry.tpl.php": "<?php\n/**\n * LiteSpeed Cache CDN Settings\n *\n * @package LiteSpeed\n * @since 1.0.0\n */\n\nnamespace LiteSpeed;\n\ndefined( 'WPINC' ) || exit;\n\n$menu_list = array(\n\t'qc'    => esc_html__( 'QUIC.cloud', 'litespeed-cache' ),\n\t'cf'    => esc_html__( 'Cloudflare', 'litespeed-cache' ),\n\t'other' => esc_html__( 'Other Static CDN', 'litespeed-cache' ),\n);\n?>\n\n<div class=\"wrap\">\n\t<h1 class=\"litespeed-h1\">\n\t\t<?php esc_html_e( 'LiteSpeed Cache CDN', 'litespeed-cache' ); ?>\n\t</h1>\n\t<span class=\"litespeed-desc\">\n\t\t<?php echo esc_html( 'v' . Core::VER ); ?>\n\t</span>\n\t<hr class=\"wp-header-end\">\n</div>\n\n<div class=\"litespeed-wrap\">\n\t<h2 class=\"litespeed-header nav-tab-wrapper\">\n\t\t<?php GUI::display_tab_list( $menu_list ); ?>\n\t</h2>\n\n\t<div class=\"litespeed-body\">\n\t\t<?php\n\t\tforeach ( $menu_list as $menu_key => $menu_value ) {\n\t\t\tprintf(\n\t\t\t\t'<div data-litespeed-layout=\"%s\">',\n\t\t\t\tesc_attr( $menu_key )\n\t\t\t);\n\t\t\trequire LSCWP_DIR . \"tpl/cdn/$menu_key.tpl.php\";\n\t\t\techo '</div>';\n\t\t}\n\t\t?>\n\t</div>\n</div>\n",
    "plugins/litespeed-cache/tpl/cdn/cf.tpl.php": "<?php\n/**\n * LiteSpeed Cache Cloudflare Settings\n *\n * @package LiteSpeed\n * @since 1.0.0\n */\n\nnamespace LiteSpeed;\n\ndefined( 'WPINC' ) || exit;\n\n$this->form_action();\n?>\n\n<h3 class=\"litespeed-title-short\">\n\t<?php esc_html_e( 'Cloudflare Settings', 'litespeed-cache' ); ?>\n\t<?php Doc::learn_more( 'https://docs.litespeedtech.com/lscache/lscwp/cdn/' ); ?>\n</h3>\n\n<table class=\"wp-list-table striped litespeed-table\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_CDN_CLOUDFLARE; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_switch( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php printf( esc_html__( 'Use %s API functionality.', 'litespeed-cache' ), 'Cloudflare' ); ?>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"litespeed-block\">\n\t\t\t\t\t<div class='litespeed-col'>\n\t\t\t\t\t\t<label class=\"litespeed-form-label\"><?php esc_html_e( 'Global API Key / API Token', 'litespeed-cache' ); ?></label>\n\t\t\t\t\t\t<?php $this->build_input( Base::O_CDN_CLOUDFLARE_KEY ); ?>\n\t\t\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t\t\t<?php printf( esc_html__( 'Your API key / token is used to access %s APIs.', 'litespeed-cache' ), 'Cloudflare' ); ?>\n\t\t\t\t\t\t\t<?php printf( esc_html__( 'Get it from %s.', 'litespeed-cache' ), '<a href=\"https://dash.cloudflare.com/profile/api-tokens\" target=\"_blank\" rel=\"noopener\">Cloudflare</a>' ); ?>\n\t\t\t\t\t\t\t<?php esc_html_e( 'Recommended to generate the token from Cloudflare API token template \"WordPress\".', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='litespeed-col'>\n\t\t\t\t\t\t<label class=\"litespeed-form-label\"><?php esc_html_e( 'Email Address', 'litespeed-cache' ); ?></label>\n\t\t\t\t\t\t<?php $this->build_input( Base::O_CDN_CLOUDFLARE_EMAIL ); ?>\n\t\t\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t\t\t<?php printf( esc_html__( 'Your Email address on %s.', 'litespeed-cache' ), 'Cloudflare' ); ?>\n\t\t\t\t\t\t\t<?php esc_html_e( 'Optional when API token used.', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='litespeed-col'>\n\t\t\t\t\t\t<label class=\"litespeed-form-label\"><?php esc_html_e( 'Domain', 'litespeed-cache' ); ?></label>\n\t\t\t\t\t\t<?php\n\t\t\t\t\t\t$cf_zone = $this->conf( Base::O_CDN_CLOUDFLARE_ZONE );\n\t\t\t\t\t\t$cls     = $cf_zone ? ' litespeed-input-success' : ' litespeed-input-warning';\n\t\t\t\t\t\t$this->build_input( Base::O_CDN_CLOUDFLARE_NAME, $cls );\n\t\t\t\t\t\t?>\n\t\t\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t\t\t<?php esc_html_e( 'You can just type part of the domain.', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t\t<?php esc_html_e( 'Once saved, it will be matched with the current list and completed automatically.', 'litespeed-cache' ); ?>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<th>\n\t\t\t\t<?php $option_id = Base::O_CDN_CLOUDFLARE_CLEAR; ?>\n\t\t\t\t<?php $this->title( $option_id ); ?>\n\t\t\t</th>\n\t\t\t<td>\n\t\t\t\t<?php $this->build_switch( $option_id ); ?>\n\t\t\t\t<div class=\"litespeed-desc\">\n\t\t\t\t\t<?php printf( esc_html__( 'Clear %s cache when \"Purge All\" is run.', 'litespeed-cache' ), 'Cloudflare' ); ?>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<?php\n$this->form_end();\n$cf_on     = $this->conf( Base::O_CDN_CLOUDFLARE );\n$cf_domain = $this->conf( Base::O_CDN_CLOUDFLARE_NAME );\n$cf_zone   = $this->conf( Base::O_CDN_CLOUDFLARE_ZONE );\nif ( ! $cf_domain ) {\n\t$cf_domain = '-';\n}\nif ( ! $cf_zone ) {\n\t$cf_zone = '-';\n}\n\n$curr_status = CDN\\Cloudflare::get_option( CDN\\Cloudflare::ITEM_STATUS, array() );\n?>\n\n<h3 class=\"litespeed-title\"><?php esc_html_e( 'Cloudflare', 'litespeed-cache' ); ?></h3>\n\n<?php if ( ! $cf_on ) : ?>\n\t<div class=\"litespeed-callout notice notice-error inline\">\n\t\t<h4><?php esc_html_e( 'WARNING', 'litespeed-cache' ); ?></h4>\n\t\t<p>\n\t\t\t<?php esc_html_e( 'To enable the following functionality, turn ON Cloudflare API in CDN Settings.', 'litespeed-cache' ); ?>\n\t\t</p>\n\t</div>\n<?php endif; ?>\n\n<p><?php esc_html_e( 'Cloudflare Domain', 'litespeed-cache' ); ?>: <code><?php echo esc_textarea( $cf_domain ); ?></code></p>\n<p><?php esc_html_e( 'Cloudflare Zone', 'litespeed-cache' ); ?>: <code><?php echo esc_textarea( $cf_zone ); ?></code></p>\n\n<p>\n\t<b><?php esc_html_e( 'Development Mode', 'litespeed-cache' ); ?>:</b>\n\t<a href=\"<?php echo esc_url( Utility::build_url( Router::ACTION_CDN_CLOUDFLARE, CDN\\Cloudflare::TYPE_SET_DEVMODE_ON ) ); ?>\" class=\"button litespeed-btn-warning\">\n\t\t<?php esc_html_e( 'Turn ON', 'litespeed-cache' ); ?>\n\t</a>\n\t<a href=\"<?php echo esc_url( Utility::build_url( Router::ACTION_CDN_CLOUDFLARE, CDN\\Cloudflare::TYPE_SET_DEVMODE_OFF ) ); ?>\" class=\"button litespeed-btn-warning\">\n\t\t<?php esc_html_e( 'Turn OFF', 'litespeed-cache' ); ?>\n\t</a>\n\t<a href=\"<?php echo esc_url( Utility::build_url( Router::ACTION_CDN_CLOUDFLARE, CDN\\Cloudflare::TYPE_GET_DEVMODE ) ); ?>\" class=\"button litespeed-btn-success\">\n\t\t<?php esc_html_e( 'Check Status', 'litespeed-cache' ); ?>\n\t</a>\n\n\t<?php if ( $curr_status ) : ?>\n\t\t<span class=\"litespeed-desc\">\n\t\t\t<?php\n\t\t\tif ( time() >= $curr_status['devmode_expired'] ) {\n\t\t\t\t$expired_at             = gmdate( 'm/d/Y H:i:s', $curr_status['devmode_expired'] + LITESPEED_TIME_OFFSET );\n\t\t\t\t$curr_status['devmode'] = 'OFF';\n\t\t\t\tprintf(\n\t\t\t\t\tesc_html__( 'Current status is %1$s since %2$s.', 'litespeed-cache' ),\n\t\t\t\t\t'<code>' . esc_html( strtoupper( $curr_status['devmode'] ) ) . '</code>',\n\t\t\t\t\t'<code>' . esc_html( $expired_at ) . '</code>'\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\t$expired_at = $curr_status['devmode_expired'] - time();\n\t\t\t\t$expired_at = Utility::readable_time( $expired_at, 3600 * 3, true );\n\t\t\t\tprintf(\n\t\t\t\t\tesc_html__( 'Current status is %s.', 'litespeed-cache' ),\n\t\t\t\t\t'<code>' . esc_html( strtoupper( $curr_status['devmode'] ) ) . '</code>'\n\t\t\t\t);\n\t\t\t\tprintf(\n\t\t\t\t\tesc_html__( 'Development mode will be automatically turned off in %s.', 'litespeed-cache' ),\n\t\t\t\t\t'<code>' . esc_html( $expired_at ) . '</code>'\n\t\t\t\t);\n\t\t\t}\n\t\t\t?>\n\t\t</span>\n\t<?php endif; ?>\n\t<br>\n\t<?php esc_html_e( 'Temporarily bypass Cloudflare cache. This allows changes to the origin server to be seen in realtime.', 'litespeed-cache' ); ?>\n\t<br>\n\t<?php esc_html_e( 'Development Mode will be turned off automatically after three hours.', 'litespeed-cache' ); ?>\n\t<?php printf( esc_html__( '%1$sLearn More%2$s', 'litespeed-cache' ), '<a href=\"https://support.cloudflare.com/hc/en-us/articles/200168246\" target=\"_blank\" rel=\"noopener\">', '</a>' ); ?>\n</p>\n\n<p>\n\t<b><?php esc_html_e( 'Cloudflare Cache', 'litespeed-cache' ); ?>:</b>\n\t<?php if ( ! $cf_on ) : ?>\n\t\t<a href=\"#\" class=\"button button-secondary disabled\">\n\t<?php else : ?>\n\t\t<a href=\"<?php echo esc_url( Utility::build_url( Router::ACTION_CDN_CLOUDFLARE, CDN\\Cloudflare::TYPE_PURGE_ALL ) ); ?>\" class=\"button litespeed-btn-danger\">\n\t<?php endif; ?>\n\t\t<?php esc_html_e( 'Purge Everything', 'litespeed-cache' ); ?>\n\t</a>\n</p>",
    "plugins/litespeed-cache/composer.json": "{\n\t\"name\": \"litespeedtech/lscache_wp\",\n\t\"require-dev\": {\n\t\t\"squizlabs/php_codesniffer\": \"^3.12\",\n\t\t\"phpcompatibility/php-compatibility\": \"*\",\n\t\t\"wp-coding-standards/wpcs\": \"^3.1\",\n\t\t\"phpcsstandards/phpcsutils\": \"^1.0\",\n\t\t\"phpcsstandards/phpcsextra\": \"^1.2\",\n\t\t\"dealerdirect/phpcodesniffer-composer-installer\": \"^1.0\",\n\t\t\"php-stubs/wp-cli-stubs\": \"^2.12\"\n\t},\n\t\"prefer-stable\": true,\n\t\"scripts\": {\n\t\t\"sniff-check\": \"vendor/bin/phpcs --standard=phpcs.ruleset.xml --no-cache cli/ lib/ src/ tpl/ thirdparty autoload.php litespeed-cache.php\"\n\t},\n\t\"config\": {\n\t\t\"allow-plugins\": {\n\t\t\t\"dealerdirect/phpcodesniffer-composer-installer\": true\n\t\t}\n\t}\n}\n",
    "plugins/litespeed-cache/security.md": "# Security Policy\n\n## Reporting Security Bugs\n\nWe take security seriously. Please report potential vulnerabilities found in the LiteSpeed Cache plugin's source code via email to `support@litespeedtech.com` or open a ticket from your LiteSpeed Client Area.\n\nPlease see [Reporting Vulnerabilities](https://www.litespeedtech.com/report-security-bugs) for more information.\n",
    "mu-plugins/wtp-theme-seo-bridge.php": "<?php\n/**\n * Plugin Name: WTP SEO → Theme Bridge\n * Description: Podmienia <title> i meta description w head na wartości z WTP SEO (_wtp_seo_title_LANG, _wtp_seo_desc_LANG), z uwzględnieniem „SEO always”.\n * Version: 1.0.0\n */\n\nif (!defined('ABSPATH')) { exit; }\n\n/**\n * Lokalny helper: weź język tak, jak widzi to motyw / wtyczki.\n */\nfunction wtpseo_bridge_detect_lang() {\n    if (function_exists('wtp_detect_lang')) {\n        return wtp_detect_lang();\n    }\n    // fallback\n    if (!empty($_GET['lang'])) return sanitize_text_field($_GET['lang']);\n    if (!empty($_COOKIE['wtp_lang'])) return sanitize_text_field($_COOKIE['wtp_lang']);\n    if (!empty($_SERVER['HTTP_ACCEPT_LANGUAGE'])) return strtolower(substr($_SERVER['HTTP_ACCEPT_LANGUAGE'],0,2));\n    return 'en';\n}\n\n/**\n * Title: podmień tylko na singlu i stronach (post/page), gdy mamy SEO meta.\n */\nadd_filter('pre_get_document_title', function ($title) {\n    if (is_admin()) return $title;\n\n    if (is_singular()) {\n        $post_id = get_queried_object_id();\n        if ($post_id) {\n            // użyj funkcji z core SEO, jeśli dostępne (zachowujemy słabą zależność)\n            if (function_exists('wtpseo_get_title_for_lang')) {\n                $lang  = wtpseo_bridge_detect_lang();\n                $t = wtpseo_get_title_for_lang($post_id, $lang);\n                if ($t) return $t;\n            }\n        }\n    }\n    return $title;\n}, 20);\n\n/**\n * Meta description: do head — wykorzystaj buffer lub wp_head hook.\n */\nadd_action('wp_head', function () {\n    if (!is_singular()) return;\n    if (!function_exists('wtpseo_get_desc_for_lang')) return;\n\n    $post_id = get_queried_object_id();\n    if (!$post_id) return;\n\n    $lang = wtpseo_bridge_detect_lang();\n    $desc = wtpseo_get_desc_for_lang($post_id, $lang);\n    if ($desc) {\n        $desc = esc_attr($desc);\n        echo \"\\n<meta name=\\\"description\\\" content=\\\"{$desc}\\\" />\\n\";\n    }\n}, 3);\n\n/**\n * W razie gdyby motyw używał ogólnych filtrowanych miejsc na title/meta — dodaj też klasyczne filtry.\n */\nadd_filter('wpseo_title', function ($t) {\n    if (!function_exists('wtpseo_get_title_for_lang')) return $t;\n    if (!is_singular()) return $t;\n    $post_id = get_queried_object_id();\n    if (!$post_id) return $t;\n    $lang = wtpseo_bridge_detect_lang();\n    $val = wtpseo_get_title_for_lang($post_id, $lang);\n    return $val ? $val : $t;\n}, 20, 1);\n\nadd_filter('wpseo_metadesc', function ($d) {\n    if (!function_exists('wtpseo_get_desc_for_lang')) return $d;\n    if (!is_singular()) return $d;\n    $post_id = get_queried_object_id();\n    if (!$post_id) return $d;\n    $lang = wtpseo_bridge_detect_lang();\n    $val = wtpseo_get_desc_for_lang($post_id, $lang);\n    return $val ? $val : $d;\n}, 20, 1);",
    "mu-plugins/wtp-ro-theme-bundle.php": "<?php\n/**\n * Plugin Name: WTP RO Theme Bundle (text/plain)\n * Description: Jeden endpoint zwracający cały snapshot (lub wycinek) jako text/plain dla analizy.\n * Version: 1.0.0\n */\nif (!defined('ABSPATH')) exit;\n\nadd_action('rest_api_init', function () {\n    register_rest_route('wtp-ro/v1', '/theme-bundle', [\n        'methods'  => 'GET',\n        'permission_callback' => '__return_true',\n        'callback' => function () {\n            $site_key = '5Depft8Y9LU0t6Sv';\n            $base = WP_CONTENT_DIR . \"/uploads/wtp-ro/public/{$site_key}/\";\n\n            // Pliki snapshotu do zwrócenia (pełny zestaw). Możesz skrócić do manifest+bundle+files_000..016.\n            $files = ['manifest.json','index.json','bundle.json'];\n            for ($i = 0; $i <= 16; $i++) {\n                $files[] = sprintf('files_%03d.json', $i);\n            }\n\n            // Zbierz zawartość do jednego JSON-a (klucz=plik, wartość=treść).\n            $out = [];\n            foreach ($files as $f) {\n                $path = $base . $f;\n                $realBase = realpath($base);\n                $realPath = realpath($path);\n                if (!$realBase || !$realPath || strpos($realPath, $realBase) !== 0 || !is_file($realPath)) {\n                    continue;\n                }\n                $data = @file_get_contents($realPath);\n                if ($data !== false) {\n                    // trzymamy oryginalny tekst pliku jako string\n                    $out[$f] = $data;\n                }\n            }\n\n            header('Content-Type: text/plain; charset=UTF-8');\n            header('Cache-Control: public, max-age=60');\n            header('Access-Control-Allow-Origin: *');\n            header('Access-Control-Allow-Methods: GET, OPTIONS');\n\n            // Jedna odpowiedź z całą paczką:\n            return new WP_REST_Response(\n                wp_json_encode($out, JSON_UNESCAPED_SLASHES|JSON_UNESCAPED_UNICODE),\n                200\n            );\n        }\n    ]);\n});",
    "mu-plugins/wtp-patcher-plugins.php": "<?php\n/**\n * Plugin Name: WTP Patcher — Plugins (from chunked index)\n * Description: Patchuje wszystkie (lub wybrane) wtyczki z GitHuba na podstawie plugins-index.json + chunków.\n * Version: 1.0.0\n */\nif (!defined('ABSPATH')) exit;\n\n/**\n * WYMAGANE w wp-config.php (jak przy eksporcie):\n * define('WTP_GH_OWNER',  'BoskiDionysos');\n * define('WTP_GH_REPO',   'weektoppick-wp-modules');\n * define('WTP_GH_BRANCH', 'main'); // opcjonalnie (domyślnie main)\n * define('WTP_GH_SECRET', '...');  // ten sam sekret co przy eksporcie\n */\n\nadd_action('rest_api_init', function () {\n\n    // Wariant z parametrami: /wp-json/wtp-ro/v1/patch-plugins?key=...&index=...&dry=0&only=slug1,slug2\n    register_rest_route('wtp-ro/v1', '/patch-plugins', [\n        'methods'  => 'GET',\n        'permission_callback' => '__return_true',\n        'callback' => function (WP_REST_Request $req) {\n            if (!wtp_pp_auth_ok($req)) {\n                return new WP_REST_Response(['ok'=>false,'error'=>'forbidden'], 403);\n            }\n            $indexUrl = trim((string)$req->get_param('index'));\n            if ($indexUrl === '') {\n                // domyślny index z GH raw\n                $owner  = defined('WTP_GH_OWNER')  ? constant('WTP_GH_OWNER')  : '';\n                $repo   = defined('WTP_GH_REPO')   ? constant('WTP_GH_REPO')   : '';\n                $branch = defined('WTP_GH_BRANCH') ? constant('WTP_GH_BRANCH') : 'main';\n                if (!$owner || !$repo) {\n                    return new WP_REST_Response(['ok'=>false,'error'=>'missing-index-and-defaults'], 400);\n                }\n                $indexUrl = \"https://raw.githubusercontent.com/{$owner}/{$repo}/{$branch}/plugins-index.json\";\n            }\n\n            $dry  = (string)$req->get_param('dry') === '1' || (string)$req->get_param('dry') === 'true';\n            $only = array_filter(array_map('trim', explode(',', (string)$req->get_param('only'))));\n\n            $result = wtp_pp_apply_from_index($indexUrl, $dry, $only);\n            $code   = ($result['ok'] ?? false) ? 200 : 500;\n            return new WP_REST_Response($result, $code);\n        }\n    ]);\n\n    // Krótszy wariant: /wp-json/wtp-ro/v1/patch/plugins/<secret>?index=...&dry=0&only=...\n    register_rest_route('wtp-ro/v1', '/patch/plugins/(?P<secret>[^/]+)', [\n        'methods'  => 'GET',\n        'permission_callback' => '__return_true',\n        'callback' => function (WP_REST_Request $req) {\n            $sec = (string)$req->get_param('secret');\n            if (!defined('WTP_GH_SECRET') || $sec !== constant('WTP_GH_SECRET')) {\n                return new WP_REST_Response(['ok'=>false,'error'=>'forbidden'], 403);\n            }\n            $indexUrl = trim((string)$req->get_param('index'));\n            if ($indexUrl === '') {\n                $owner  = defined('WTP_GH_OWNER')  ? constant('WTP_GH_OWNER')  : '';\n                $repo   = defined('WTP_GH_REPO')   ? constant('WTP_GH_REPO')   : '';\n                $branch = defined('WTP_GH_BRANCH') ? constant('WTP_GH_BRANCH') : 'main';\n                if (!$owner || !$repo) {\n                    return new WP_REST_Response(['ok'=>false,'error'=>'missing-index-and-defaults'], 400);\n                }\n                $indexUrl = \"https://raw.githubusercontent.com/{$owner}/{$repo}/{$branch}/plugins-index.json\";\n            }\n            $dry  = (string)$req->get_param('dry') === '1' || (string)$req->get_param('dry') === 'true';\n            $only = array_filter(array_map('trim', explode(',', (string)$req->get_param('only'))));\n\n            $result = wtp_pp_apply_from_index($indexUrl, $dry, $only);\n            $code   = ($result['ok'] ?? false) ? 200 : 500;\n            return new WP_REST_Response($result, $code);\n        }\n    ]);\n});\n\n/** Autoryzacja: ?key=… lub nagłówki */\nfunction wtp_pp_auth_ok(WP_REST_Request $req) {\n    if (!defined('WTP_GH_SECRET')) return false;\n    $want = constant('WTP_GH_SECRET');\n\n    $key = $req->get_param('key');\n    if (is_string($key) && hash_equals($want, $key)) return true;\n\n    $hdr = $req->get_header('X-WTP-Secret');\n    if (is_string($hdr) && hash_equals($want, $hdr)) return true;\n\n    $auth = $req->get_header('Authorization');\n    if (is_string($auth) && stripos($auth, 'Bearer ') === 0) {\n        $b = trim(substr($auth, 7));\n        if (hash_equals($want, $b)) return true;\n    }\n    return false;\n}\n\n/**\n * Główna logika: pobiera index, pobiera wszystkie chunki, scala mapę i zapisuje pliki.\n *\n * @param string $indexUrl URL do plugins-index.json\n * @param bool   $dry      true = symulacja\n * @param array  $onlySlugs lista slugów (opcjonalnie), np. ['akismet','classic-editor']\n */\nfunction wtp_pp_apply_from_index($indexUrl, $dry=false, array $onlySlugs=[]) {\n    $resp = [\n        'ok'        => false,\n        'index'     => $indexUrl,\n        'dry_run'   => (bool)$dry,\n        'only'      => $onlySlugs,\n        'created'   => [],\n        'updated'   => [],\n        'skipped'   => [],\n        'errors'    => [],\n        'chunks'    => [],\n    ];\n\n    $index = wtp_pp_http_get_json($indexUrl);\n    if (!is_array($index) || empty($index['chunks']) || !is_array($index['chunks'])) {\n        $resp['errors'][] = 'bad-index';\n        return $resp;\n    }\n\n    // Zbierz wszystkie chunki do jednej mapy\n    $bundle = []; // \"plugins/... => content\" albo \"mu-plugins/... => content\"\n    foreach ($index['chunks'] as $row) {\n        $url = $row['raw'] ?? $row['url'] ?? null;\n        if (!$url) continue;\n        $resp['chunks'][] = $url;\n\n        $part = wtp_pp_http_get_json($url);\n        if (!is_array($part)) {\n            $resp['errors'][] = 'bad-chunk: '.$url;\n            continue;\n        }\n        // merge, chunki mają unikalne klucze\n        foreach ($part as $k => $v) {\n            $bundle[$k] = $v;\n        }\n    }\n    if (!$bundle) {\n        $resp['errors'][] = 'empty-bundle';\n        return $resp;\n    }\n\n    // Filtr ONLY (po slugu wtyczki dla prefixu \"plugins/\")\n    $onlySlugs = array_map('strtolower', $onlySlugs);\n    if ($onlySlugs) {\n        $bundle = array_filter($bundle, function($v, $k) use ($onlySlugs) {\n            if (strpos($k, 'plugins/') === 0) {\n                // plugins/<slug>/...\n                $rest = substr($k, 8);\n                $slug = strtolower(strtok($rest, '/'));\n                return in_array($slug, $onlySlugs, true);\n            }\n            if (strpos($k, 'mu-plugins/') === 0) {\n                $rest = substr($k, 11);\n                $slug = strtolower(strtok($rest, '/'));\n                return in_array($slug, $onlySlugs, true);\n            }\n            return false;\n        }, ARRAY_FILTER_USE_BOTH);\n        if (!$bundle) {\n            $resp['errors'][] = 'only-filter-empty';\n            return $resp;\n        }\n    }\n\n    // Zapis na dysk\n    foreach ($bundle as $key => $content) {\n        if (!is_string($content)) $content = (string)$content;\n\n        if (strpos($key, 'plugins/') === 0) {\n            $base = wp_normalize_path(WP_PLUGIN_DIR);\n            $rel  = substr($key, 8); // bez \"plugins/\"\n        } elseif (strpos($key, 'mu-plugins/') === 0) {\n            $base = wp_normalize_path(WPMU_PLUGIN_DIR);\n            $rel  = substr($key, 11); // bez \"mu-plugins/\"\n        } else {\n            $resp['skipped'][] = $key;\n            continue;\n        }\n\n        $target = $base . '/' . $rel;\n        $target = wp_normalize_path($target);\n        $dir    = dirname($target);\n\n        if ($dry) {\n            if (file_exists($target)) $resp['updated'][] = $key;\n            else                      $resp['created'][] = $key;\n            continue;\n        }\n\n        if (!is_dir($dir)) {\n            if (!wp_mkdir_p($dir)) {\n                $resp['errors'][] = 'mkdir-failed: '.$dir;\n                continue;\n            }\n        }\n\n        $exists = file_exists($target);\n        $ok     = @file_put_contents($target, $content);\n        if ($ok === false) {\n            $resp['errors'][] = 'write-failed: '.$target;\n            continue;\n        }\n        if ($exists) $resp['updated'][] = $key;\n        else         $resp['created'][] = $key;\n    }\n\n    $resp['ok'] = empty($resp['errors']);\n    return $resp;\n}\n\n/** GET JSON helper (bez zewn. bibliotek) */\nfunction wtp_pp_http_get_json($url) {\n    $args = [\n        'method'  => 'GET',\n        'timeout' => 25,\n        'headers' => ['Accept' => 'application/json'],\n    ];\n    $res  = wp_remote_request($url, $args);\n    if (is_wp_error($res)) return null;\n    $code = wp_remote_retrieve_response_code($res);\n    if ($code < 200 || $code >= 300) return null;\n    $body = wp_remote_retrieve_body($res);\n    $json = json_decode($body, true);\n    return is_array($json) ? $json : null;\n}",
    "mu-plugins/wtp-seo.php": "<?php\n/**\n * Plugin Name: WTP SEO (Core)\n * Description: Panel SEO + meta boksy: tytuł/opis/keywords per język (np. _wtp_seo_title_en). Walidacja długości, REST do akcji linkiem, tryb „SEO always”.\n * Version: 1.0.0\n */\n\nif (!defined('ABSPATH')) { exit; }\n\n/**\n * ───────────────────────────────────────────────────────────────────\n * Konfiguracja domyślna (możesz zmienić w Ustawienia → WTP SEO)\n * ───────────────────────────────────────────────────────────────────\n */\nif (!defined('WTP_SEO_DEFAULT_TITLE_MAX')) define('WTP_SEO_DEFAULT_TITLE_MAX', 60);\nif (!defined('WTP_SEO_DEFAULT_DESC_MAX'))  define('WTP_SEO_DEFAULT_DESC_MAX', 160);\n\n/**\n * Pomocnicze: wykryj język (preferuj funkcję z motywu, ale nie redefiniuj).\n */\nfunction wtpseo_detect_lang() {\n    if (function_exists('wtp_detect_lang')) {\n        return wtp_detect_lang();\n    }\n    // fallback prosty (cookie → Accept-Language → en)\n    $get = isset($_GET['lang']) ? sanitize_text_field($_GET['lang']) : '';\n    if ($get) { return $get; }\n    if (!empty($_COOKIE['wtp_lang'])) {\n        return sanitize_text_field($_COOKIE['wtp_lang']);\n    }\n    if (!empty($_SERVER['HTTP_ACCEPT_LANGUAGE'])) {\n        $al = strtolower(substr($_SERVER['HTTP_ACCEPT_LANGUAGE'], 0, 2));\n        return $al;\n    }\n    return 'en';\n}\n\n/**\n * Lista języków: spróbuj wziąć z motywu ($WTP_LANGS), inaczej opcja/plugin, finalnie fallback.\n */\nfunction wtpseo_get_languages() {\n    // 1) global z motywu\n    global $WTP_LANGS;\n    if (is_array($WTP_LANGS) && !empty($WTP_LANGS)) {\n        return array_keys($WTP_LANGS);\n    }\n    // 2) opcja z wtyczki\n    $opt = get_option('wtp_seo_langs');\n    if (is_array($opt) && !empty($opt)) {\n        return array_values(array_unique(array_map('sanitize_text_field', $opt)));\n    }\n    // 3) fallback\n    return array('en','pl','de','fr','es','pt','cs','sk');\n}\n\n/**\n * Opcje główne (pobierz scalone z domyślnymi).\n */\nfunction wtpseo_get_options() {\n    $opt = get_option('wtp_seo_options');\n    $def = array(\n        'title_max'     => WTP_SEO_DEFAULT_TITLE_MAX,\n        'desc_max'      => WTP_SEO_DEFAULT_DESC_MAX,\n        'seo_always'    => 1,          // „SEO always” – jeśli brak per-lang, użyj bazowego\n        'base_language' => 'en',       // język bazowy, z którego kopiujemy w razie braku\n    );\n    if (!is_array($opt)) $opt = array();\n    return array_merge($def, $opt);\n}\n\n/**\n * Klucze meta per język.\n */\nfunction wtpseo_meta_key_title($lang) { return '_wtp_seo_title_' . sanitize_key($lang); }\nfunction wtpseo_meta_key_desc($lang)  { return '_wtp_seo_desc_'  . sanitize_key($lang); }\nfunction wtpseo_meta_key_pk($lang)    { return '_wtp_seo_primary_kw_' . sanitize_key($lang); }\nfunction wtpseo_meta_key_oks($lang)   { return '_wtp_seo_other_kw_'   . sanitize_key($lang); }\n\n/**\n * Walidacje długości.\n */\nfunction wtpseo_trim_len($str, $max) {\n    $str = trim((string)$str);\n    if ($max > 0 && mb_strlen($str, 'UTF-8') > $max) {\n        $str = mb_substr($str, 0, $max, 'UTF-8');\n    }\n    return $str;\n}\n\n/**\n * ───────────────────────────────────────────────────────────────────\n * ADMIN: Ustawienia (Ustawienia → WTP SEO)\n * ───────────────────────────────────────────────────────────────────\n */\nadd_action('admin_menu', function () {\n    add_options_page('WTP SEO', 'WTP SEO', 'manage_options', 'wtp-seo', 'wtpseo_render_settings_page');\n});\n\nfunction wtpseo_render_settings_page() {\n    if (!current_user_can('manage_options')) { return; }\n\n    // Zapis\n    if (!empty($_POST['wtpseo_save']) && check_admin_referer('wtpseo_save_settings')) {\n        $title_max = isset($_POST['title_max']) ? intval($_POST['title_max']) : WTP_SEO_DEFAULT_TITLE_MAX;\n        $desc_max  = isset($_POST['desc_max'])  ? intval($_POST['desc_max'])  : WTP_SEO_DEFAULT_DESC_MAX;\n        $seo_always = !empty($_POST['seo_always']) ? 1 : 0;\n        $base_lang  = isset($_POST['base_language']) ? sanitize_text_field($_POST['base_language']) : 'en';\n\n        $langs_raw  = isset($_POST['langs']) ? (array)$_POST['langs'] : array();\n        $langs      = array();\n        foreach ($langs_raw as $l) { $langs[] = sanitize_text_field($l); }\n\n        update_option('wtp_seo_options', array(\n            'title_max'     => max(10, $title_max),\n            'desc_max'      => max(30, $desc_max),\n            'seo_always'    => $seo_always,\n            'base_language' => $base_lang,\n        ));\n        update_option('wtp_seo_langs', array_values(array_unique($langs)));\n\n        echo '<div class=\"updated\"><p>Saved.</p></div>';\n    }\n\n    $opts  = wtpseo_get_options();\n    $langs = wtpseo_get_languages();\n\n    ?>\n    <div class=\"wrap\">\n      <h1>WTP SEO — ustawienia</h1>\n      <form method=\"post\">\n        <?php wp_nonce_field('wtpseo_save_settings'); ?>\n\n        <table class=\"form-table\" role=\"presentation\">\n          <tr>\n            <th scope=\"row\">Aktywne języki</th>\n            <td>\n              <p>Wpisz kody języków (ISO-2), każdy w osobnym polu:</p>\n              <div id=\"wtpseo-langs\">\n                <?php\n                $show = !empty($langs) ? $langs : array('en','pl');\n                foreach ($show as $i => $code) {\n                    echo '<input type=\"text\" name=\"langs[]\" value=\"'.esc_attr($code).'\" style=\"width:80px;margin-right:6px;margin-bottom:6px\" />';\n                }\n                ?>\n                <button class=\"button\" type=\"button\" onclick=\"wtpseo_add_lang()\">+ język</button>\n              </div>\n              <script>\n              function wtpseo_add_lang(){\n                  var wrap=document.getElementById('wtpseo-langs');\n                  var inp=document.createElement('input');\n                  inp.type='text'; inp.name='langs[]'; inp.style.width='80px'; inp.style.marginRight='6px'; inp.style.marginBottom='6px';\n                  wrap.insertBefore(inp, wrap.lastElementChild);\n              }\n              </script>\n            </td>\n          </tr>\n\n          <tr>\n            <th scope=\"row\">Maks. długości</th>\n            <td>\n              <label>Title max: <input type=\"number\" name=\"title_max\" value=\"<?php echo esc_attr($opts['title_max']); ?>\" style=\"width:100px\"></label>\n              &nbsp;&nbsp;\n              <label>Description max: <input type=\"number\" name=\"desc_max\" value=\"<?php echo esc_attr($opts['desc_max']); ?>\" style=\"width:100px\"></label>\n            </td>\n          </tr>\n\n          <tr>\n            <th scope=\"row\">SEO always</th>\n            <td>\n              <label><input type=\"checkbox\" name=\"seo_always\" value=\"1\" <?php checked($opts['seo_always'], 1); ?>> Jeśli dla danego języka nie ma Title/Description — użyj bazowego.</label>\n            </td>\n          </tr>\n\n          <tr>\n            <th scope=\"row\">Język bazowy</th>\n            <td>\n              <input type=\"text\" name=\"base_language\" value=\"<?php echo esc_attr($opts['base_language']); ?>\" style=\"width:80px\">\n              <p class=\"description\">Z tego języka skopiujemy Title/Description, gdy brakuje w docelowym (gdy włączone „SEO always”).</p>\n            </td>\n          </tr>\n        </table>\n\n        <p><button class=\"button button-primary\" name=\"wtpseo_save\" value=\"1\">Zapisz</button></p>\n      </form>\n    </div>\n    <?php\n}\n\n/**\n * ───────────────────────────────────────────────────────────────────\n * META BOX: per post — Title/Desc/Keywords dla wszystkich języków\n * ───────────────────────────────────────────────────────────────────\n */\nadd_action('add_meta_boxes', function () {\n    $screens = array('post', 'page');\n    foreach ($screens as $sc) {\n        add_meta_box('wtpseo_meta', 'WTP SEO (per język)', 'wtpseo_meta_box_cb', $sc, 'normal', 'high');\n    }\n});\n\nfunction wtpseo_meta_box_cb($post) {\n    wp_nonce_field('wtpseo_meta_save', 'wtpseo_meta_nonce');\n\n    $opts  = wtpseo_get_options();\n    $langs = wtpseo_get_languages();\n\n    echo '<style>.wtpseo-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}.wtpseo-field{border:1px solid #ddd;border-radius:6px;padding:10px;background:#fff}</style>';\n    echo '<div class=\"wtpseo-grid\">';\n\n    foreach ($langs as $lang) {\n        $k_title = wtpseo_meta_key_title($lang);\n        $k_desc  = wtpseo_meta_key_desc($lang);\n        $k_pk    = wtpseo_meta_key_pk($lang);\n        $k_oks   = wtpseo_meta_key_oks($lang);\n\n        $v_title = get_post_meta($post->ID, $k_title, true);\n        $v_desc  = get_post_meta($post->ID, $k_desc, true);\n        $v_pk    = get_post_meta($post->ID, $k_pk, true);\n        $v_oks   = get_post_meta($post->ID, $k_oks, true);\n\n        echo '<div class=\"wtpseo-field\">';\n        echo '<h4 style=\"margin:0 0 8px\">Język: '.esc_html(strtoupper($lang)).'</h4>';\n        echo '<p><label><strong>SEO Title</strong> (max '.$opts['title_max'].')<br>';\n        echo '<input type=\"text\" name=\"wtpseo['.esc_attr($lang).'][title]\" value=\"'.esc_attr($v_title).'\" style=\"width:100%\"></label></p>';\n        echo '<p><label><strong>SEO Description</strong> (max '.$opts['desc_max'].')<br>';\n        echo '<textarea name=\"wtpseo['.esc_attr($lang).'][desc]\" rows=\"3\" style=\"width:100%\">'.esc_textarea($v_desc).'</textarea></label></p>';\n        echo '<p><label><strong>Primary keyword</strong><br>';\n        echo '<input type=\"text\" name=\"wtpseo['.esc_attr($lang).'][pk]\" value=\"'.esc_attr($v_pk).'\" style=\"width:100%\"></label></p>';\n        echo '<p><label><strong>Other keywords</strong> (po przecinku)<br>';\n        echo '<input type=\"text\" name=\"wtpseo['.esc_attr($lang).'][oks]\" value=\"'.esc_attr($v_oks).'\" style=\"width:100%\"></label></p>';\n        echo '</div>';\n    }\n    echo '</div>';\n}\n\nadd_action('save_post', function ($post_id) {\n    if (!isset($_POST['wtpseo_meta_nonce']) || !wp_verify_nonce($_POST['wtpseo_meta_nonce'], 'wtpseo_meta_save')) return;\n    if (defined('DOING_AUTOSAVE') && DOING_AUTOSAVE) return;\n    if (!current_user_can('edit_post', $post_id)) return;\n\n    $opts  = wtpseo_get_options();\n    $langs = wtpseo_get_languages();\n\n    $in = isset($_POST['wtpseo']) ? (array)$_POST['wtpseo'] : array();\n\n    foreach ($langs as $lang) {\n        $row = isset($in[$lang]) ? (array)$in[$lang] : array();\n\n        $title = isset($row['title']) ? wtpseo_trim_len(wp_unslash($row['title']), $opts['title_max']) : '';\n        $desc  = isset($row['desc'])  ? wtpseo_trim_len(wp_unslash($row['desc']),  $opts['desc_max'])  : '';\n        $pk    = isset($row['pk'])    ? sanitize_text_field(wp_unslash($row['pk'])) : '';\n        $oks   = isset($row['oks'])   ? sanitize_text_field(wp_unslash($row['oks'])): '';\n\n        update_post_meta($post_id, wtpseo_meta_key_title($lang), $title);\n        update_post_meta($post_id, wtpseo_meta_key_desc($lang),  $desc);\n        update_post_meta($post_id, wtpseo_meta_key_pk($lang),    $pk);\n        update_post_meta($post_id, wtpseo_meta_key_oks($lang),   $oks);\n    }\n}, 10, 1);\n\n/**\n * ───────────────────────────────────────────────────────────────────\n * REST: proste akcje linkiem (np. do masowych operacji/automatyzacji)\n * ───────────────────────────────────────────────────────────────────\n * GET /wp-json/wtp-ro/v1/seo/copy-missing?post=123&from=en&to=pl&key=SECRET\n *   — skopiuje brakujące title/description/keywords z \"from\" → \"to\" (jeśli puste)\n *\n * GET /wp-json/wtp-ro/v1/seo/fix-lengths?post=123&key=SECRET\n *   — przytnie wszystkie title/desc do limitów (bez AI)\n */\nadd_action('rest_api_init', function () {\n    register_rest_route('wtp-ro/v1', '/seo/copy-missing', array(\n        'methods'  => 'GET',\n        'permission_callback' => '__return_true',\n        'callback' => function (WP_REST_Request $req) {\n            // proste zabezpieczenie sekretem (jeśli masz WTP_GH_SECRET – użyj go)\n            if (defined('WTP_GH_SECRET')) {\n                $key = $req->get_param('key');\n                if (!$key || $key !== constant('WTP_GH_SECRET')) {\n                    return new WP_REST_Response(array('ok'=>false,'error'=>'forbidden'), 403);\n                }\n            }\n\n            $post_id = intval($req->get_param('post'));\n            $from    = sanitize_text_field($req->get_param('from'));\n            $to      = sanitize_text_field($req->get_param('to'));\n\n            if (!$post_id || !$from || !$to || $from === $to) {\n                return new WP_REST_Response(array('ok'=>false,'error'=>'bad-params'), 400);\n            }\n\n            $fields = array('title','desc','pk','oks');\n            $copied = array();\n            foreach ($fields as $f) {\n                $src_key = call_user_func('wtpseo_meta_key_'.($f==='title'?'title': ($f==='desc'?'desc': ($f==='pk'?'pk':'oks')) ), $from);\n                $dst_key = call_user_func('wtpseo_meta_key_'.($f==='title'?'title': ($f==='desc'?'desc': ($f==='pk'?'pk':'oks')) ), $to);\n\n                $src = get_post_meta($post_id, $src_key, true);\n                $dst = get_post_meta($post_id, $dst_key, true);\n                if ($src && !$dst) {\n                    update_post_meta($post_id, $dst_key, $src);\n                    $copied[] = $f;\n                }\n            }\n            return new WP_REST_Response(array('ok'=>true,'copied'=>$copied), 200);\n        }\n    ));\n\n    register_rest_route('wtp-ro/v1', '/seo/fix-lengths', array(\n        'methods'  => 'GET',\n        'permission_callback' => '__return_true',\n        'callback' => function (WP_REST_Request $req) {\n            if (defined('WTP_GH_SECRET')) {\n                $key = $req->get_param('key');\n                if (!$key || $key !== constant('WTP_GH_SECRET')) {\n                    return new WP_REST_Response(array('ok'=>false,'error'=>'forbidden'), 403);\n                }\n            }\n\n            $post_id = intval($req->get_param('post'));\n            if (!$post_id) return new WP_REST_Response(array('ok'=>false,'error'=>'bad-post'), 400);\n\n            $opts  = wtpseo_get_options();\n            $langs = wtpseo_get_languages();\n\n            $changed = array();\n            foreach ($langs as $lang) {\n                $kt = wtpseo_meta_key_title($lang);\n                $kd = wtpseo_meta_key_desc($lang);\n\n                $vt = get_post_meta($post_id, $kt, true);\n                $vd = get_post_meta($post_id, $kd, true);\n\n                $nt = wtpseo_trim_len($vt, $opts['title_max']);\n                $nd = wtpseo_trim_len($vd, $opts['desc_max']);\n\n                if ($nt !== $vt) { update_post_meta($post_id, $kt, $nt); $changed[] = \"title:$lang\"; }\n                if ($nd !== $vd) { update_post_meta($post_id, $kd, $nd); $changed[] = \"desc:$lang\"; }\n            }\n            return new WP_REST_Response(array('ok'=>true,'changed'=>$changed), 200);\n        }\n    ));\n});\n\n/**\n * ───────────────────────────────────────────────────────────────────\n * „SEO always” – funkcje pomocnicze dla Bridge i innych\n * ───────────────────────────────────────────────────────────────────\n */\nfunction wtpseo_get_title_for_lang($post_id, $lang) {\n    $opts = wtpseo_get_options();\n    $val  = get_post_meta($post_id, wtpseo_meta_key_title($lang), true);\n    if ($val) return $val;\n    if (!empty($opts['seo_always']) && !empty($opts['base_language'])) {\n        $fallback = get_post_meta($post_id, wtpseo_meta_key_title($opts['base_language']), true);\n        if ($fallback) return $fallback;\n    }\n    return '';\n}\n\nfunction wtpseo_get_desc_for_lang($post_id, $lang) {\n    $opts = wtpseo_get_options();\n    $val  = get_post_meta($post_id, wtpseo_meta_key_desc($lang), true);\n    if ($val) return $val;\n    if (!empty($opts['seo_always']) && !empty($opts['base_language'])) {\n        $fallback = get_post_meta($post_id, wtpseo_meta_key_desc($opts['base_language']), true);\n        if ($fallback) return $fallback;\n    }\n    return '';\n}",
    "mu-plugins/wtp-patcher-theme.php": "<?php\n/**\n * Plugin Name: WTP Patcher — Theme (GitHub → WP)\n * Description: Pobiera theme-bundle.json z GitHuba i zapisuje pliki do aktywnego motywu (z backupem .bak). Endpoint: /wp-json/wtp-ro/v1/patch-theme?key=SECRET\n * Version: 1.0.0\n */\nif (!defined('ABSPATH')) exit;\n\n/**\n * WYMAGANE:\n *   define('WTP_GH_SECRET', 'twoj_bardzo_tajny_sekret'); // w wp-config.php (JUŻ masz)\n *\n * OPCJONALNE (możesz zostawić domyślne):\n *   define('WTP_PATCH_THEME_URL', 'https://raw.githubusercontent.com/BoskiDionysos/weektoppick-wp-modules/main/theme-bundle.json');\n */\n\nif (!defined('WTP_PATCH_THEME_URL')) {\n    define('WTP_PATCH_THEME_URL', 'https://raw.githubusercontent.com/BoskiDionysos/weektoppick-wp-modules/main/theme-bundle.json');\n}\n\nadd_action('rest_api_init', function () {\n    register_rest_route('wtp-ro/v1', '/patch-theme', [\n        'methods'  => 'GET',\n        'permission_callback' => '__return_true', // publiczny, ale sprawdzamy SECRET niżej\n        'callback' => 'wtp_patch_theme_run',\n        'args'     => [\n            'key'  => ['type'=>'string','required'=>false],\n            'url'  => ['type'=>'string','required'=>false], // opcjonalny override URL\n            'dry'  => ['type'=>'boolean','required'=>false], // podgląd bez zapisu\n        ],\n    ]);\n});\n\nfunction wtp_patch_theme_run(WP_REST_Request $req) {\n    // --- auth przez sekret ---\n    if (!defined('WTP_GH_SECRET')) {\n        return new WP_REST_Response(['ok'=>false,'error'=>'missing-secret'], 403);\n    }\n    $key = (string)$req->get_param('key');\n    if ($key === '' || !hash_equals(WTP_GH_SECRET, $key)) {\n        return new WP_REST_Response(['ok'=>false,'error'=>'forbidden'], 403);\n    }\n\n    // --- ustal źródło bundle ---\n    $url = (string)($req->get_param('url') ?: WTP_PATCH_THEME_URL);\n\n    // pobierz JSON\n    $res = wp_remote_get($url, [\n        'timeout' => 30,\n        'headers' => [\n            'Accept'     => 'application/json',\n            'User-Agent' => 'WTP-Patcher/1.0',\n        ],\n    ]);\n    $code = wp_remote_retrieve_response_code($res);\n    if ($code !== 200) {\n        return new WP_REST_Response(['ok'=>false,'error'=>\"fetch-failed:$code\"], 500);\n    }\n    $body = wp_remote_retrieve_body($res);\n    $bundle = json_decode($body, true);\n    if (!is_array($bundle)) {\n        return new WP_REST_Response(['ok'=>false,'error'=>'invalid-json'], 500);\n    }\n\n    // --- katalog motywu ---\n    $theme_dir = wp_normalize_path(get_stylesheet_directory());\n    if (!$theme_dir || !is_dir($theme_dir) || !is_writable($theme_dir)) {\n        return new WP_REST_Response(['ok'=>false,'error'=>'theme-dir-not-writable'], 500);\n    }\n\n    $dry = filter_var($req->get_param('dry'), FILTER_VALIDATE_BOOLEAN);\n\n    $updated = [];\n    $created = [];\n    $skipped = [];\n    $errors  = [];\n\n    foreach ($bundle as $keyPath => $content) {\n        // Oczekujemy kluczy typu \"theme/rel/plik.php\"\n        if (strpos($keyPath, 'theme/') !== 0) {\n            $skipped[] = $keyPath;\n            continue;\n        }\n        $rel = substr($keyPath, strlen('theme/')); // relatywnie do motywu\n\n        // sanity path: bez ../, bez początkowego slasha\n        if ($rel === '' || strpos($rel, '..') !== false || $rel[0] === '/') {\n            $errors[] = ['file'=>$keyPath,'error'=>'bad-relpath'];\n            continue;\n        }\n\n        $target = wp_normalize_path($theme_dir . '/' . $rel);\n        // dopuszczalne rozszerzenia — lekkie sito\n        $ext = strtolower(pathinfo($target, PATHINFO_EXTENSION));\n        if (!in_array($ext, ['php','css','js','json','svg','txt','md','html','po','mo'], true)) {\n            $skipped[] = $keyPath;\n            continue;\n        }\n\n        // utwórz katalog\n        $dir = dirname($target);\n        if (!is_dir($dir)) {\n            if (!$dry) {\n                if (!wp_mkdir_p($dir)) {\n                    $errors[] = ['file'=>$keyPath,'error'=>'mkdir-failed'];\n                    continue;\n                }\n            }\n        }\n\n        $exists = file_exists($target);\n        if (!$dry) {\n            // zrób backup .bak (tylko jeżeli istniał)\n            if ($exists) {\n                $bak = $target . '.bak';\n                // żeby nie nadpisywać istniejącego .bak, dopisz timestamp\n                if (file_exists($bak)) {\n                    $bak = $target . '.' . date('Ymd_His') . '.bak';\n                }\n                if (!@copy($target, $bak)) {\n                    $errors[] = ['file'=>$keyPath,'error'=>'backup-failed'];\n                    continue;\n                }\n            }\n            // zapisz nową treść\n            $ok = @file_put_contents($target, $content);\n            if ($ok === false) {\n                $errors[] = ['file'=>$keyPath,'error'=>'write-failed'];\n                continue;\n            }\n        }\n\n        if ($exists) { $updated[] = $rel; } else { $created[] = $rel; }\n    }\n\n    $ok = empty($errors);\n    return new WP_REST_Response([\n        'ok'       => $ok,\n        'dry_run'  => (bool)$dry,\n        'source'   => $url,\n        'theme'    => basename($theme_dir),\n        'created'  => $created,\n        'updated'  => $updated,\n        'skipped'  => $skipped,\n        'errors'   => $errors\n    ], $ok ? 200 : 500);\n}",
    "mu-plugins/wtp-dev-bridge.php": "<?php\n/**\n * Plugin Name: WTP Dev Bridge — GitHub Export + Patcher (all-in-one)\n * Description: Eksport motywu i wtyczek do GitHub (z chunkowaniem) + patch motywu z theme-bundle.json (RAW). Bez kolizji stałych.\n * Version: 4.0.0\n */\nif (!defined('ABSPATH')) exit;\n\n// ─────────────────────────────────────────────────────────────\n// GLOBAL GUARD: ładuj tylko raz (eliminuje duplikaty w logach)\n// ─────────────────────────────────────────────────────────────\nif (defined('WTP_DEV_BRIDGE_LOADED')) return;\ndefine('WTP_DEV_BRIDGE_LOADED', true);\n\n// ─────────────────────────────────────────────────────────────\n// WYMAGANE W wp-config.php  (NIE definiujemy tu!)\n// ─  define('WTP_GH_OWNER',  'BoskiDionysos');\n// ─  define('WTP_GH_REPO',   'weektoppick-wp-modules');\n// ─  define('WTP_GH_BRANCH', 'main');               // opcjonalnie\n// ─  define('WTP_GH_TOKEN',  'ghp_xxx');            // repo:contents write\n// ─  define('WTP_GH_SECRET', 'super_tajny_sekret'); // do REST\n// ─────────────────────────────────────────────────────────────\n$__need = ['WTP_GH_OWNER','WTP_GH_REPO','WTP_GH_TOKEN','WTP_GH_SECRET'];\nforeach ($__need as $__c) { if (!defined($__c)) { error_log(\"[WTP Bridge] Missing constant $__c\"); return; } }\n\n// ============================================================================\n// KLASA – cała logika w środku (brak globalnych const → brak kolizji)\n// ============================================================================\nif (!class_exists('WTP_Dev_Bridge')):\n\nfinal class WTP_Dev_Bridge {\n\n    // Konfiguracja (trzymamy w właściwościach – nie ma redefinicji)\n    private static array $allowedExt     = ['php','css','js','json','svg','txt','md','html','po','mo'];\n    private static string $excludeRx     = '#(?:^|/)(node_modules|vendor|\\.git|\\.svn|\\.github|tests?|bin|dist|cache)(/|$)#i';\n    private static string $excludeFileRx = '#\\.(map|lock|min\\.map|ico|woff2?|ttf|eot)$#i';\n    private static int    $chunkTarget   = 4_500_000; // ~4.5 MB (poniżej 5 MB limitów)\n    private static string $themeTarget   = 'theme-bundle.json';\n    private static string $pluginsTarget = 'plugins-bundle.json';\n    private static string $pluginsIndex  = 'plugins-index.json';\n    private static string $chunkBase     = 'plugins-bundle';\n\n    // ─────────────────────────────────────────────────────────\n    // ROUTES\n    // ─────────────────────────────────────────────────────────\n    public static function boot() : void {\n        add_action('rest_api_init', [__CLASS__, 'register_routes']);\n    }\n\n    public static function register_routes() : void {\n\n        // publish/theme/{secret}\n        register_rest_route('wtp-ro/v1', '/publish/theme/(?P<secret>[^/]+)', [\n            'methods'  => 'GET',\n            'permission_callback' => '__return_true',\n            'callback' => function(\\WP_REST_Request $req) {\n                if (!self::auth_secret_path($req)) return self::err(403,'forbidden');\n                $bundle = self::collect_theme();\n                if (!$bundle) return self::err(500,'empty-theme');\n                $res = self::push_to_github($bundle, self::$themeTarget, 'Update theme-bundle.json (publish)');\n                return self::answer($res);\n            }\n        ]);\n\n        // publish/plugins/{secret}\n        register_rest_route('wtp-ro/v1', '/publish/plugins/(?P<secret>[^/]+)', [\n            'methods'  => 'GET',\n            'permission_callback' => '__return_true',\n            'callback' => function(\\WP_REST_Request $req) {\n                if (!self::auth_secret_path($req)) return self::err(403,'forbidden');\n                $bundle = self::collect_plugins_full();\n                if (!$bundle) return self::err(500,'empty-plugins');\n                $res = self::push_to_github($bundle, self::$pluginsTarget, 'Update plugins-bundle.json (publish)');\n                return self::answer($res);\n            }\n        ]);\n\n        // publish/all/{secret}\n        register_rest_route('wtp-ro/v1', '/publish/all/(?P<secret>[^/]+)', [\n            'methods'  => 'GET',\n            'permission_callback' => '__return_true',\n            'callback' => function(\\WP_REST_Request $req) {\n                if (!self::auth_secret_path($req)) return self::err(403,'forbidden');\n\n                $out = [];\n\n                $theme = self::collect_theme();\n                if ($theme) {\n                    $r1 = self::push_to_github($theme, self::$themeTarget, 'Update theme-bundle.json (publish-all)');\n                    $out['theme'] = self::res_map($r1);\n                } else $out['theme'] = ['ok'=>false,'error'=>'empty-theme'];\n\n                $plugins = self::collect_plugins_full();\n                if ($plugins) {\n                    $r2 = self::push_to_github($plugins, self::$pluginsTarget, 'Update plugins-bundle.json (publish-all)');\n                    $out['plugins'] = self::res_map($r2);\n                } else $out['plugins'] = ['ok'=>false,'error'=>'empty-plugins'];\n\n                $ok = ($out['theme']['ok']??false) || ($out['plugins']['ok']??false);\n                return new \\WP_REST_Response(['ok'=>$ok]+$out, $ok?200:500);\n            }\n        ]);\n\n        // publish/plugins-chunked/{secret}\n        register_rest_route('wtp-ro/v1', '/publish/plugins-chunked/(?P<secret>[^/]+)', [\n            'methods'  => 'GET',\n            'permission_callback' => '__return_true',\n            'callback' => function(\\WP_REST_Request $req) {\n                if (!self::auth_secret_path($req)) return self::err(403,'forbidden');\n                $bundle = self::collect_plugins_full();\n                if (!$bundle) return self::err(500,'empty-plugins');\n\n                $chunks = self::chunk_map($bundle, self::$chunkTarget);\n                if (!$chunks) return self::err(500,'chunking-failed');\n\n                $push = self::push_chunks_and_index($chunks);\n                if (is_wp_error($push)) return self::err(500, $push->get_error_message());\n                return new \\WP_REST_Response(['ok'=>true]+$push, 200);\n            }\n        ]);\n\n        // patch/theme?key=SECRET&url=RAW_JSON&dry=0|1\n        register_rest_route('wtp-ro/v1', '/patch/theme', [\n            'methods'  => 'GET',\n            'permission_callback' => '__return_true',\n            'callback' => function(\\WP_REST_Request $req) {\n                $key = (string)$req->get_param('key');\n                if (!$key || $key !== constant('WTP_GH_SECRET')) return self::err(403,'forbidden');\n\n                $url = trim((string)$req->get_param('url'));\n                if ($url === '') return self::err(400,'missing-url');\n\n                $dry = (string)$req->get_param('dry');\n                $dry = ($dry === '1' || strtolower($dry) === 'true' || $dry === 'on') ? true : false;\n\n                $json = self::http('GET', $url, null, null, 25);\n                if ($json['code'] !== 200 || !is_array($json['body_raw'])) {\n                    return self::err(502, 'fetch-failed');\n                }\n                $map = $json['body_raw']; // mapa \"theme/relpath\" => content\n\n                $themeDir = wp_normalize_path(get_stylesheet_directory());\n                $updated = []; $created = []; $skipped = []; $errors = [];\n\n                foreach ($map as $k => $v) {\n                    if (strpos($k, 'theme/') !== 0) { $skipped[] = $k; continue; }\n                    $rel = ltrim(substr($k, 6), '/'); // po \"theme/\"\n                    if ($rel === '') { $skipped[] = $k; continue; }\n\n                    $target = $themeDir . '/' . $rel;\n                    $dir = dirname($target);\n                    if (!is_dir($dir)) {\n                        if (!$dry) @wp_mkdir_p($dir);\n                        if (!is_dir($dir)) { $errors[] = $rel; continue; }\n                    }\n                    $exists = file_exists($target);\n                    if (!$dry) {\n                        $ok = @file_put_contents($target, $v);\n                        if ($ok === false) { $errors[] = $rel; continue; }\n                    }\n                    if ($exists) $updated[] = $rel; else $created[] = $rel;\n                }\n\n                return new \\WP_REST_Response([\n                    'ok'      => empty($errors),\n                    'dry_run' => $dry,\n                    'source'  => $url,\n                    'theme'   => basename($themeDir),\n                    'created' => $created,\n                    'updated' => $updated,\n                    'skipped' => $skipped,\n                    'errors'  => $errors,\n                ], empty($errors) ? 200 : 500);\n            }\n        ]);\n\n        // proste: ping/selftest (bez sekretu)\n        register_rest_route('wtp-ro/v1', '/ping', [\n            'methods'  => 'GET',\n            'permission_callback' => '__return_true',\n            'callback' => fn() => new \\WP_REST_Response(['ok'=>true,'ts'=>time()], 200)\n        ]);\n    }\n\n    // ─────────────────────────────────────────────────────────\n    // AUTH helpers\n    // ─────────────────────────────────────────────────────────\n    private static function auth_secret_path(\\WP_REST_Request $req) : bool {\n        $sec = (string)$req->get_param('secret');\n        return ($sec !== '' && $sec === constant('WTP_GH_SECRET'));\n    }\n\n    // ─────────────────────────────────────────────────────────\n    // COLLECTORS\n    // ─────────────────────────────────────────────────────────\n    private static function collect_theme() : array {\n        $base = wp_normalize_path( get_stylesheet_directory() );\n        return self::collect_from_base($base, 'theme');\n    }\n\n    private static function collect_plugins_full() : array {\n        $out = [];\n        $plugins = wp_normalize_path( WP_PLUGIN_DIR );\n        if (is_dir($plugins)) $out += self::collect_from_base($plugins, 'plugins');\n\n        $mu = wp_normalize_path( WPMU_PLUGIN_DIR );\n        if (is_dir($mu) && $mu !== $plugins) $out += self::collect_from_base($mu, 'mu-plugins');\n\n        return $out;\n    }\n\n    private static function collect_from_base(string $base, string $prefix) : array {\n        $rii = new \\RecursiveIteratorIterator(new \\RecursiveDirectoryIterator($base, \\FilesystemIterator::SKIP_DOTS));\n        $out = [];\n        foreach ($rii as $spl) {\n            /** @var \\SplFileInfo $spl */\n            if (!$spl->isFile()) continue;\n\n            $path = wp_normalize_path($spl->getPathname());\n            $rel  = ltrim(str_replace($base, '', $path), '/');\n\n            if (preg_match(self::$excludeRx, $rel))     continue;\n            if (preg_match(self::$excludeFileRx, $rel)) continue;\n\n            $ext = strtolower(pathinfo($rel, PATHINFO_EXTENSION));\n            if (!in_array($ext, self::$allowedExt, true)) continue;\n\n            $content = @file_get_contents($path);\n            if ($content === false) continue;\n\n            $key = trim($prefix,'/').'/'.$rel;\n            $out[$key] = $content;\n        }\n        return $out;\n    }\n\n    // ─────────────────────────────────────────────────────────\n    // CHUNKING\n    // ─────────────────────────────────────────────────────────\n    private static function chunk_map(array $map, int $targetBytes) : array {\n        $chunks = []; $current = []; $approx = 2; // {}\n        foreach ($map as $k => $v) {\n            $entry = [$k => $v];\n            $ej = json_encode($entry, JSON_UNESCAPED_SLASHES|JSON_UNESCAPED_UNICODE);\n            $sz = strlen($ej) + 1;\n            if ($approx + $sz > $targetBytes && !empty($current)) {\n                $chunks[] = $current; $current = []; $approx = 2;\n            }\n            $current[$k] = $v; $approx += $sz;\n        }\n        if (!empty($current)) $chunks[] = $current;\n        return $chunks;\n    }\n\n    // ─────────────────────────────────────────────────────────\n    // GITHUB PUSH (single file)\n    // ─────────────────────────────────────────────────────────\n    private static function push_to_github(array $bundle, string $target, string $msg) {\n        if (empty($bundle)) return new \\WP_Error('wtp_empty','Empty bundle');\n        $payload = json_encode($bundle, JSON_UNESCAPED_SLASHES|JSON_UNESCAPED_UNICODE|JSON_PRETTY_PRINT|JSON_INVALID_UTF8_SUBSTITUTE);\n        if ($payload === false) return new \\WP_Error('wtp_json','json_encode failed');\n\n        $owner  = constant('WTP_GH_OWNER');\n        $repo   = constant('WTP_GH_REPO');\n        $branch = defined('WTP_GH_BRANCH') ? constant('WTP_GH_BRANCH') : 'main';\n        $token  = constant('WTP_GH_TOKEN');\n\n        $api  = \"https://api.github.com/repos/{$owner}/{$repo}/contents/{$target}\";\n        $sha  = null;\n        $get  = self::http('GET', $api.'?ref='.rawurlencode($branch), $token, null, 25);\n        if ($get['code'] === 200 && !empty($get['body']['sha'])) $sha = $get['body']['sha'];\n\n        $body = ['message'=>$msg,'content'=>base64_encode($payload),'branch'=>$branch];\n        if ($sha) $body['sha'] = $sha;\n\n        $put = self::http('PUT', $api, $token, $body, 30);\n        if ($put['code'] >= 300) {\n            return new \\WP_Error('wtp_github_put', 'GitHub PUT error '.$put['code'].': '.json_encode($put['body']));\n        }\n\n        $raw = \"https://raw.githubusercontent.com/{$owner}/{$repo}/{$branch}/{$target}\";\n        return ['raw_url'=>$raw,'commit'=>$put['body']['commit']['sha'] ?? null];\n    }\n\n    // ─────────────────────────────────────────────────────────\n    // GITHUB PUSH (chunks + index)\n    // ─────────────────────────────────────────────────────────\n    private static function push_chunks_and_index(array $chunks) {\n        $owner  = constant('WTP_GH_OWNER');\n        $repo   = constant('WTP_GH_REPO');\n        $branch = defined('WTP_GH_BRANCH') ? constant('WTP_GH_BRANCH') : 'main';\n        $token  = constant('WTP_GH_TOKEN');\n\n        $pushed = [];\n        foreach ($chunks as $i => $map) {\n            $payload = json_encode($map, JSON_UNESCAPED_SLASHES|JSON_UNESCAPED_UNICODE|JSON_PRETTY_PRINT|JSON_INVALID_UTF8_SUBSTITUTE);\n            $path    = sprintf('%s_%03d.json', self::$chunkBase, $i);\n            $res     = self::gh_put_file($owner,$repo,$branch,$token,$path,$payload,'Update '.$path.' (chunk)');\n            if ($res['code'] >= 300) {\n                return new \\WP_Error('wtp_github_put', 'GitHub PUT error '.$res['code'].': '.json_encode($res['body']));\n            }\n            $pushed[] = [\n                'path' => $path,\n                'size' => strlen($payload),\n                'sha1' => sha1($payload),\n                'raw'  => \"https://raw.githubusercontent.com/{$owner}/{$repo}/{$branch}/{$path}\",\n            ];\n        }\n\n        $index = [\n            'version'       => 1,\n            'generated_at'  => time(),\n            'total_chunks'  => count($pushed),\n            'chunks'        => $pushed,\n        ];\n        $idxPayload = json_encode($index, JSON_UNESCAPED_SLASHES|JSON_UNESCAPED_UNICODE|JSON_PRETTY_PRINT);\n        $idxRes     = self::gh_put_file($owner,$repo,$branch,$token,self::$pluginsIndex,$idxPayload,'Update '.self::$pluginsIndex.' (index)');\n        if ($idxRes['code'] >= 300) {\n            return new \\WP_Error('wtp_github_put', 'GitHub PUT index error '.$idxRes['code'].': '.json_encode($idxRes['body']));\n        }\n\n        return [\n            'index_raw_url' => \"https://raw.githubusercontent.com/{$owner}/{$repo}/{$branch}/\".self::$pluginsIndex,\n            'chunks'        => $pushed,\n        ];\n    }\n\n    private static function gh_put_file($owner,$repo,$branch,$token,$path,$content,$message) {\n        $api = \"https://api.github.com/repos/{$owner}/{$repo}/contents/{$path}\";\n        $sha = null;\n        $get = self::http('GET', $api.'?ref='.rawurlencode($branch), $token, null, 25);\n        if ($get['code'] === 200 && !empty($get['body']['sha'])) $sha = $get['body']['sha'];\n\n        $body = ['message'=>$message,'content'=>base64_encode($content),'branch'=>$branch];\n        if ($sha) $body['sha'] = $sha;\n        return self::http('PUT', $api, $token, $body, 30);\n    }\n\n    // ─────────────────────────────────────────────────────────\n    // HTTP helper (WP)\n    // ─────────────────────────────────────────────────────────\n    private static function http(string $method, string $url, ?string $token, $json, int $timeout = 20) : array {\n        $args = [\n            'method'  => $method,\n            'headers' => [\n                'User-Agent' => 'WTP-Dev-Bridge',\n                'Accept'     => 'application/json',\n            ],\n            'timeout' => $timeout,\n        ];\n        if ($token) $args['headers']['Authorization'] = 'token '.$token;\n        if ($json !== null) {\n            $args['headers']['Content-Type'] = 'application/json';\n            $args['body'] = is_string($json) ? $json : json_encode($json);\n        }\n        $res  = wp_remote_request($url, $args);\n        $code = wp_remote_retrieve_response_code($res);\n        $body = wp_remote_retrieve_body($res);\n\n        // spróbuj JSON; jeśli nie wychodzi – zwróć raw\n        $decoded = json_decode($body, true);\n        return [\n            'code'     => $code,\n            'body'     => is_array($decoded) ? $decoded : null,\n            'body_raw' => is_array($decoded) ? $decoded : null,\n            'text'     => is_array($decoded) ? null : $body,\n        ];\n    }\n\n    // ─────────────────────────────────────────────────────────\n    // Response helpers\n    // ─────────────────────────────────────────────────────────\n    private static function err(int $code, string $msg) {\n        return new \\WP_REST_Response(['ok'=>false,'error'=>$msg], $code);\n    }\n    private static function answer($res) {\n        if (is_wp_error($res)) return self::err(500, $res->get_error_message());\n        return new \\WP_REST_Response(['ok'=>true]+$res, 200);\n    }\n    private static function res_map($res) : array {\n        return is_wp_error($res) ? ['ok'=>false,'error'=>$res->get_error_message()] : ['ok'=>true]+$res;\n    }\n}\n\nWTP_Dev_Bridge::boot();\n\nendif; // class exists",
    "mu-plugins/wtp-translate.php": "<?php\n/**\n * Plugin Name: WTP Translate (mu-plugin)\n * Description: Tłumaczenia treści per język (mock + hak na AI), batch + panel Tools. Szanuje „SEO always”.\n * Version: 1.0.0\n */\nif (!defined('ABSPATH')) exit;\n\n/** Domyślne języki jeśli motyw nie poda */\nif (!isset($WTP_LANGS) || !is_array($WTP_LANGS) || !$WTP_LANGS) {\n  $WTP_LANGS = [\n    'en'=>['flag'=>'🇬🇧','name'=>'English'],\n    'pl'=>['flag'=>'🇵🇱','name'=>'Polski'],\n    'de'=>['flag'=>'🇩🇪','name'=>'Deutsch'],\n    'fr'=>['flag'=>'🇫🇷','name'=>'Français'],\n    'it'=>['flag'=>'🇮🇹','name'=>'Italiano'],\n    'es'=>['flag'=>'🇪🇸','name'=>'Español'],\n    'pt'=>['flag'=>'🇵🇹','name'=>'Português'],\n    'cs'=>['flag'=>'🇨🇿','name'=>'Čeština'],\n    'sk'=>['flag'=>'🇸🇰','name'=>'Slovenčina'],\n  ];\n}\n\n/** Ustawienia jakości per język (0=off, 1=fast, 2=mid, 3=full) */\nfunction wtp_tr_defaults(){\n  $langs = array_keys($GLOBALS['WTP_LANGS']);\n  $levels = [];\n  foreach($langs as $l){ $levels[$l] = ($l==='en')?3:1; } // EN full, reszta fast\n  return ['levels'=>$levels];\n}\nfunction wtp_tr_getopt(){\n  $o = get_option('wtp_tr_options');\n  if (!is_array($o)) $o=[];\n  return array_replace_recursive(wtp_tr_defaults(), $o);\n}\nadd_action('admin_menu', function(){\n  add_submenu_page('tools.php','WTP Translate','WTP Translate','manage_options','wtp-translate','wtp_tr_tools_page');\n});\nadd_action('admin_init', function(){\n  register_setting('wtp_tr_group','wtp_tr_options',[\n    'type'=>'array','sanitize_callback'=>'wtp_tr_sanitize','default'=>wtp_tr_defaults()\n  ]);\n});\nfunction wtp_tr_sanitize($in){\n  $d = wtp_tr_defaults(); $out = is_array($in)?$in:[];\n  $levels = $out['levels'] ?? [];\n  $out['levels']=[];\n  foreach(array_keys($GLOBALS['WTP_LANGS']) as $l){\n    $v = isset($levels[$l])? intval($levels[$l]) : $d['levels'][$l];\n    $out['levels'][$l] = max(0,min(3,$v));\n  }\n  return $out;\n}\nfunction wtp_tr_tools_page(){\n  if (!current_user_can('manage_options')) return;\n  $o = wtp_tr_getopt();\n  ?>\n  <div class=\"wrap\">\n    <h1>WTP Translate</h1>\n    <form method=\"post\" action=\"options.php\">\n      <?php settings_fields('wtp_tr_group'); ?>\n      <h2>Jakość tłumaczeń per język</h2>\n      <table class=\"form-table\">\n        <tr><th>Język</th><th>Poziom</th></tr>\n        <?php foreach($GLOBALS['WTP_LANGS'] as $code=>$meta): ?>\n          <tr>\n            <th><?php echo esc_html($meta['flag'].' '.$meta['name'].' ('.$code.')'); ?></th>\n            <td>\n              <select name=\"wtp_tr_options[levels][<?php echo esc_attr($code);?>]\">\n                <?php\n                $opts = [0=>'OFF',1=>'FAST',2=>'MID',3=>'FULL'];\n                foreach($opts as $k=>$lbl){\n                  printf('<option value=\"%d\"%s>%s</option>',$k, selected($o['levels'][$code]??1,$k,false), esc_html($lbl));\n                }\n                ?>\n              </select>\n            </td>\n          </tr>\n        <?php endforeach; ?>\n      </table>\n      <?php submit_button(); ?>\n    </form>\n\n    <hr>\n    <h2>Batch tłumaczeń</h2>\n    <p>Wypełnia brakujące tłumaczenia (mock jeżeli brak AI). Możesz puścić po postach lub kategoriach.</p>\n    <p>\n      <a class=\"button button-primary\" href=\"<?php echo esc_url(admin_url('admin-post.php?action=wtp_tr_batch&scope=posts')); ?>\">Posty</a>\n      <a class=\"button\" href=\"<?php echo esc_url(admin_url('admin-post.php?action=wtp_tr_batch&scope=terms')); ?>\">Kategorie</a>\n    </p>\n    <p>Albo URL-em (z telefonu): <code><?php echo esc_html(site_url('/wp-json/wtp-ro/v1/tr/batch?secret=')); ?><strong>TWÓJ_SEKRET</strong>&amp;scope=posts|terms</code></p>\n  </div>\n  <?php\n}\n\n/** Batch – przyciski + REST */\nadd_action('admin_post_wtp_tr_batch', function(){\n  if (!current_user_can('manage_options')) wp_die('forbidden');\n  $scope = sanitize_text_field($_GET['scope'] ?? 'posts');\n  $done = wtp_tr_run_batch($scope);\n  wp_safe_redirect(add_query_arg(['page'=>'wtp-translate','done'=>$done], admin_url('tools.php')));\n  exit;\n});\nadd_action('rest_api_init', function(){\n  register_rest_route('wtp-ro/v1','/tr/batch',[\n    'methods'=>'GET','permission_callback'=>'__return_true',\n    'callback'=>function(WP_REST_Request $req){\n        $secret = $req->get_param('secret');\n        if (!$secret || ($secret !== (defined('WTP_GH_SECRET')? constant('WTP_GH_SECRET') : ''))) {\n          return new WP_REST_Response(['ok'=>false,'error'=>'forbidden'],403);\n        }\n        $scope = $req->get_param('scope') ?: 'posts';\n        $done = wtp_tr_run_batch($scope);\n        return new WP_REST_Response(['ok'=>true,'done'=>$done],200);\n    }\n  ]);\n});\n\n/** Rdzeń: wypełnij brakujące tłumaczenia (mock albo przez filtr AI) */\nfunction wtp_tr_run_batch($scope='posts'){\n  $langs = array_keys($GLOBALS['WTP_LANGS']); $count=0;\n\n  if ($scope==='posts') {\n    $q = new WP_Query(['post_type'=>'post','post_status'=>'publish','posts_per_page'=>300,'no_found_rows'=>true]);\n    foreach($q->posts as $p){\n      $src = [\n        'title'=>get_the_title($p),\n        'excerpt'=>wp_strip_all_tags(wp_trim_words(get_post_field('post_content',$p),60,'')),\n      ];\n      foreach($langs as $l){\n        // pola docelowe (to przykładowe klucze – możesz zmienić wg potrzeb)\n        $have = get_post_meta($p->ID, \"_wtp_tr_excerpt_{$l}\", true);\n        if ($have===''){\n          $text = apply_filters('wtp_translate_generate', null, $src, $l, $p->ID);\n          if (!is_string($text) || $text===''){\n            // mock fallback\n            $text = '['.$l.'] '.$src['excerpt'];\n          }\n          update_post_meta($p->ID, \"_wtp_tr_excerpt_{$l}\", $text);\n          $count++;\n        }\n      }\n    }\n  } else {\n    $terms = get_terms(['taxonomy'=>'category','hide_empty'=>false]);\n    foreach($terms as $t){\n      $src = ['name'=>$t->name,'desc'=>$t->description ?: $t->name];\n      foreach($langs as $l){\n        $have = get_term_meta($t->term_id, \"_wtp_tr_desc_{$l}\", true);\n        if ($have===''){\n          $text = apply_filters('wtp_translate_generate', null, $src, $l, $t->term_id);\n          if (!is_string($text) || $text===''){\n            $text = '['.$l.'] '.$src['desc'];\n          }\n          update_term_meta($t->term_id, \"_wtp_tr_desc_{$l}\", $text);\n          $count++;\n        }\n      }\n    }\n  }\n  return $count;\n}\n\n/**\n * Przykład integracji z AI (DOCS):\n *\n * add_filter('wtp_translate_generate', function($out, $src, $lang, $object_id){\n *   // Tu wywołaj swój serwis AI i zwróć string\n *   return my_ai_call($src['excerpt'] ?? $src['desc'], $lang);\n * }, 10, 4);\n */",
    "mu-plugins/wtp-tax-i18n-seo.php": "<?php\n/**\n * Plugin Name: WTP Taxonomy i18n + SEO (mu-plugin)\n * Description: Tłumaczenia i SEO (title/desc) dla kategorii/podkategorii (taksonomie). UI w edycji terminu + kolejka + REST.\n * Version: 1.0.0\n */\nif (!defined('ABSPATH')) exit;\n\n/** Wspólne z translate/seo */\nif (!defined('WTP_ALLOWED_LANGS')) define('WTP_ALLOWED_LANGS','en,pl,de,fr,it,es,pt,cs,sk');\nif (!defined('WTP_TAX_OPT')) define('WTP_TAX_OPT','wtp_tax_settings');\nif (!defined('WTP_TR_OPTION')) define('WTP_TR_OPTION','wtp_translate_settings'); // użyjemy quality + seo_always z WTP Translate\n\n// Kolejka terminów\nconst WTP_TAX_QUEUE = 'wtp_tax_queue_items'; // tablica stringów \"tax:term_id\"\n\n// Meta klucze (term meta)\nfunction wtp_tax_key_name($lang){ return \"_wtp_tr_name_{$lang}\"; }\nfunction wtp_tax_key_desc($lang){ return \"_wtp_tr_desc_{$lang}\"; }\nfunction wtp_tax_key_seo_t($lang){ return \"_wtp_seo_title_{$lang}\"; }\nfunction wtp_tax_key_seo_d($lang){ return \"_wtp_seo_desc_{$lang}\"; }\n\n// Języki\nfunction wtp_tax_langs(){ $codes=array_filter(array_map('trim',explode(',',WTP_ALLOWED_LANGS))); return $codes?:['en']; }\nfunction wtp_tax_current_lang(){\n    if (isset($_GET['lang'])) { $x=strtolower(sanitize_text_field($_GET['lang'])); if (in_array($x, wtp_tax_langs(), true)) return $x; }\n    if (isset($_COOKIE['wtp_lang'])) { $x=strtolower(sanitize_text_field($_COOKIE['wtp_lang'])); if (in_array($x, wtp_tax_langs(), true)) return $x; }\n    return 'en';\n}\n\n// Pobranie ustawień jakości/sealw z WTP Translate (fallback domyślne)\nfunction wtp_tax_get_tr_settings(){\n    $def_quality = ['en'=>'off','pl'=>'full','de'=>'mid','fr'=>'mid','it'=>'rough','es'=>'rough','pt'=>'rough','cs'=>'rough','sk'=>'rough'];\n    $tr = get_option(WTP_TR_OPTION, []);\n    $quality = isset($tr['quality']) && is_array($tr['quality']) ? array_merge($def_quality,$tr['quality']) : $def_quality;\n    $seo_always = isset($tr['seo_always']) ? (int)$tr['seo_always'] : 1;\n    $model = isset($tr['model']) ? sanitize_text_field($tr['model']) : 'gpt-4o-mini';\n    $max_batch = isset($tr['max_batch']) ? max(1,(int)$tr['max_batch']) : 5;\n    return compact('quality','seo_always','model','max_batch');\n}\n\n/* ────────────────────────────────────────────────────────────────────────────\n * UI w edycji terminu (kategorie/podkategorie)\n * ──────────────────────────────────────────────────────────────────────────── */\nadd_action('edit_term_form_fields', function($term){\n    if (!current_user_can('manage_categories')) return;\n    $langs = wtp_tax_langs();\n    $active = wtp_tax_current_lang();\n    echo '<tr class=\"form-field\"><th colspan=\"2\"><h3>WTP: Tłumaczenia i SEO (per język)</h3></th></tr>';\n    echo '<tr class=\"form-field\"><th scope=\"row\">Aktywny język</th><td><strong>'.esc_html(strtoupper($active)).'</strong> (możesz przełączyć ?lang=xx w URL)</td></tr>';\n\n    // Pola tylko dla aktywnego języka, żeby nie przeładowywać UI\n    $t = get_term_meta($term->term_id, wtp_tax_key_name($active), true);\n    $d = get_term_meta($term->term_id, wtp_tax_key_desc($active), true);\n    $st= get_term_meta($term->term_id, wtp_tax_key_seo_t($active), true);\n    $sd= get_term_meta($term->term_id, wtp_tax_key_seo_d($active), true);\n\n    echo '<tr class=\"form-field\"><th scope=\"row\"><label>Nazwa ('.$active.')</label></th><td><input type=\"text\" name=\"wtp_tax_name\" value=\"'.esc_attr($t).'\" style=\"width:100%\"></td></tr>';\n    echo '<tr class=\"form-field\"><th scope=\"row\"><label>Opis ('.$active.')</label></th><td><textarea name=\"wtp_tax_desc\" rows=\"3\" style=\"width:100%\">'.esc_textarea($d).'</textarea></td></tr>';\n    echo '<tr class=\"form-field\"><th scope=\"row\"><label>SEO Title ('.$active.')</label></th><td><input type=\"text\" name=\"wtp_tax_seo_t\" value=\"'.esc_attr($st).'\" style=\"width:100%\"></td></tr>';\n    echo '<tr class=\"form-field\"><th scope=\"row\"><label>SEO Description ('.$active.')</label></th><td><textarea name=\"wtp_tax_seo_d\" rows=\"2\" style=\"width:100%\">'.esc_textarea($sd).'</textarea></td></tr>';\n    wp_nonce_field('wtp_tax_save','wtp_tax_nonce');\n}, 10, 1);\n\nadd_action('edited_term', function($term_id){\n    if (!isset($_POST['wtp_tax_nonce']) || !wp_verify_nonce($_POST['wtp_tax_nonce'],'wtp_tax_save')) return;\n    $lang = wtp_tax_current_lang();\n    $name = isset($_POST['wtp_tax_name']) ? wp_strip_all_tags(wp_unslash($_POST['wtp_tax_name'])) : '';\n    $desc = isset($_POST['wtp_tax_desc']) ? wp_strip_all_tags(wp_unslash($_POST['wtp_tax_desc'])) : '';\n    $st   = isset($_POST['wtp_tax_seo_t']) ? wp_strip_all_tags(wp_unslash($_POST['wtp_tax_seo_t'])) : '';\n    $sd   = isset($_POST['wtp_tax_seo_d']) ? wp_strip_all_tags(wp_unslash($_POST['wtp_tax_seo_d'])) : '';\n\n    update_term_meta($term_id, wtp_tax_key_name($lang), $name);\n    update_term_meta($term_id, wtp_tax_key_desc($lang), $desc);\n    update_term_meta($term_id, wtp_tax_key_seo_t($lang), $st);\n    update_term_meta($term_id, wtp_tax_key_seo_d($lang), $sd);\n\n    // wpisz do kolejki automatycznie\n    if (!empty($_POST['taxonomy'])) {\n        wtp_tax_enqueue((string)sanitize_key($_POST['taxonomy']), (int)$term_id);\n    }\n}, 10, 1);\n\n/* ────────────────────────────────────────────────────────────────────────────\n * Kolejka: enqueue przy tworzeniu/edycji + cron\n * ──────────────────────────────────────────────────────────────────────────── */\nfunction wtp_tax_enqueue(string $tax, int $term_id){\n    $key = $tax.':'.$term_id;\n    $q = get_option(WTP_TAX_QUEUE,[]);\n    if (!is_array($q)) $q=[];\n    if (!in_array($key,$q,true)) { $q[]=$key; update_option(WTP_TAX_QUEUE,$q,false); }\n}\nadd_action('created_term', function($term_id,$tt_id,$taxonomy){ wtp_tax_enqueue((string)$taxonomy,(int)$term_id); }, 10, 3);\nadd_action('edited_term',  function($term_id,$tt_id,$taxonomy){ wtp_tax_enqueue((string)$taxonomy,(int)$term_id); }, 10, 3);\n\n// Cron co 10 min\nadd_filter('cron_schedules', function($s){ if(!isset($s['wtp_10min'])) $s['wtp_10min']=['interval'=>600,'display'=>'WTP every 10 min']; return $s; });\nadd_action('wtp_tax_cron','wtp_tax_process_batch');\nif (!wp_next_scheduled('wtp_tax_cron')) wp_schedule_event(time()+420, 'wtp_10min', 'wtp_tax_cron');\n\n/* ────────────────────────────────────────────────────────────────────────────\n * Przetwarzanie batch\n * ──────────────────────────────────────────────────────────────────────────── */\nfunction wtp_tax_process_batch(){\n    $cfg = wtp_tax_get_tr_settings();\n    $q = get_option(WTP_TAX_QUEUE,[]);\n    if (empty($q)) return;\n    $batch = array_splice($q,0,$cfg['max_batch']);\n    update_option(WTP_TAX_QUEUE,$q,false);\n\n    foreach ($batch as $item){\n        if (strpos($item,':')===false) continue;\n        [$tax,$id] = explode(':',$item,2);\n        $term = get_term((int)$id,(string)$tax);\n        if (!$term || is_wp_error($term)) continue;\n        wtp_tax_process_term_all_langs($term,$cfg);\n    }\n}\n\nfunction wtp_tax_process_term_all_langs(WP_Term $term, array $cfg){\n    $langs = wtp_tax_langs();\n    foreach ($langs as $lang){\n        // pomijamy EN treść — ale SEO zawsze, jeśli włączone\n        $want_content = ($lang!=='en' && (($cfg['quality'][$lang]??'off')!=='off'));\n        $want_seo = (int)$cfg['seo_always']===1;\n        if ($want_content){\n            [$nm,$ds] = wtp_tax_ai_translate($term->name, term_description($term) ?: '', $lang, $cfg['quality'][$lang]);\n            update_term_meta($term->term_id, wtp_tax_key_name($lang), $nm);\n            update_term_meta($term->term_id, wtp_tax_key_desc($lang), $ds);\n        }\n        if ($want_seo){\n            [$st,$sd] = wtp_tax_ai_make_seo($term->name, term_description($term) ?: '', $lang);\n            update_term_meta($term->term_id, wtp_tax_key_seo_t($lang), $st);\n            update_term_meta($term->term_id, wtp_tax_key_seo_d($lang), $sd);\n        }\n    }\n}\n\n/* ────────────────────────────────────────────────────────────────────────────\n * „AI” — real/symulacja (spójnie z WTP Translate)\n * ──────────────────────────────────────────────────────────────────────────── */\nfunction wtp_tax_ai_translate($name,$desc,$lang,$quality){\n    if (!defined('WTP_OPENAI_KEY') || !WTP_OPENAI_KEY) {\n        return [\"[{$lang}/{$quality}] \".$name, \"[{$lang}/{$quality}] \".mb_substr(wp_strip_all_tags($desc),0,400)];\n    }\n    $prompt = \"Translate taxonomy term (category) to {$lang} with quality {$quality}. Return:\\nName:\\n<one line>\\nDescription:\\n<short paragraph>\";\n    $resp = wp_remote_post('https://api.openai.com/v1/chat/completions',[\n        'timeout'=>30,'headers'=>['Authorization'=>'Bearer '.WTP_OPENAI_KEY,'Content-Type'=>'application/json'],\n        'body'=>json_encode([\n            'model'=>'gpt-4o-mini',\n            'messages'=>[\n                ['role'=>'system','content'=>'You translate taxonomy labels.'],\n                ['role'=>'user','content'=>\"SOURCE NAME:\\n{$name}\\n\\nSOURCE DESCRIPTION:\\n{$desc}\\n\\n\".$prompt],\n            ],\n            'temperature'=>($quality==='full'?0.4:($quality==='mid'?0.5:0.7)),\n        ])\n    ]);\n    if (is_wp_error($resp)) return [$name,$desc];\n    $txt = json_decode(wp_remote_retrieve_body($resp),true)['choices'][0]['message']['content'] ?? '';\n    if (!$txt) return [$name,$desc];\n    $lines = preg_split(\"/\\r?\\n/\",$txt);\n    $nm = trim($lines[0] ?? $name);\n    $ds = trim($txt);\n    return [$nm,$ds];\n}\nfunction wtp_tax_ai_make_seo($name,$desc,$lang){\n    if (!defined('WTP_OPENAI_KEY') || !WTP_OPENAI_KEY) {\n        return [\"[SEO {$lang}] \".mb_substr($name,0,58), \"[SEO {$lang}] \".mb_substr(wp_strip_all_tags($desc),0,155)];\n    }\n    $prompt = \"Make SEO for taxonomy archive in {$lang}. Title <=60 chars, Description 140-160. Return as:\\nTitle: ...\\nDescription: ...\";\n    $resp = wp_remote_post('https://api.openai.com/v1/chat/completions',[\n        'timeout'=>30,'headers'=>['Authorization'=>'Bearer '.WTP_OPENAI_KEY,'Content-Type'=>'application/json'],\n        'body'=>json_encode([\n            'model'=>'gpt-4o-mini',\n            'messages'=>[\n                ['role'=>'system','content'=>'You are an SEO assistant.'],\n                ['role'=>'user','content'=>\"NAME:\\n{$name}\\n\\nDESCRIPTION:\\n\".mb_substr(wp_strip_all_tags($desc),0,1000).\"\\n\\n\".$prompt],\n            ],\n            'temperature'=>0.4,\n        ])\n    ]);\n    if (is_wp_error($resp)) return [\"[SEO {$lang}] \".mb_substr($name,0,58), \"[SEO {$lang}] \".mb_substr(wp_strip_all_tags($desc),0,155)];\n    $txt = json_decode(wp_remote_retrieve_body($resp),true)['choices'][0]['message']['content'] ?? '';\n    if (!$txt) return [\"[SEO {$lang}] \".mb_substr($name,0,58), \"[SEO {$lang}] \".mb_substr(wp_strip_all_tags($desc),0,155)];\n    $seoT=$seoD='';\n    foreach (preg_split(\"/\\r?\\n/\",$txt) as $ln){\n        if (!$seoT && stripos($ln,'title:')===0) $seoT=trim(substr($ln,6));\n        if (!$seoD && stripos($ln,'description:')===0) $seoD=trim(substr($ln,12));\n    }\n    $seoT = $seoT ?: mb_substr($name,0,60);\n    $seoD = $seoD ?: mb_substr(wp_strip_all_tags($desc),0,155);\n    return [$seoT,$seoD];\n}\n\n/* ────────────────────────────────────────────────────────────────────────────\n * Wystaw SEO meta/schema na stronach archiwów taksonomii\n * ──────────────────────────────────────────────────────────────────────────── */\nadd_action('wp_head', function(){\n    if (!is_category() && !is_tag() && !is_tax()) return;\n    $term = get_queried_object();\n    if (!$term || !($term instanceof WP_Term)) return;\n    $lang = wtp_tax_current_lang();\n\n    $st = get_term_meta($term->term_id, wtp_tax_key_seo_t($lang), true);\n    $sd = get_term_meta($term->term_id, wtp_tax_key_seo_d($lang), true);\n    $nm = get_term_meta($term->term_id, wtp_tax_key_name($lang), true) ?: $term->name;\n\n    if (!$st) $st = $nm;\n    if (!$sd) $sd = wp_strip_all_tags( term_description($term) ?: '' );\n    echo '<meta name=\"description\" content=\"'.esc_attr($sd).'\">'.\"\\n\";\n\n    $data = [\n        '@context'=>'https://schema.org',\n        '@type'=>'CollectionPage',\n        'name'=>$st,\n        'inLanguage'=>$lang,\n        'description'=>$sd,\n        'url'=>get_term_link($term),\n    ];\n    echo '<script type=\"application/ld+json\">'.wp_json_encode($data).'</script>'.\"\\n\";\n}, 98);\n\n/* ────────────────────────────────────────────────────────────────────────────\n * REST: status/run/one\n * ──────────────────────────────────────────────────────────────────────────── */\nadd_action('rest_api_init', function(){\n    // status\n    register_rest_route('wtp-ro/v1','/translate/terms/status',[\n        'methods'=>'GET','permission_callback'=>'__return_true',\n        'callback'=>function(){ $q=get_option(WTP_TAX_QUEUE,[]); return ['ok'=>true,'queued'=>is_array($q)?count($q):0];}\n    ]);\n    // batch run\n    register_rest_route('wtp-ro/v1','/translate/terms/run',[\n        'methods'=>'GET','permission_callback'=>'__return_true',\n        'callback'=>function(WP_REST_Request $r){\n            $secret = $r->get_param('key');\n            if (!defined('WTP_GH_SECRET') || $secret!==constant('WTP_GH_SECRET')) return new WP_REST_Response(['ok'=>false,'error'=>'forbidden'],403);\n            wtp_tax_process_batch();\n            return ['ok'=>true];\n        }\n    ]);\n    // single term\n    register_rest_route('wtp-ro/v1','/translate/term',[\n        'methods'=>'GET','permission_callback'=>'__return_true',\n        'callback'=>function(WP_REST_Request $r){\n            $secret = $r->get_param('key');\n            if (!defined('WTP_GH_SECRET') || $secret!==constant('WTP_GH_SECRET')) return new WP_REST_Response(['ok'=>false,'error'=>'forbidden'],403);\n            $tax = sanitize_key($r->get_param('tax') ?: 'category');\n            $id  = (int)$r->get_param('term');\n            $lang= strtolower(sanitize_text_field($r->get_param('lang') ?: 'pl'));\n            $term = get_term($id,$tax);\n            if (!$term || is_wp_error($term)) return new WP_REST_Response(['ok'=>false,'error'=>'no-term'],404);\n            if (!in_array($lang, wtp_tax_langs(), true)) return new WP_REST_Response(['ok'=>false,'error'=>'bad-lang'],400);\n\n            $cfg = wtp_tax_get_tr_settings();\n            $q = $cfg['quality'][$lang] ?? 'rough';\n\n            // treść (jeśli nie en) + SEO always\n            if ($lang!=='en' && $q!=='off'){\n                [$nm,$ds] = wtp_tax_ai_translate($term->name, term_description($term) ?: '', $lang, $q);\n                update_term_meta($term->term_id, wtp_tax_key_name($lang), $nm);\n                update_term_meta($term->term_id, wtp_tax_key_desc($lang), $ds);\n            }\n            if ((int)$cfg['seo_always']===1){\n                [$st,$sd] = wtp_tax_ai_make_seo($term->name, term_description($term) ?: '', $lang);\n                update_term_meta($term->term_id, wtp_tax_key_seo_t($lang), $st);\n                update_term_meta($term->term_id, wtp_tax_key_seo_d($lang), $sd);\n            }\n            return ['ok'=>true,'term'=>$id,'tax'=>$tax,'lang'=>$lang];\n        }\n    ]);\n});",
    "mu-plugins/wtp-exporter-chunked.php": "<?php\n/**\n * Plugin Name: WTP Exporter Chunked — GitHub (plugins only)\n * Description: Eksportuje WSZYSTKIE wtyczki (plugins + mu-plugins) do wielu plików JSON < 5 MB + generuje indeks. Push do GitHub.\n * Version: 1.1.0\n */\nif (!defined('ABSPATH')) exit;\n\n/* Twardsze limity na czas eksportu (unikamy fatal/timeout przy dużych instalacjach) */\n@ini_set('memory_limit', '512M');\n@set_time_limit(120);\n\n/*\n * WYMAGANE w wp-config.php:\n * define('WTP_GH_OWNER',  'BoskiDionysos');\n * define('WTP_GH_REPO',   'weektoppick-wp-modules');\n * define('WTP_GH_BRANCH', 'main');            // opcjonalnie (domyślnie 'main')\n * define('WTP_GH_TOKEN',  'ghp_xxx');         // PAT z repo:contents write\n * define('WTP_GH_SECRET', 'twoj_sekret');     // do REST (param <secret>)\n */\n\n$need = ['WTP_GH_OWNER','WTP_GH_REPO','WTP_GH_TOKEN','WTP_GH_SECRET'];\nforeach ($need as $c) { if (!defined($c)) { error_log(\"[WTP ExporterChunked] Missing constant $c\"); return; } }\n\n/** ───────────────────────────────────────────────────────────────────────────\n *  KONFIG\n *  ─────────────────────────────────────────────────────────────────────────── */\nconst WTP_ALLOWED_EXT        = ['php','css','js','json','svg','txt','md','html','po','mo'];\nconst WTP_EXCLUDE_RX         = '#(?:^|/)(node_modules|vendor|\\.git|\\.svn|\\.github|tests?|bin|dist|cache)(/|$)#i';\nconst WTP_EXCLUDE_FILE_RX    = '#\\.(map|lock|min\\.map|ico|woff2?|ttf|eot)$#i';\nconst WTP_CHUNK_TARGET_BYTES = 5_000_000; // ~5 MB\nconst WTP_INDEX_PATH         = 'plugins-index.json';     // w repo (root)\nconst WTP_CHUNK_BASENAME     = 'plugins-bundle';         // prefix nazw chunków\n\nadd_action('rest_api_init', function () {\n\n    // /wp-json/wtp-ro/v1/publish/plugins-chunked/<secret>\n    register_rest_route('wtp-ro/v1', '/publish/plugins-chunked/(?P<secret>[^/]+)', [\n        'methods'  => 'GET',\n        'permission_callback' => '__return_true',\n        'callback' => function (WP_REST_Request $req) {\n            if ($req->get_param('secret') !== constant('WTP_GH_SECRET')) {\n                return new WP_REST_Response(['ok'=>false,'error'=>'forbidden'], 403);\n            }\n\n            $t0 = microtime(true);\n            $bundle = wtp_collect_plugins_fs_map();                  // mapa \"plugins/... => content\"\n            if (!$bundle) return new WP_REST_Response(['ok'=>false,'error'=>'empty-plugins'], 500);\n\n            $chunks = wtp_chunk_map($bundle, WTP_CHUNK_TARGET_BYTES); // [ [k=>v,...], ... ]\n            if (empty($chunks)) return new WP_REST_Response(['ok'=>false,'error'=>'chunking-failed'], 500);\n\n            // push wszystkich chunków + indeksu do GitHub\n            $push = wtp_push_chunks_and_index_to_github($chunks);\n            if (is_wp_error($push)) {\n                return new WP_REST_Response(['ok'=>false,'error'=>$push->get_error_message()], 500);\n            }\n\n            $push['t_sec'] = round(microtime(true) - $t0, 3);\n            $push['mem_mb'] = round(memory_get_usage(true)/1048576, 1);\n            return new WP_REST_Response(['ok'=>true] + $push, 200);\n        }\n    ]);\n\n    // /wp-json/wtp-ro/v1/publish/plugins-chunked-debug/<secret>  (BEZ pushu – diagnostyka)\n    register_rest_route('wtp-ro/v1', '/publish/plugins-chunked-debug/(?P<secret>[^/]+)', [\n        'methods'  => 'GET',\n        'permission_callback' => '__return_true',\n        'callback' => function (WP_REST_Request $req) {\n            if ($req->get_param('secret') !== constant('WTP_GH_SECRET')) {\n                return new WP_REST_Response(['ok'=>false,'error'=>'forbidden'], 403);\n            }\n            $t0 = microtime(true);\n            $bundle = wtp_collect_plugins_fs_map();\n            if (!$bundle) return new WP_REST_Response(['ok'=>false,'error'=>'empty-plugins'], 500);\n\n            $chunks = wtp_chunk_map($bundle, WTP_CHUNK_TARGET_BYTES);\n            $t1 = microtime(true);\n\n            return new WP_REST_Response([\n                'ok'           => true,\n                'files_total'  => count($bundle),\n                'chunks_total' => count($chunks),\n                'mem_mb'       => round(memory_get_usage(true)/1048576, 1),\n                'time_sec'     => round($t1 - $t0, 3),\n                'chunk_sizes'  => array_map(function($m){\n                    $s = json_encode($m, JSON_UNESCAPED_SLASHES|JSON_UNESCAPED_UNICODE|JSON_INVALID_UTF8_SUBSTITUTE);\n                    return strlen($s);\n                }, $chunks),\n                'sample'       => array_slice(array_keys($bundle), 0, 10),\n            ], 200);\n        }\n    ]);\n});\n\n/** ───────────────────────────────────────────────────────────────────────────\n *  ZBIERANIE: wszystkie wtyczki (plugins + mu-plugins) -> mapa \"prefix/relpath\" => content\n *  ─────────────────────────────────────────────────────────────────────────── */\nfunction wtp_collect_plugins_fs_map() {\n    $out = [];\n\n    $plugins_base = wp_normalize_path(WP_PLUGIN_DIR);\n    if (is_dir($plugins_base)) {\n        $out += wtp_collect_from_base($plugins_base, 'plugins');\n    }\n\n    $mu_base = wp_normalize_path(WPMU_PLUGIN_DIR);\n    if (is_dir($mu_base) && $mu_base !== $plugins_base) {\n        $out += wtp_collect_from_base($mu_base, 'mu-plugins');\n    }\n    return $out;\n}\n\nfunction wtp_collect_from_base($base, $prefix) {\n    $rii = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($base, FilesystemIterator::SKIP_DOTS));\n    $out = [];\n    foreach ($rii as $spl) {\n        if (!$spl->isFile()) continue;\n        $path = wp_normalize_path($spl->getPathname());\n        $rel  = ltrim(str_replace($base, '', $path), '/');\n\n        if (preg_match(WTP_EXCLUDE_RX, $rel)) continue;\n        if (preg_match(WTP_EXCLUDE_FILE_RX, $rel)) continue;\n\n        $ext = strtolower(pathinfo($rel, PATHINFO_EXTENSION));\n        if (!in_array($ext, WTP_ALLOWED_EXT, true)) continue;\n\n        $content = @file_get_contents($path);\n        if ($content === false) continue;\n\n        $key = trim($prefix, '/').'/'.$rel; // np. \"plugins/akismet/akismet.php\"\n        $out[$key] = $content;\n    }\n    return $out;\n}\n\n/** ───────────────────────────────────────────────────────────────────────────\n *  CHUNKING: dzieli mapę (k=>v) na paczki < limit (po JSON-encode)\n *  ─────────────────────────────────────────────────────────────────────────── */\nfunction wtp_chunk_map(array $map, int $targetBytes) {\n    $chunks = [];\n    $current = [];\n    $approxBytes = 2; // nawiasy {}\n\n    foreach ($map as $k => $v) {\n        // oszacuj rozmiar przy JSON (klucz+wartość jako string) – z SUBSTITUE dla bezpieczeństwa\n        $entryJson   = json_encode([$k => $v], JSON_UNESCAPED_SLASHES|JSON_UNESCAPED_UNICODE|JSON_INVALID_UTF8_SUBSTITUTE);\n        $entryBytes  = strlen($entryJson) + 1;\n\n        if ($approxBytes + $entryBytes > $targetBytes && !empty($current)) {\n            $chunks[] = $current;\n            $current = [];\n            $approxBytes = 2;\n        }\n        $current[$k] = $v;\n        $approxBytes += $entryBytes;\n    }\n    if (!empty($current)) $chunks[] = $current;\n    return $chunks;\n}\n\n/** ───────────────────────────────────────────────────────────────────────────\n *  PUSH: pliki chunków + indeks do GitHub (contents API)\n *  ─────────────────────────────────────────────────────────────────────────── */\nfunction wtp_push_chunks_and_index_to_github(array $chunks) {\n    $owner  = constant('WTP_GH_OWNER');\n    $repo   = constant('WTP_GH_REPO');\n    $branch = defined('WTP_GH_BRANCH') ? constant('WTP_GH_BRANCH') : 'main';\n    $token  = constant('WTP_GH_TOKEN');\n\n    $pushed = [];\n    foreach ($chunks as $i => $payloadMap) {\n        $payload = json_encode(\n            $payloadMap,\n            JSON_UNESCAPED_SLASHES|JSON_UNESCAPED_UNICODE|JSON_PRETTY_PRINT|JSON_INVALID_UTF8_SUBSTITUTE\n        );\n        $path    = sprintf('%s_%03d.json', WTP_CHUNK_BASENAME, $i);\n        $put     = wtp_gh_put_file($owner, $repo, $branch, $token, $path, $payload, 'Update '.$path.' (chunk)');\n        if ($put['code'] >= 300) {\n            return new WP_Error('wtp_github_put', 'GitHub PUT error '.$put['code'].': '.json_encode($put['body']));\n        }\n        $pushed[] = [\n            'path' => $path,\n            'size' => strlen($payload),\n            'sha1' => sha1($payload),\n            'raw'  => \"https://raw.githubusercontent.com/{$owner}/{$repo}/{$branch}/{$path}\"\n        ];\n    }\n\n    // Zbuduj indeks\n    $index = [\n        'version'      => 1,\n        'generated_at' => time(),\n        'chunks'       => $pushed,\n        'total_chunks' => count($pushed),\n    ];\n    $indexJson = json_encode($index, JSON_UNESCAPED_SLASHES|JSON_UNESCAPED_UNICODE|JSON_PRETTY_PRINT);\n    $putIndex  = wtp_gh_put_file($owner, $repo, $branch, $token, WTP_INDEX_PATH, $indexJson, 'Update '.WTP_INDEX_PATH.' (index)');\n    if ($putIndex['code'] >= 300) {\n        return new WP_Error('wtp_github_put', 'GitHub PUT index error '.$putIndex['code'].': '.json_encode($putIndex['body']));\n    }\n\n    return [\n        'index_raw_url' => \"https://raw.githubusercontent.com/{$owner}/{$repo}/{$branch}/\".WTP_INDEX_PATH,\n        'chunks'        => $pushed,\n    ];\n}\n\nfunction wtp_gh_put_file($owner,$repo,$branch,$token,$path,$content,$message) {\n    $api = \"https://api.github.com/repos/{$owner}/{$repo}/contents/{$path}\";\n    // get sha if exists\n    $sha = null;\n    $get = wtp_http('GET', $api.'?ref='.rawurlencode($branch), $token, null);\n    if ($get['code'] === 200 && !empty($get['body']['sha'])) $sha = $get['body']['sha'];\n\n    $body = [\n        'message' => $message,\n        'content' => base64_encode($content),\n        'branch'  => $branch,\n    ];\n    if ($sha) $body['sha'] = $sha;\n\n    return wtp_http('PUT', $api, $token, $body);\n}\n\nfunction wtp_http($method, $url, $token, $json) {\n    $args = [\n        'method'  => $method,\n        'headers' => [\n            'Authorization' => 'token '.$token,\n            'User-Agent'    => 'WTP-Exporter-Chunked',\n            'Accept'        => 'application/vnd.github+json',\n        ],\n        'timeout' => 30,\n    ];\n    if ($json !== null) {\n        $args['body'] = json_encode($json);\n        $args['headers']['Content-Type'] = 'application/json';\n    }\n    $res  = wp_remote_request($url, $args);\n    $code = wp_remote_retrieve_response_code($res);\n    $body = json_decode(wp_remote_retrieve_body($res), true);\n    return ['code'=>$code, 'body'=>$body];\n}"
}